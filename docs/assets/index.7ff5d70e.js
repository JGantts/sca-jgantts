import{d as F,r as Z,k as ye,l as O,m as A,u as hi,c as M,n as Ce,o as it,w as U,a as bt,p as ke,q as w,s as ve,t as Go,F as q,v as fi,x as Yn,y as te,z as Nt,A as Me,B as st,C as me,D as K,E as H,G as oe,H as En,I as he,J as fe,K as yt,L as pi,M as Re,i as We,N as qo,f as Ue,O as ht,P as Sn,Q as Se,R as gi}from"./index.7df17d01.js";var mi=typeof global=="object"&&global&&global.Object===Object&&global,Xo=mi,bi=typeof self=="object"&&self&&self.Object===Object&&self,yi=Xo||bi||Function("return this")(),Ee=yi,wi=Ee.Symbol,Be=wi,Yo=Object.prototype,xi=Yo.hasOwnProperty,Ei=Yo.toString,lt=Be?Be.toStringTag:void 0;function Si(e){var t=xi.call(e,lt),n=e[lt];try{e[lt]=void 0;var o=!0}catch{}var r=Ei.call(e);return o&&(t?e[lt]=n:delete e[lt]),r}var Pi=Object.prototype,ki=Pi.toString;function Oi(e){return ki.call(e)}var Ti="[object Null]",Mi="[object Undefined]",Kn=Be?Be.toStringTag:void 0;function Xe(e){return e==null?e===void 0?Mi:Ti:Kn&&Kn in Object(e)?Si(e):Oi(e)}function De(e){return e!=null&&typeof e=="object"}var _i="[object Symbol]";function Ko(e){return typeof e=="symbol"||De(e)&&Xe(e)==_i}function Ci(e,t){for(var n=-1,o=e==null?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}var zi=Array.isArray,Ge=zi,Ii=1/0,Jn=Be?Be.prototype:void 0,Qn=Jn?Jn.toString:void 0;function Jo(e){if(typeof e=="string")return e;if(Ge(e))return Ci(e,Jo)+"";if(Ko(e))return Qn?Qn.call(e):"";var t=e+"";return t=="0"&&1/e==-Ii?"-0":t}var Ai=/\s/;function $i(e){for(var t=e.length;t--&&Ai.test(e.charAt(t)););return t}var Li=/^\s+/;function Ni(e){return e&&e.slice(0,$i(e)+1).replace(Li,"")}function Oe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var eo=0/0,ji=/^[-+]0x[0-9a-f]+$/i,Zi=/^0b[01]+$/i,Bi=/^0o[0-7]+$/i,Di=parseInt;function _t(e){if(typeof e=="number")return e;if(Ko(e))return eo;if(Oe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Oe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Ni(e);var n=Zi.test(e);return n||Bi.test(e)?Di(e.slice(2),n?2:8):ji.test(e)?eo:+e}var to=1/0,Ri=17976931348623157e292;function Wi(e){if(!e)return e===0?e:0;if(e=_t(e),e===to||e===-to){var t=e<0?-1:1;return t*Ri}return e===e?e:0}function Qo(e){var t=Wi(e),n=t%1;return t===t?n?t-n:t:0}function er(e){return e}var Vi="[object AsyncFunction]",Hi="[object Function]",Fi="[object GeneratorFunction]",Ui="[object Proxy]";function Pn(e){if(!Oe(e))return!1;var t=Xe(e);return t==Hi||t==Fi||t==Vi||t==Ui}var Gi=Ee["__core-js_shared__"],en=Gi,no=function(){var e=/[^.]+$/.exec(en&&en.keys&&en.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function qi(e){return!!no&&no in e}var Xi=Function.prototype,Yi=Xi.toString;function Ye(e){if(e!=null){try{return Yi.call(e)}catch{}try{return e+""}catch{}}return""}var Ki=/[\\^$.*+?()[\]{}|]/g,Ji=/^\[object .+?Constructor\]$/,Qi=Function.prototype,ea=Object.prototype,ta=Qi.toString,na=ea.hasOwnProperty,oa=RegExp("^"+ta.call(na).replace(Ki,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ra(e){if(!Oe(e)||qi(e))return!1;var t=Pn(e)?oa:Ji;return t.test(Ye(e))}function ia(e,t){return e==null?void 0:e[t]}function Ke(e,t){var n=ia(e,t);return ra(n)?n:void 0}var aa=Ke(Ee,"WeakMap"),cn=aa,oo=Object.create,sa=function(){function e(){}return function(t){if(!Oe(t))return{};if(oo)return oo(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),la=sa;function ua(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function ca(){}function da(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}var va=800,ha=16,fa=Date.now;function pa(e){var t=0,n=0;return function(){var o=fa(),r=ha-(o-n);if(n=o,r>0){if(++t>=va)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function ga(e){return function(){return e}}var ma=function(){try{var e=Ke(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ct=ma,ba=Ct?function(e,t){return Ct(e,"toString",{configurable:!0,enumerable:!1,value:ga(t),writable:!0})}:er,ya=ba,wa=pa(ya),xa=wa;function Ea(e,t,n,o){for(var r=e.length,i=n+(o?1:-1);o?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function Sa(e){return e!==e}function Pa(e,t,n){for(var o=n-1,r=e.length;++o<r;)if(e[o]===t)return o;return-1}function ka(e,t,n){return t===t?Pa(e,t,n):Ea(e,Sa,n)}function Oa(e,t){var n=e==null?0:e.length;return!!n&&ka(e,t,0)>-1}var Ta=9007199254740991,Ma=/^(?:0|[1-9]\d*)$/;function tr(e,t){var n=typeof e;return t=t==null?Ta:t,!!t&&(n=="number"||n!="symbol"&&Ma.test(e))&&e>-1&&e%1==0&&e<t}function kn(e,t,n){t=="__proto__"&&Ct?Ct(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function wt(e,t){return e===t||e!==e&&t!==t}var _a=Object.prototype,Ca=_a.hasOwnProperty;function za(e,t,n){var o=e[t];(!(Ca.call(e,t)&&wt(o,n))||n===void 0&&!(t in e))&&kn(e,t,n)}function Ia(e,t,n,o){var r=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=o?o(n[s],e[s],s,n,e):void 0;l===void 0&&(l=e[s]),r?kn(n,s,l):za(n,s,l)}return n}var ro=Math.max;function Aa(e,t,n){return t=ro(t===void 0?e.length-1:t,0),function(){for(var o=arguments,r=-1,i=ro(o.length-t,0),a=Array(i);++r<i;)a[r]=o[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=o[r];return s[t]=n(a),ua(e,this,s)}}function $a(e,t){return xa(Aa(e,t,er),e+"")}var La=9007199254740991;function nr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=La}function jt(e){return e!=null&&nr(e.length)&&!Pn(e)}function or(e,t,n){if(!Oe(n))return!1;var o=typeof t;return(o=="number"?jt(n)&&tr(t,n.length):o=="string"&&t in n)?wt(n[t],e):!1}function rr(e){return $a(function(t,n){var o=-1,r=n.length,i=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(r--,i):void 0,a&&or(n[0],n[1],a)&&(i=r<3?void 0:i,r=1),t=Object(t);++o<r;){var s=n[o];s&&e(t,s,o,i)}return t})}var Na=Object.prototype;function On(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Na;return e===n}function ja(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}var Za="[object Arguments]";function io(e){return De(e)&&Xe(e)==Za}var ir=Object.prototype,Ba=ir.hasOwnProperty,Da=ir.propertyIsEnumerable,Ra=io(function(){return arguments}())?io:function(e){return De(e)&&Ba.call(e,"callee")&&!Da.call(e,"callee")},dn=Ra;function Wa(){return!1}var ar=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ao=ar&&typeof module=="object"&&module&&!module.nodeType&&module,Va=ao&&ao.exports===ar,so=Va?Ee.Buffer:void 0,Ha=so?so.isBuffer:void 0,Fa=Ha||Wa,zt=Fa,Ua="[object Arguments]",Ga="[object Array]",qa="[object Boolean]",Xa="[object Date]",Ya="[object Error]",Ka="[object Function]",Ja="[object Map]",Qa="[object Number]",es="[object Object]",ts="[object RegExp]",ns="[object Set]",os="[object String]",rs="[object WeakMap]",is="[object ArrayBuffer]",as="[object DataView]",ss="[object Float32Array]",ls="[object Float64Array]",us="[object Int8Array]",cs="[object Int16Array]",ds="[object Int32Array]",vs="[object Uint8Array]",hs="[object Uint8ClampedArray]",fs="[object Uint16Array]",ps="[object Uint32Array]",J={};J[ss]=J[ls]=J[us]=J[cs]=J[ds]=J[vs]=J[hs]=J[fs]=J[ps]=!0;J[Ua]=J[Ga]=J[is]=J[qa]=J[as]=J[Xa]=J[Ya]=J[Ka]=J[Ja]=J[Qa]=J[es]=J[ts]=J[ns]=J[os]=J[rs]=!1;function gs(e){return De(e)&&nr(e.length)&&!!J[Xe(e)]}function ms(e){return function(t){return e(t)}}var sr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dt=sr&&typeof module=="object"&&module&&!module.nodeType&&module,bs=dt&&dt.exports===sr,tn=bs&&Xo.process,ys=function(){try{var e=dt&&dt.require&&dt.require("util").types;return e||tn&&tn.binding&&tn.binding("util")}catch{}}(),lo=ys,uo=lo&&lo.isTypedArray,ws=uo?ms(uo):gs,Tn=ws,xs=Object.prototype,Es=xs.hasOwnProperty;function lr(e,t){var n=Ge(e),o=!n&&dn(e),r=!n&&!o&&zt(e),i=!n&&!o&&!r&&Tn(e),a=n||o||r||i,s=a?ja(e.length,String):[],l=s.length;for(var c in e)(t||Es.call(e,c))&&!(a&&(c=="length"||r&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||tr(c,l)))&&s.push(c);return s}function ur(e,t){return function(n){return e(t(n))}}var Ss=ur(Object.keys,Object),Ps=Ss,ks=Object.prototype,Os=ks.hasOwnProperty;function Ts(e){if(!On(e))return Ps(e);var t=[];for(var n in Object(e))Os.call(e,n)&&n!="constructor"&&t.push(n);return t}function Ms(e){return jt(e)?lr(e):Ts(e)}function _s(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Cs=Object.prototype,zs=Cs.hasOwnProperty;function Is(e){if(!Oe(e))return _s(e);var t=On(e),n=[];for(var o in e)o=="constructor"&&(t||!zs.call(e,o))||n.push(o);return n}function cr(e){return jt(e)?lr(e,!0):Is(e)}var As=Ke(Object,"create"),ft=As;function $s(){this.__data__=ft?ft(null):{},this.size=0}function Ls(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Ns="__lodash_hash_undefined__",js=Object.prototype,Zs=js.hasOwnProperty;function Bs(e){var t=this.__data__;if(ft){var n=t[e];return n===Ns?void 0:n}return Zs.call(t,e)?t[e]:void 0}var Ds=Object.prototype,Rs=Ds.hasOwnProperty;function Ws(e){var t=this.__data__;return ft?t[e]!==void 0:Rs.call(t,e)}var Vs="__lodash_hash_undefined__";function Hs(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ft&&t===void 0?Vs:t,this}function qe(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}qe.prototype.clear=$s;qe.prototype.delete=Ls;qe.prototype.get=Bs;qe.prototype.has=Ws;qe.prototype.set=Hs;function Fs(){this.__data__=[],this.size=0}function Zt(e,t){for(var n=e.length;n--;)if(wt(e[n][0],t))return n;return-1}var Us=Array.prototype,Gs=Us.splice;function qs(e){var t=this.__data__,n=Zt(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():Gs.call(t,n,1),--this.size,!0}function Xs(e){var t=this.__data__,n=Zt(t,e);return n<0?void 0:t[n][1]}function Ys(e){return Zt(this.__data__,e)>-1}function Ks(e,t){var n=this.__data__,o=Zt(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}function ze(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}ze.prototype.clear=Fs;ze.prototype.delete=qs;ze.prototype.get=Xs;ze.prototype.has=Ys;ze.prototype.set=Ks;var Js=Ke(Ee,"Map"),pt=Js;function Qs(){this.size=0,this.__data__={hash:new qe,map:new(pt||ze),string:new qe}}function el(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Bt(e,t){var n=e.__data__;return el(t)?n[typeof t=="string"?"string":"hash"]:n.map}function tl(e){var t=Bt(this,e).delete(e);return this.size-=t?1:0,t}function nl(e){return Bt(this,e).get(e)}function ol(e){return Bt(this,e).has(e)}function rl(e,t){var n=Bt(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}function Je(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}Je.prototype.clear=Qs;Je.prototype.delete=tl;Je.prototype.get=nl;Je.prototype.has=ol;Je.prototype.set=rl;function co(e){return e==null?"":Jo(e)}function il(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}var al=ur(Object.getPrototypeOf,Object),dr=al,sl="[object Object]",ll=Function.prototype,ul=Object.prototype,vr=ll.toString,cl=ul.hasOwnProperty,dl=vr.call(Object);function hr(e){if(!De(e)||Xe(e)!=sl)return!1;var t=dr(e);if(t===null)return!0;var n=cl.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&vr.call(n)==dl}function vl(e,t,n){var o=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(r);++o<r;)i[o]=e[o+t];return i}var hl=Ee.isFinite,fl=Math.min;function pl(e){var t=Math[e];return function(n,o){if(n=_t(n),o=o==null?0:fl(Qo(o),292),o&&hl(n)){var r=(co(n)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+o));return r=(co(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-o))}return t(n)}}var gl=Math.ceil,ml=Math.max;function Mn(e,t,n){(n?or(e,t,n):t===void 0)?t=1:t=ml(Qo(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var r=0,i=0,a=Array(gl(o/t));r<o;)a[i++]=vl(e,r,r+=t);return a}function bl(){this.__data__=new ze,this.size=0}function yl(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function wl(e){return this.__data__.get(e)}function xl(e){return this.__data__.has(e)}var El=200;function Sl(e,t){var n=this.__data__;if(n instanceof ze){var o=n.__data__;if(!pt||o.length<El-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new Je(o)}return n.set(e,t),this.size=n.size,this}function _e(e){var t=this.__data__=new ze(e);this.size=t.size}_e.prototype.clear=bl;_e.prototype.delete=yl;_e.prototype.get=wl;_e.prototype.has=xl;_e.prototype.set=Sl;var fr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,vo=fr&&typeof module=="object"&&module&&!module.nodeType&&module,Pl=vo&&vo.exports===fr,ho=Pl?Ee.Buffer:void 0,fo=ho?ho.allocUnsafe:void 0;function kl(e,t){if(t)return e.slice();var n=e.length,o=fo?fo(n):new e.constructor(n);return e.copy(o),o}function Ol(e,t){for(var n=-1,o=e==null?0:e.length,r=0,i=[];++n<o;){var a=e[n];t(a,n,e)&&(i[r++]=a)}return i}function Tl(){return[]}var Ml=Object.prototype,_l=Ml.propertyIsEnumerable,po=Object.getOwnPropertySymbols,Cl=po?function(e){return e==null?[]:(e=Object(e),Ol(po(e),function(t){return _l.call(e,t)}))}:Tl,zl=Cl;function Il(e,t,n){var o=t(e);return Ge(e)?o:il(o,n(e))}function go(e){return Il(e,Ms,zl)}var Al=Ke(Ee,"DataView"),vn=Al,$l=Ke(Ee,"Promise"),hn=$l,Ll=Ke(Ee,"Set"),nt=Ll,mo="[object Map]",Nl="[object Object]",bo="[object Promise]",yo="[object Set]",wo="[object WeakMap]",xo="[object DataView]",jl=Ye(vn),Zl=Ye(pt),Bl=Ye(hn),Dl=Ye(nt),Rl=Ye(cn),He=Xe;(vn&&He(new vn(new ArrayBuffer(1)))!=xo||pt&&He(new pt)!=mo||hn&&He(hn.resolve())!=bo||nt&&He(new nt)!=yo||cn&&He(new cn)!=wo)&&(He=function(e){var t=Xe(e),n=t==Nl?e.constructor:void 0,o=n?Ye(n):"";if(o)switch(o){case jl:return xo;case Zl:return mo;case Bl:return bo;case Dl:return yo;case Rl:return wo}return t});var Eo=He,Wl=Ee.Uint8Array,It=Wl;function Vl(e){var t=new e.constructor(e.byteLength);return new It(t).set(new It(e)),t}function Hl(e,t){var n=t?Vl(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Fl(e){return typeof e.constructor=="function"&&!On(e)?la(dr(e)):{}}var Ul="__lodash_hash_undefined__";function Gl(e){return this.__data__.set(e,Ul),this}function ql(e){return this.__data__.has(e)}function gt(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Je;++t<n;)this.add(e[t])}gt.prototype.add=gt.prototype.push=Gl;gt.prototype.has=ql;function Xl(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}function pr(e,t){return e.has(t)}var Yl=1,Kl=2;function gr(e,t,n,o,r,i){var a=n&Yl,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var h=-1,d=!0,v=n&Kl?new gt:void 0;for(i.set(e,t),i.set(t,e);++h<s;){var x=e[h],E=t[h];if(o)var S=a?o(E,x,h,t,e,i):o(x,E,h,e,t,i);if(S!==void 0){if(S)continue;d=!1;break}if(v){if(!Xl(t,function(g,m){if(!pr(v,m)&&(x===g||r(x,g,n,o,i)))return v.push(m)})){d=!1;break}}else if(!(x===E||r(x,E,n,o,i))){d=!1;break}}return i.delete(e),i.delete(t),d}function Jl(e){var t=-1,n=Array(e.size);return e.forEach(function(o,r){n[++t]=[r,o]}),n}function _n(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n}var Ql=1,eu=2,tu="[object Boolean]",nu="[object Date]",ou="[object Error]",ru="[object Map]",iu="[object Number]",au="[object RegExp]",su="[object Set]",lu="[object String]",uu="[object Symbol]",cu="[object ArrayBuffer]",du="[object DataView]",So=Be?Be.prototype:void 0,nn=So?So.valueOf:void 0;function vu(e,t,n,o,r,i,a){switch(n){case du:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case cu:return!(e.byteLength!=t.byteLength||!i(new It(e),new It(t)));case tu:case nu:case iu:return wt(+e,+t);case ou:return e.name==t.name&&e.message==t.message;case au:case lu:return e==t+"";case ru:var s=Jl;case su:var l=o&Ql;if(s||(s=_n),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;o|=eu,a.set(e,t);var u=gr(s(e),s(t),o,r,i,a);return a.delete(e),u;case uu:if(nn)return nn.call(e)==nn.call(t)}return!1}var hu=1,fu=Object.prototype,pu=fu.hasOwnProperty;function gu(e,t,n,o,r,i){var a=n&hu,s=go(e),l=s.length,c=go(t),u=c.length;if(l!=u&&!a)return!1;for(var h=l;h--;){var d=s[h];if(!(a?d in t:pu.call(t,d)))return!1}var v=i.get(e),x=i.get(t);if(v&&x)return v==t&&x==e;var E=!0;i.set(e,t),i.set(t,e);for(var S=a;++h<l;){d=s[h];var g=e[d],m=t[d];if(o)var b=a?o(m,g,d,t,e,i):o(g,m,d,e,t,i);if(!(b===void 0?g===m||r(g,m,n,o,i):b)){E=!1;break}S||(S=d=="constructor")}if(E&&!S){var y=e.constructor,f=t.constructor;y!=f&&"constructor"in e&&"constructor"in t&&!(typeof y=="function"&&y instanceof y&&typeof f=="function"&&f instanceof f)&&(E=!1)}return i.delete(e),i.delete(t),E}var mu=1,Po="[object Arguments]",ko="[object Array]",St="[object Object]",bu=Object.prototype,Oo=bu.hasOwnProperty;function yu(e,t,n,o,r,i){var a=Ge(e),s=Ge(t),l=a?ko:Eo(e),c=s?ko:Eo(t);l=l==Po?St:l,c=c==Po?St:c;var u=l==St,h=c==St,d=l==c;if(d&&zt(e)){if(!zt(t))return!1;a=!0,u=!1}if(d&&!u)return i||(i=new _e),a||Tn(e)?gr(e,t,n,o,r,i):vu(e,t,l,n,o,r,i);if(!(n&mu)){var v=u&&Oo.call(e,"__wrapped__"),x=h&&Oo.call(t,"__wrapped__");if(v||x){var E=v?e.value():e,S=x?t.value():t;return i||(i=new _e),r(E,S,n,o,i)}}return d?(i||(i=new _e),gu(e,t,n,o,r,i)):!1}function mr(e,t,n,o,r){return e===t?!0:e==null||t==null||!De(e)&&!De(t)?e!==e&&t!==t:yu(e,t,n,o,mr,r)}function wu(e){return function(t,n,o){for(var r=-1,i=Object(t),a=o(t),s=a.length;s--;){var l=a[e?s:++r];if(n(i[l],l,i)===!1)break}return t}}var xu=wu(),Eu=xu,Su=function(){return Ee.Date.now()},on=Su,Pu="Expected a function",ku=Math.max,Ou=Math.min;function Tu(e,t,n){var o,r,i,a,s,l,c=0,u=!1,h=!1,d=!0;if(typeof e!="function")throw new TypeError(Pu);t=_t(t)||0,Oe(n)&&(u=!!n.leading,h="maxWait"in n,i=h?ku(_t(n.maxWait)||0,t):i,d="trailing"in n?!!n.trailing:d);function v(p){var k=o,T=r;return o=r=void 0,c=p,a=e.apply(T,k),a}function x(p){return c=p,s=setTimeout(g,t),u?v(p):a}function E(p){var k=p-l,T=p-c,C=t-k;return h?Ou(C,i-T):C}function S(p){var k=p-l,T=p-c;return l===void 0||k>=t||k<0||h&&T>=i}function g(){var p=on();if(S(p))return m(p);s=setTimeout(g,E(p))}function m(p){return s=void 0,d&&o?v(p):(o=r=void 0,a)}function b(){s!==void 0&&clearTimeout(s),c=0,o=l=r=s=void 0}function y(){return s===void 0?a:m(on())}function f(){var p=on(),k=S(p);if(o=arguments,r=this,l=p,k){if(s===void 0)return x(l);if(h)return clearTimeout(s),s=setTimeout(g,t),v(l)}return s===void 0&&(s=setTimeout(g,t)),a}return f.cancel=b,f.flush=y,f}function fn(e,t,n){(n!==void 0&&!wt(e[t],n)||n===void 0&&!(t in e))&&kn(e,t,n)}function Mu(e){return De(e)&&jt(e)}function pn(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function _u(e){return Ia(e,cr(e))}function Cu(e,t,n,o,r,i,a){var s=pn(e,n),l=pn(t,n),c=a.get(l);if(c){fn(e,n,c);return}var u=i?i(s,l,n+"",e,t,a):void 0,h=u===void 0;if(h){var d=Ge(l),v=!d&&zt(l),x=!d&&!v&&Tn(l);u=l,d||v||x?Ge(s)?u=s:Mu(s)?u=da(s):v?(h=!1,u=kl(l,!0)):x?(h=!1,u=Hl(l,!0)):u=[]:hr(l)||dn(l)?(u=s,dn(s)?u=_u(s):(!Oe(s)||Pn(s))&&(u=Fl(l))):h=!1}h&&(a.set(l,u),r(u,l,o,i,a),a.delete(l)),fn(e,n,u)}function Cn(e,t,n,o,r){e!==t&&Eu(t,function(i,a){if(r||(r=new _e),Oe(i))Cu(e,t,a,n,Cn,o,r);else{var s=o?o(pn(e,a),i,a+"",e,t,r):void 0;s===void 0&&(s=i),fn(e,a,s)}},cr)}var zu=rr(function(e,t,n,o){Cn(e,t,n,o)}),Iu=zu;function Au(e,t,n){for(var o=-1,r=e==null?0:e.length;++o<r;)if(n(t,e[o]))return!0;return!1}function Ne(e,t){return mr(e,t)}var $u=rr(function(e,t,n){Cn(e,t,n)}),Lu=$u,Nu=pl("round"),To=Nu,ju=1/0,Zu=nt&&1/_n(new nt([,-0]))[1]==ju?function(e){return new nt(e)}:ca,Bu=Zu,Du=200;function Ru(e,t,n){var o=-1,r=Oa,i=e.length,a=!0,s=[],l=s;if(n)a=!1,r=Au;else if(i>=Du){var c=t?null:Bu(e);if(c)return _n(c);a=!1,r=pr,l=new gt}else l=t?[]:s;e:for(;++o<i;){var u=e[o],h=t?t(u):u;if(u=n||u!==0?u:0,a&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(u)}else r(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s}function Wu(e){return e&&e.length?Ru(e):[]}var Vu=Object.defineProperty,Hu=Object.defineProperties,Fu=Object.getOwnPropertyDescriptors,Mo=Object.getOwnPropertySymbols,Uu=Object.prototype.hasOwnProperty,Gu=Object.prototype.propertyIsEnumerable,ce=Math.pow,_o=(e,t,n)=>t in e?Vu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ue=(e,t)=>{for(var n in t||(t={}))Uu.call(t,n)&&_o(e,n,t[n]);if(Mo)for(var n of Mo(t))Gu.call(t,n)&&_o(e,n,t[n]);return e},Dt=(e,t)=>Hu(e,Fu(t)),Pe=(e,t,n)=>new Promise((o,r)=>{var i=l=>{try{s(n.next(l))}catch(c){r(c)}},a=l=>{try{s(n.throw(l))}catch(c){r(c)}},s=l=>l.done?o(l.value):Promise.resolve(l.value).then(i,a);s((n=n.apply(e,t)).next())});const qu=["paths","node-labels","nodes","focusring","edge-labels","edges","base","grid","background","root"];function Le(e){return pi(e)?e:Ce(e)}function X(e,t="Parameter"){if(e==null)throw new Error(`${t} is null`);return e}const br=Symbol("containers");function Xu(e){Re(br,e)}function zn(){const e=X(We(br),"containers");return{container:e.container,svg:e.svg,viewport:e.viewport,svgPanZoom:e.svgPanZoom}}class I{static value(t,n){return t instanceof Function?t(n):t}static values(t,n){return Object.values(t).filter(o=>o instanceof Function).length===0?t:Object.fromEntries(Object.entries(t).map(([o,r])=>[o,r instanceof Function?r(n):r]))}}var N=(e=>(e.CENTER="center",e.NORTH="north",e.NORTH_EAST="north-east",e.EAST="east",e.SOUTH_EAST="south-east",e.SOUTH="south",e.SOUTH_WEST="south-west",e.WEST="west",e.NORTH_WEST="north-west",e))(N||{});function rn(e){const t={};return Object.assign(t,e(t))}function Rv(e){return e}function Co(e,t,n){const o=I.values(t.normal,e);return o.type=="circle"?{width:o.radius*2*n,height:o.radius*2*n}:{width:o.width*n,height:o.height*n}}function Yu(e,t,n,o){const r=Math.abs(e.x-n.x)<t.width/2+o.width/2,i=Math.abs(e.y-n.y)<t.height/2+o.height/2;return r&&i}function xt(e,t){let n=0;return t===1||e===void 0||e==="none"?n=e!=null?e:0:typeof e=="string"?n=e.split(/\s+/).map(o=>parseInt(o)*t).filter(o=>!isNaN(o)).join(" "):n=e*t,n&&n!=="0"?n:void 0}function Rt(e){let t=0;if(e===void 0||e==="none")t=0;else if(typeof e=="string"){const n=e.split(/\s+/).map(o=>parseInt(o)).filter(o=>!isNaN(o));n.length%2===0?t=n.reduce((o,r)=>o+r,0):t=n.reduce((o,r)=>o+r,0)*2}else t=e*2;return t}const zo=20;class Ku{activate(t){const{nodePositions:n,nodes:o,configs:r,emitter:i,scale:a,svgPanZoom:s}=t,l=h=>{for(const[d,v]of Object.entries(h)){const x=this.getOrCreateNodePosition(n,d);this.setNodePosition(x,v)}},c=h=>{const d=h.filter(E=>!(E in n.value)),v=s.getViewArea(),x=a.value;for(const E of d){const S=o.value[E],g=Co(S,r.node,x),m=ue({},v.center);for(;;){let y=!1;for(const[f,p]of Object.entries(n.value)){if(E===f)continue;const k=o.value[f];if(!k)continue;const T=Co(k,r.node,x);if(y=Yu(m,g,p,T),y)break}if(y)m.x+=g.width+zo*x,m.x+g.width/2>v.box.right&&(m.x=v.center.x,m.y+=g.height+zo*x);else break}const b=this.getOrCreateNodePosition(n,E);this.setNodePosition(b,m)}};c(Object.keys(o.value));const u=U(()=>Ne(new Set(Object.keys(o.value)),new Set(Object.keys(n.value))),h=>{h||c(Object.keys(o.value))});i.on("node:dragstart",l),i.on("node:pointermove",l),i.on("node:dragend",l),this.onDeactivate=()=>{u(),i.off("node:dragstart",l),i.off("node:pointermove",l),i.off("node:dragend",l)}}deactivate(){this.onDeactivate&&this.onDeactivate()}setNodePosition(t,n){t.value.x=To(n.x,3),t.value.y=To(n.y,3)}getOrCreateNodePosition(t,n){const o=Me(t.value,n);return o.value||(o.value={x:0,y:0}),o}}function Ju(){return{view:{scalingObjects:!1,panEnabled:!0,zoomEnabled:!0,minZoomLevel:.1,maxZoomLevel:64,doubleClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,boxSelectionEnabled:!1,autoPanAndZoomOnLoad:"center-content",autoPanOnResize:!0,layoutHandler:new Ku,onSvgPanZoomInitialized:void 0,grid:{visible:!1,interval:10,thickIncrements:5,line:{color:"#e0e0e0",width:1,dasharray:1},thick:{color:"#cccccc",width:1,dasharray:0}},selection:{box:{color:"#0000ff20",strokeWidth:1,strokeColor:"#aaaaff",strokeDasharray:0},detector:e=>{const t=/Mac OS/.test(navigator.userAgent)?e.metaKey:e.ctrlKey;return e.type==="keydown"?t:!t}},builtInLayerOrder:[],onBeforeInitialDisplay:void 0},node:rn(e=>({normal:{type:"circle",radius:16,width:32,height:32,borderRadius:4,color:"#4466cc",strokeWidth:0,strokeColor:"#000000",strokeDasharray:0},hover:{type:t=>I.value(e.normal.type,t),radius:t=>{var n;return((n=I.value(e.normal.radius,t))!=null?n:0)+2},width:t=>{var n;return((n=I.value(e.normal.width,t))!=null?n:0)+2},height:t=>{var n;return((n=I.value(e.normal.height,t))!=null?n:0)+2},borderRadius:t=>{var n;return(n=I.value(e.normal.borderRadius,t))!=null?n:0},strokeWidth:t=>I.value(e.normal.strokeWidth,t),strokeColor:t=>I.value(e.normal.strokeColor,t),strokeDasharray:t=>I.value(e.normal.strokeDasharray,t),color:"#3355bb"},selected:void 0,draggable:!0,selectable:!1,label:{visible:!0,fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,direction:N.SOUTH,directionAutoAdjustment:!1,text:"name",handleNodeEvents:!0},focusring:{visible:!0,width:4,padding:3,color:"#eebb00"},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0})),edge:rn(e=>({normal:{width:2,color:"#4466cc",dasharray:0,linecap:"butt",animate:!1,animationSpeed:50},hover:{width:t=>I.value(e.normal.width,t)+1,color:"#3355bb",dasharray:t=>I.value(e.normal.dasharray,t),linecap:t=>I.value(e.normal.linecap,t),animate:t=>I.value(e.normal.animate,t),animationSpeed:t=>I.value(e.normal.animationSpeed,t)},selected:{width:t=>I.value(e.normal.width,t)+1,color:"#dd8800",dasharray:t=>{const n=I.value(e.normal.width,t);return`${n*1.5} ${n*2}`},linecap:t=>I.value(e.normal.linecap,t),animate:t=>I.value(e.normal.animate,t),animationSpeed:t=>I.value(e.normal.animationSpeed,t)},selectable:!1,gap:3,type:"straight",marker:{source:{type:"none",width:5,height:5,margin:-1,offset:0,units:"strokeWidth",color:null},target:{type:"none",width:5,height:5,margin:-1,offset:0,units:"strokeWidth",color:null}},margin:null,summarize:(t,n)=>n.edge.type=="curve"?!1:null,summarized:{label:{fontSize:10,lineHeight:1,color:"#4466cc"},shape:{type:"rect",radius:6,width:12,height:12,borderRadius:3,color:"#ffffff",strokeWidth:1,strokeColor:"#4466cc",strokeDasharray:void 0},stroke:{width:5,color:"#4466cc",dasharray:void 0,linecap:void 0,animate:!1,animationSpeed:50}},selfLoop:{radius:12,isClockwise:!0,offset:10,angle:270},keepOrder:"clock",label:{fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,padding:4},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0}})),path:rn(e=>({visible:!1,clickable:!1,hoverable:!1,curveInNode:!1,end:"centerOfNode",margin:0,path:Ce({width:6,color:t=>{const n=["#d5000088","#c5116288","#aa00ff88","#6200ea88","#304ffe88","#2962ff88","#0091ea88","#00b8d488","#00bfa588","#00c85388","#64dd1788","#aeea0088","#ffd60088","#ffab0088","#ff6d0088","#dd2c0088"],o=t.edges.map(r=>r.split("").reduce((i,a)=>(i=(i<<5)-i+a.charCodeAt(0),i&i),0)).reduce((r,i)=>r+i,0);return n[Math.abs(o)%n.length]},dasharray:void 0,linecap:"round",linejoin:"round",animate:!1,animationSpeed:50}),normal:{width:t=>I.value(e.path.width,t),color:t=>I.value(e.path.color,t),dasharray:t=>I.value(e.path.dasharray,t),linecap:t=>I.value(e.path.linecap,t),linejoin:t=>I.value(e.path.linejoin,t),animate:t=>I.value(e.path.animate,t),animationSpeed:t=>I.value(e.path.animationSpeed,t)},hover:{width:t=>I.value(e.normal.width,t)+2,color:t=>I.value(e.normal.color,t),dasharray:t=>I.value(e.normal.dasharray,t),linecap:t=>I.value(e.normal.linecap,t),linejoin:t=>I.value(e.normal.linejoin,t),animate:t=>I.value(e.normal.animate,t),animationSpeed:t=>I.value(e.normal.animationSpeed,t)},selected:{width:t=>I.value(e.normal.width,t)+2,color:t=>I.value(e.normal.color,t),dasharray:"6 12",linecap:t=>I.value(e.normal.linecap,t),linejoin:t=>I.value(e.normal.linejoin,t),animate:t=>I.value(e.normal.animate,t),animationSpeed:t=>I.value(e.normal.animationSpeed,t)},selectable:!1,zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0}))}}const yr=Symbol("style");function Qu(e,t){return hr(e)?Lu(e,t):t}function ec(e){const t=Ce(Ju()),n=Object.keys(t);for(const o of n)U(()=>e.value[o],()=>{Iu(t[o],e.value[o]||{},Qu)},{immediate:!0,deep:!0});return Re(yr,t),t}function Wt(e){return X(We(yr),`Configs(${e})`)[e]}function tc(){return Wt("view")}function Vt(){return Wt("node")}function Ht(){return Wt("edge")}function wr(){return Wt("path")}let nc=1;function oc(){return nc++}function ge(e){return Object.entries(e)}function Tt(e,t){const n=new Set(Object.keys(e));ge(t).forEach(([o,r])=>{Ne(e[o],r)||(e[o]=r),n.delete(o)}),n.forEach(o=>delete e[o])}function rc(e){return e instanceof Promise||e&&typeof e.then=="function"}function ic(e,t,n){const o=Le({edgeLayoutPoints:{},edgeGroups:{},summarizedEdges:{}});return ye(()=>{const{edgeLayoutPoints:r,edgeGroups:i}=sc(n,e.value,t.value);Tt(o.edgeLayoutPoints,r),Tt(o.edgeGroups,i)}),ye(()=>{const r={};for(const[i,{edges:a,groupWidth:s}]of Object.entries(o.edgeGroups)){let l=!1;if(s==0)l=!1;else if(n.edge.summarize instanceof Function){const c=n.edge.summarize(a,n);c===null?l=Io(e.value,a,n,s):l=c}else n.edge.summarize?l=Io(e.value,a,n,s):l=!1;o.edgeGroups[i].summarize=l,l&&Object.keys(a).forEach(c=>r[c]=!0)}Tt(o.summarizedEdges,r)}),o}function ac(e,t,n,o,r,i){return e?t?Ao(e.edge,n,o,r,0,0,i):Ao(e.edge,n,o,r,e.groupWidth,e.pointInGroup,i):{p1:{x:0,y:0},p2:{x:0,y:0}}}function sc(e,t,n){const o={},r={},i={};for(const[s,l]of Object.entries(n)){if(!(l.source in t&&l.target in t))continue;const c=[l.source,l.target].sort().join("<=>"),u=i[c]||{};u[s]=l,i[c]=u}const a=e.edge.gap instanceof Function?e.edge.gap:(s,l)=>e.edge.gap;for(const[s,l]of Object.entries(i)){const c=Object.keys(l).length;if(c==0)continue;const u=a(l,e),[h,d]=Object.entries(l)[0];if(c===1)o[h]={edge:d,pointInGroup:0,groupWidth:0},r[s]={edges:l,groupWidth:0,summarize:!1};else{let v=0;const x=Object.entries(l).map(([g,m])=>{let b=I.value(e.edge.normal.width,m);return isNaN(+b)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",g,b),b=1),b/2}),E=Object.entries(l).map(([g,m],b)=>(b>0&&(v+=x[b-1]+u+x[b]),[g,m,v])),S=v;E.forEach(([g,m,b])=>{o[g]={edge:m,pointInGroup:b,groupWidth:S}}),r[s]={edges:l,groupWidth:S,summarize:!1}}}return{edgeLayoutPoints:o,edgeGroups:r}}function Io(e,t,n,o){if(Object.entries(t).length===1)return!1;const r=Math.min(...Object.values(t).flatMap(i=>[e[i.source],e[i.target]]).filter(i=>i).map(i=>{const a=I.values(n.node.normal,i);return a.type==="circle"?a.radius*2:Math.min(a.width,a.height)}));return o>r}function Ao(e,t,n,o,r,i,a){var s,l,c,u,h,d,v,x;let E,S,g,m;return e.source<e.target?[E,S,g,m]=$o((s=t==null?void 0:t.x)!=null?s:0,(l=t==null?void 0:t.y)!=null?l:0,(c=n==null?void 0:n.x)!=null?c:0,(u=n==null?void 0:n.y)!=null?u:0,o,r,i,a):[g,m,E,S]=$o((h=n==null?void 0:n.x)!=null?h:0,(d=n==null?void 0:n.y)!=null?d:0,(v=t==null?void 0:t.x)!=null?v:0,(x=t==null?void 0:t.y)!=null?x:0,o,r,i,a),{p1:{x:E,y:S},p2:{x:g,y:m}}}function $o(e,t,n,o,r,i,a,s){const l=n-e,c=o-t;let u=(i/2-a)*r;if(u!==0&&s!=="clock"){const h=Math.atan2(o-t,n-e);if(s==="vertical"){const d=Math.PI/2;(h<-d||h>=d)&&(u*=-1)}else s==="horizontal"&&h<0&&(u*=-1)}if(l===0){const h=c<0?-1:1;return[e+u*h,t,n+u*h,o]}else if(c===0){const h=l<0?1:-1;return[e,t+u*h,n,o+u*h]}else{const h=-1/(c/l);c<0&&(u=-u);const d=u/Math.sqrt(1+Math.pow(h,2));return[e+d,t+d*h,n+d,o+d*h]}}function xr(e,t,n){return n||(n={x:0,y:0}),n.x=e.x+t.x,n.y=e.y+t.y,n}function In(e,t,n){return n||(n={x:0,y:0}),n.x=e.x-t.x,n.y=e.y-t.y,n}function Er(e,t,n){return n||(n={x:0,y:0}),n.x=e.x*t.x,n.y=e.y*t.y,n}function Sr(e,t,n){return n||(n={x:0,y:0}),n.x=e.x*t,n.y=e.y*t,n}function An(e,t,n){return n||(n={x:0,y:0}),n.x=e.x/t.x,n.y=e.y/t.y,n}function Pr(e,t){return e.x*t.x+e.y*t.y}function kr(e,t){return e.x*t.y-e.y*t.x}function $n(e){return e.x*e.x+e.y*e.y}function Ln(e){return Math.sqrt($n(e))}function Nn(e,t){const n=e.x-t.x,o=e.y-t.y;return n*n+o*o}function Or(e,t){return Math.sqrt(Nn(e,t))}function Tr(e,t){t||(t={x:0,y:0});const n=Ln(e);return n===0?(t.x=1,t.y=0):An(e,{x:n,y:n},t),t}function At(e,t,n){n||(n={x:0,y:0});const o=e.x*Math.cos(t)-e.y*Math.sin(t),r=e.x*Math.sin(t)+e.y*Math.cos(t);return n.x=o,n.y=r,n}const lc=180/Math.PI;function uc(e){return e*lc}function jn(e){return Math.atan2(e.y,e.x)}function Zn(e){return uc(jn(e))}const cc=Object.freeze(Object.defineProperty({__proto__:null,add:xr,angle:jn,angleDegree:Zn,cross:kr,distance:Or,distanceSquared:Nn,divide:An,dot:Pr,length:Ln,lengthSquared:$n,multiply:Er,multiplyScalar:Sr,normalize:Tr,rotate:At,subtract:In},Symbol.toStringTag,{value:"Module"}));class V{static fromArray(t){return new V(t[0]||0,t[1]||0)}static fromObject(t){return new V(t.x,t.y)}constructor(t,n){this.x=t,this.y=n}add(t){return xr(this,t,this)}subtract(t){return In(this,t,this)}multiply(t){return Er(this,t,this)}multiplyScalar(t){return Sr(this,t,this)}divide(t){return An(this,t,this)}dot(t){return Pr(this,t)}cross(t){return kr(this,t)}lengthSquared(){return $n(this)}length(){return Ln(this)}distanceSquared(t){return Nn(this,t)}distance(t){return Or(this,t)}normalize(){return Tr(this,this)}angle(){return jn(this)}angleDegree(){return Zn(this)}rotate(t){return At(this,t,this)}isEqualTo(t){return this.x===t.x&&this.y===t.y}clone(){return new V(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toArray(){return[this.x,this.y]}}const ne=ue({Vector2D:V},cc);class Q{constructor(t,n,o){this.source=t,this.target=n,this.v=o}static fromLinePosition(t){const n=V.fromObject(t.p1),o=V.fromObject(t.p2);return new Q(n,o,ot(n,o))}static fromPositions(t,n){const o=V.fromObject(t),r=V.fromObject(n);return new Q(o,r,ot(o,r))}static fromVectors(t,n){return new Q(t,n,ot(t,n))}}function ot(e,t){return t.clone().subtract(e)}function dc(e){return[V.fromObject(e.p1),V.fromObject(e.p2)]}function vc(e){return new V((e.p1.x+e.p2.x)/2,(e.p1.y+e.p2.y)/2)}function $t(e,t){return{p1:e,p2:t}}function gn(e,t,n){const o=Q.fromLinePosition(e);return hc(o,t,n)}function hc(e,t,n){const o=e.v.clone().normalize(),r=e.source.clone().add(o.clone().multiplyScalar(t)),i=e.target.clone().subtract(o.clone().multiplyScalar(n));let a=r.toObject(),s=i.toObject();const l=ot(r,i);if(e.v.angle()*l.angle()<0){const c=new V((a.x+s.x)/2,(a.y+s.y)/2),u=c.clone().add(o.multiplyScalar(.5));a=c.toObject(),s=u.toObject()}return{p1:a,p2:s}}function fc(e){return{p1:e.p2,p2:e.p1}}function ut(e){const t=e.v.clone().normalize().rotate(Math.PI/2);return Q.fromVectors(e.target,e.target.clone().add(t))}function Bn(e,t){const n=t.v.clone().normalize(),o=t.source,r=ne.subtract(e,o),i=n.dot(r);return o.clone().add(n.multiplyScalar(i))}function Ft(e,t,n,o){if(!(ne.lengthSquared(ne.subtract(t,n))-o*o<=Math.pow(1,-10)))return null;const r=Q.fromVectors(e,t),i=Bn(n,r),a=ne.length(ne.subtract(i,n));if(o<a)return null;if(o===a)return i;const s=Math.sqrt(ce(o,2)-ce(a,2)),l=r.v.normalize().multiplyScalar(s);return i.subtract(l)}function pc(e,t,n,o,r){if(!(ne.lengthSquared(ne.subtract(t,n))-o*o<=Math.pow(1,-10)))return null;const i=Q.fromVectors(e,t),a=Bn(n,i),s=ne.length(ne.subtract(a,n));if(o<s)return null;if(o===s)return a;const l=Math.sqrt(ce(o,2)-ce(s,2)),c=i.v.normalize().multiplyScalar(l),u=a.clone().add(c),h=a.clone().subtract(c),d=r.distance(u),v=r.distance(h);return Math.abs(d-v)<2?h:d<v?u:h}function Fe(e,t){const n=ne.subtract(t.source,e.source),o=e.v,r=t.v,i=ne.cross(n,o)/ne.cross(o,r);return t.source.clone().add(r.clone().multiplyScalar(i))}function mt(e,t,n,o,r){const i=e,a=n.clone().subtract(i),s=a.length(),l=t+o;if(l<s)return null;const c=Math.abs(t-o);if(s<c)return null;if(s===l){const f=a.clone().normalize(),p=e.clone().add(f.multiplyScalar(t));return r?p:[p,p]}if(s===c){const f=a.clone().normalize(),p=t>o,k=e.clone().add(f.multiplyScalar(p?t:-t));return r?k:[k,k]}const u=t,h=o,d=(ce(s,2)+ce(u,2)-ce(h,2))/(2*s*u),v=u*d,x=Math.sqrt(ce(u,2)-ce(v,2)),E=a.clone().normalize(),S=new V(-E.y,E.x),g=E.clone().multiplyScalar(v),m=S.clone().multiplyScalar(x),b=e.clone().add(g).add(m),y=e.clone().add(g).subtract(m);if(r){const f=b.distance(r),p=y.distance(r);return f<p?b:y}else return[b,y]}function Lo(e,t,n,o){const r=Q.fromPositions(e,t),i=(n.width+n.strokeWidth)/2*o,a=(n.height+n.strokeWidth)/2*o,s=n.borderRadius>0?(n.borderRadius+n.strokeWidth/2)*o:0,l=(r.v.angle()-Math.PI/2)%Math.PI,c=Math.PI/2-l%Math.PI,u=a*Math.abs(Math.tan(l)),h=i*Math.abs(Math.tan(c)),d=u<=i-s,v=h<=a-s;if(d||v||s===0)return Math.sqrt(d?ce(a,2)+ce(u,2):ce(i,2)+ce(h,2));{const x=t.x-i+s,E=t.y-a+s,S=t.x+i-s,g=t.y+a-s,m=[new V(x,E),new V(S,E),new V(S,g),new V(x,g)],b=Math.floor((r.v.angleDegree()+360)%360/90),y=m[b],f=Ft(r.source,Bn(y,r),y,s);return f?ot(f,r.target).length():ot(y,r.target).length()+s}}function Mr(e,t,n,o,r){const i=Q.fromLinePosition(e),a=i.v.clone().normalize(),s=o===0?i.source:i.source.clone().add(a.clone().multiplyScalar(o*r)),l=o===0?i.target:i.target.clone().subtract(a.clone().multiplyScalar(o*r)),c=(t.width/2+n)*r,u=new V(-a.y,a.x).multiplyScalar(c);let h=ne.subtract(s,u),d=ne.add(s,u),v=ne.subtract(l,u),x=ne.add(l,u);const E=i.v.angleDegree();return(E<-90||E>=90)&&([h,d]=[d,h],[v,x]=[x,v]),{source:{above:h,below:d},target:{above:v,below:x}}}function gc(e,t,n,o){let r;n.type==="circle"?r=n.radius+n.strokeWidth/2:r=Lo(t,e,n,1);let i;return o.type==="circle"?i=o.radius+o.strokeWidth/2:i=Lo(e,t,o,1),[r,i]}function je(e,t,n){const{x:o,y:r}=e,i=o-t.x,a=r-t.y;return{x:i*Math.cos(n)-a*Math.sin(n)+t.x,y:i*Math.sin(n)+a*Math.cos(n)+t.y}}function mn(e){return e>0?-(Math.PI*2-e):Math.PI*2+e}function bn(e,t,n,o){const r=[],i=Q.fromVectors(t,e),a=Q.fromVectors(t,n);let s=rt(i,a);o*s<0&&(s=mn(s));const l=V.fromObject(je(e,t,-s/2)),c=Q.fromVectors(t,l),u=ut(c),h=rt(i,c);let d=ut(i);if(Math.abs(h)<Math.PI/2){const x=Fe(d,u);r.push(x)}else{const x=V.fromObject(je(l,t,h/2)),E=ut(Q.fromVectors(t,V.fromObject(x))),S=Fe(d,E),g=Fe(E,u);r.push(S,x,g)}r.push(l);const v=rt(a,c);if(d=ut(a),Math.abs(v)<Math.PI/2){const x=Fe(d,u);r.push(x)}else{const x=V.fromObject(je(l,t,v/2)),E=ut(Q.fromVectors(t,V.fromObject(x))),S=Fe(u,E),g=Fe(E,d);r.push(S,x,g)}return r}function rt(e,t){return Math.atan2(e.v.y*t.v.x-e.v.x*t.v.y,e.v.x*t.v.x+e.v.y*t.v.y)}function mc(e,t,n){const o=e.x,r=e.y,i=t.x,a=t.y,s=n.x,l=n.y,c=o-i,u=r-a,h=s-i,d=l-a;if(c===0&&u===0||h===0&&d===0)return[e,0];const v=(d*(c*(o+i)+u*(r+a))-u*(h*(s+i)+d*(l+a)))/(2*c*d-2*u*h),x=(-h*(c*(o+i)+u*(r+a))+c*(h*(s+i)+d*(l+a)))/(2*c*d-2*u*h),E=Math.sqrt(Math.pow(o-v,2)+Math.pow(r-x,2));return[new V(v,x),E]}function tt(e){return e.type=="circle"?e.radius:Math.min(e.width,e.height)/2}function Pt(...e){return e.find(t=>!!t)}const bc=Number.EPSILON*100;function yc(e,t,n,o,r,i,a,s){var l,c;const u=e.edges,h=e.directions,d=u.map((g,m)=>xc(g,h[m],o[g.edgeId])),v=[];let x=!1,E=!1;{const g=d[0];let m=tt(t[g.source].shape)*r;const b=s+(a==="edgeOfNode"?m:0),y=b<=0?g.line.source:jo(g,b,n,!0);v.push(y),m=tt(t[g.target].shape)*r,s>0&&ne.distance(g.line.source,g.line.target)<=b+m&&(x=!0)}const S=u.length;for(let g=1;g<S;g++){const m=d[g-1],b=d[g],y=b.source,f=V.fromObject((l=n[y])!=null?l:{x:0,y:0}),p=wc(m,b,f),k=tt(t[y].shape)*r,T=Math.max(k*(2/3),k-4*r),C=yn(m),_=yn(b),z=kt(m,f,T,C),$=kt(b,f,T,!_),R=kt(m,f,k,C),Y=kt(b,f,k,!_);let B;if(p){const W=ne.distance(p,f);if(W<T)B=[Pt(z,R,m.line.target),p,Pt($,Y,b.line.source)];else if(W<=k){let ie,ee;R&&z?ie=ne.distance(p,z)<ne.distance(p,R)?z:R:ie=R||m.line.target,Y&&$?ee=ne.distance(p,$)<ne.distance(p,Y)?$:Y:ee=Y||b.line.source,B=[ie,p,ee]}else z&&$?B=[z,f,$]:R&&Y?B=[R,f,Y]:B=[Pt(z,R,m.line.target),f,Pt($,Y,b.line.source)]}else z&&$?B=[z,f,$]:R&&Y?B=[R,f,Y]:B=[m.line.target,f,b.line.source];if(m.curve){const W=v[v.length-1];if(W){const ie=W instanceof Array?W[W.length-1]:W;let ee;B instanceof Array?ee=i?B[0]:B[1]:ee=B;const le=bn(ie,m.curve.circle.center,ee,m.curve.theta);B instanceof Array&&i?v.push([...le,...B]):v.push([...le,ee])}}else if(m.loop){const[W,ie,ee]=Bo(f,m,k);v.push(W),v.push(ee),B instanceof Array&&i?v.push([ie,B[1],B[2]]):v.push(B[2])}else i||!(B instanceof Array)?v.push(B):b.curve?v.push(B[1]):b.loop?v.push(B[0]):v.push(B[0],B[2])}{const g=d[d.length-1];let m=tt(t[g.target].shape)*r;const b=s+(a==="edgeOfNode"?m:0),y=b<=0?g.line.target:jo(g,b,n,!1);if(m=tt(t[g.source].shape)*r,g.loop){const f=V.fromObject((c=n[g.target])!=null?c:{x:0,y:0}),[p,k,T]=Bo(f,g,m);v.push(p),v.push(T)}else if(g.curve){const f=v[v.length-1],p=f instanceof Array?f[f.length-1]:f,k=bn(p,g.curve.circle.center,y,g.curve.theta);v.push([...k,y])}else v.push(y);s>0&&ne.distance(g.line.source,g.line.target)<=b+m&&(E=!0)}return x&&(v.shift(),v[0]instanceof Array&&v.unshift(v[0][0])),E&&v.pop(),v}function No(e){const t=e.length;if(t===0)return[];if(t<=1)return[!0];const n=[];let o=null,r=!0;for(let i=0;i<t;i++){const a=e[i].edge.source,s=e[i].edge.target;if(i===0)if(t>2){const l=_r(e,0);l===null?r=!0:r=l===s}else r=[e[1].edge.source,e[1].edge.target].includes(s);else a===s?r=!0:r=o===a;n.push(r),o=r?s:a}return n}function _r(e,t){const n=e[t],o=e[t+1],r=[n.edge.source,n.edge.target].sort(),i=[o.edge.source,o.edge.target].sort();if(r[0]===r[1])return r[0];if(i[0]===i[1])return i[0];if(n.edgeId===o.edgeId||r[0]===i[0]&&r[1]===i[1]){if(t>=e.length-2)return null;{const a=_r(e,t+1);return a===null?null:a===r[1]?r[0]:r[1]}}else return i.includes(r[1])?r[1]:r[0]}function jo(e,t,n,o){const r=o?e.source:e.target,i=e.curve;if(i){let a=t/i.circle.radius;return i.theta>0&&(a*=-1),o||(a*=-1),V.fromObject(je(o?e.line.source:e.line.target,i.circle.center,a))}else{let a,s;if(o?(a=e.line.target,s=e.line.source):(a=e.line.source,s=e.line.target),n[r]){const l=Ft(a,s,V.fromObject(n[r]),t);return l===null?a:l}else return a}}function wc(e,t,n){let o=null;if(e.loop||t.loop)o=null;else if(e.curve)if(t.curve){if(e.line.target.isEqualTo(t.line.source))return e.line.target.clone();o=mt(e.curve.circle.center,e.curve.circle.radius,t.curve.circle.center,t.curve.circle.radius,e.curve.center)}else o=pc(t.line.target,t.line.source,e.curve.circle.center,e.curve.circle.radius,n);else if(t.curve)o=Ft(e.line.source,e.line.target,t.curve.circle.center,t.curve.circle.radius);else{const r=Zo(e.line),i=Zo(t.line);!isFinite(r)&&!isFinite(i)||Math.abs(r-i)<bc?o=null:o=Fe(e.line,t.line)}return o}function kt(e,t,n,o){if(e.loop){const r=mt(t,n,e.loop.center,e.loop.radius[0]);return r?o?r[0]:r[1]:null}else return e.curve?mt(t,n,e.curve.circle.center,e.curve.circle.radius,V.fromObject(e.curve.center)):Ft(o?e.line.source:e.line.target,o?e.line.target:e.line.source,t,n)}function xc(e,t,n){let o=n.origin,r=e.edge.source,i=e.edge.target,a=n.curve;const s=n.loop;s?o=n.position:t||(o=fc(o),r=e.edge.target,i=e.edge.source,a&&(a=Dt(ue({},a),{theta:-a.theta})));const l=Q.fromLinePosition(o);return{edgeId:e.edgeId,source:r,target:i,line:l,direction:t,curve:a,loop:s}}function Zo(e){return(e.target.y-e.source.y)/(e.target.x-e.source.x)}function Bo(e,t,n){const{radius:o,center:r}=X(t.loop,"Loop of edge parameter"),[i,a]=o,s=mt(e,n,r,o[0]);let[l,c]=s?s.reverse():[t.line.source,t.line.target];const u=yn(t);u||([l,c]=[c,l]);const h=l,d=c,v=V.fromObject(h).subtract(r).angleDegree();let x=(V.fromObject(d).subtract(r).angleDegree()+360-v)%360>=180;return x=u?x:!x,[h,d,`A ${i} ${a} 0 ${x?1:0} ${u?1:0} ${d.x} ${d.y}`]}function yn(e){return e.loop?e.direction?e.loop.isClockwise:!e.loop.isClockwise:!0}function an(e,t,n,o,r,i,a){const s=Ce({});U(()=>new Set(Object.keys(e.value)),(c,u)=>{u||(u=new Set([]));for(const h of c)u.has(h)||Ec(e,s,h,!1,t,r);for(const h of u)c.has(h)||(n.delete(h),o.delete(h),i==null||i(h,s[h]),delete s[h])},{immediate:!0}),U(()=>[...n],(c,u)=>{const h=u?c.filter(v=>!u.includes(v)):c,d=u?u.filter(v=>!c.includes(v)):[];h.forEach(v=>{const x=s[v];x&&!x.selected&&(x.selected=!0)}),d.forEach(v=>{const x=s[v];x&&x.selected&&(x.selected=!1)})},{immediate:!0}),U(()=>[...o],(c,u)=>{const h=c.filter(v=>!u.includes(v)),d=u.filter(v=>!c.includes(v));h.forEach(v=>{const x=s[v];x&&!x.hovered&&(x.hovered=!0)}),d.forEach(v=>{const x=s[v];x&&x.hovered&&(x.hovered=!1)})});const l=M(()=>{const c=a?a():Object.values(s);return t.zOrder.enabled?Sc(c,t.zOrder,o,n):c});return{states:s,zOrderedList:l}}function Ec(e,t,n,o,r,i){const a={id:n,selected:o,hovered:!1,selectable:M(()=>e.value[n]?I.value(r.selectable,e.value[n]):w(a.selectable)),zIndex:M(()=>e.value[n]?I.value(r.zOrder.zIndex,e.value[n]):w(a.zIndex))};t[n]=a,i(e,n,t[n])}function Sc(e,t,n,o){return t.bringToFrontOnHover&&t.bringToFrontOnSelected?e.sort((r,i)=>{const a=n.has(r.id),s=n.has(i.id);if(a!=s)return a?1:-1;const l=o.has(r.id),c=o.has(i.id);return l!=c?l?1:-1:r.zIndex-i.zIndex}):t.bringToFrontOnHover?e.sort((r,i)=>{const a=n.has(r.id),s=n.has(i.id);return a!=s?a?1:-1:r.zIndex-i.zIndex}):t.bringToFrontOnSelected?e.sort((r,i)=>{const a=o.has(r.id),s=o.has(i.id);return a!=s?a?1:-1:r.zIndex-i.zIndex}):e.sort((r,i)=>r.zIndex-i.zIndex)}function Pc(e){return typeof btoa===void 0?Buffer.from(e).toString("base64").replaceAll("=",""):btoa(e).replaceAll("=","")}function kc(){return{markers:Ce({}),referenceCount:{}}}function Oc(e){const{markers:t,referenceCount:n}=e;function o(s,l){var c;const u=(c=n[s])!=null?c:0;n[s]=u+1,u||(t[s]=l)}function r(s){var l;const c=(l=n[s])!=null?l:0;c&&(c-1===0?(delete t[s],delete n[s]):n[s]=c-1)}function i(s){s&&r(s)}function a(s,l,c,u,h){if(s.type==="none"){i(c);return}if(s.type==="custom")return i(c),s.customId;const d=Tc(s,l,u),v=Mc(d,h);return v===c||(i(c),o(v,d)),v}return{makeMarker:a,clearMarker:i}}function Tc(e,t,n){var o;return Dt(ue({},e),{color:(o=e.color)!=null?o:n,isSource:t})}function Mc(e,t){const n=Pc(e.color),o=e.isSource?"L":"R",r=e.units==="strokeWidth"?"rel":"abs";return`marker_${t}_${e.type}_${e.width}_${e.height}_${e.margin}_${e.offset}_${n}_${o}_${r}`}function sn(e,t,n){return{objects:e,selected:t,hovered:n}}const Cr=Symbol("states"),_c={type:"none",width:0,height:0,margin:0,offset:0,units:"strokeWidth",color:null};function Cc(e,t,n,o,r,i,a){const s=Ce({}),l=Le({});ye(()=>{const b=Object.fromEntries(Object.keys(e.objects.value).map(y=>[y,{}]));Object.entries(t.objects.value).forEach(([y,f])=>{b!=null&&b[f.source]||(b[f.source]={}),b!=null&&b[f.target]||(b[f.target]={}),b[f.source][y]=f.target,b[f.target][y]=f.source}),Tt(l,b)});const{states:c,zOrderedList:u}=an(e.objects,o.node,e.selected,e.hovered,(b,y,f)=>{Ac(b,y,f,o.node,l,r)},(b,y)=>{const f=r.nodes;delete f[b]}),h=oc(),d=ic(e.objects,t.objects,o),v=Z([]),{states:x,zOrderedList:E}=an(t.objects,o.edge,t.selected,t.hovered,(b,y,f)=>{Lc(b,y,f,o.edge,i,c,d,r,a,h)},(b,y)=>{var f;(f=y.stopWatchHandle)==null||f.call(y)},()=>v.value);ye(()=>{v.value=Nc(d.edgeGroups,x)}),U(d.edgeGroups,b=>Bc(s,d,o),{immediate:!0});const{states:S,zOrderedList:g}=an(n.objects,o.path,n.selected,n.hovered,(b,y,f)=>{const p=f;p.clickable=M(()=>b.value[y]?I.value(o.path.clickable,b.value[y]):!1),p.hoverable=M(()=>b.value[y]?I.value(o.path.hoverable,b.value[y]):!1),p.path=b.value[y],p.edges=Ro(p.path,t),p.directions=No(p.edges),p.stopWatchHandle=U(()=>b.value[y].edges,()=>{p.edges=Ro(p.path,t),p.directions=No(p.edges)})},(b,y)=>{var f;(f=y.stopWatchHandle)==null||f.call(y)}),m={nodeStates:c,edgeStates:x,edgeGroupStates:d,summarizedEdgeStates:s,pathStates:S,layouts:r,nodeZOrderedList:u,edgeZOrderedList:E,pathZOrderedList:g};return Re(Cr,m),m}function zc(e){return e.summarized}function Te(){return X(We(Cr),"states")}function Ic(e,t,n,o){return n&&o.hover?I.values(o.hover,e):zr(e,t,o)}function zr(e,t,n){return t&&n.selected?I.values(n.selected,e):I.values(n.normal,e)}function Ac(e,t,n,o,r,i){n.shape=M(()=>e.value[t]?Ic(e.value[t],n.selected,n.hovered,o):w(n.shape)),n.staticShape=M(()=>e.value[t]?zr(e.value[t],n.selected,o):w(n.staticShape)),n.label=M(()=>e.value[t]?I.values(o.label,e.value[t]):w(n.label)),n.labelText=M(()=>{var a,s;return o.label.text instanceof Function?w(n.label).text:e.value[t]?(s=(a=e.value[t])==null?void 0:a[w(n.label).text])!=null?s:"":w(n.labelText)}),n.draggable=M(()=>e.value[t]?I.value(o.draggable,e.value[t]):w(n.draggable)),n.oppositeNodeIds=Me(r,t),n.oppositeNodes=M(()=>Object.entries(n.oppositeNodeIds).reduce((a,s)=>{const[l,c]=s,u=i.nodes[c];return u&&(a[l]={nodeId:c,pos:ue({},u)}),a},{}))}function $c(e,t,n,o){return t?I.values(o.selected,e):n&&o.hover?I.values(o.hover,e):I.values(o.normal,e)}function Do(e){return e.type==="none"?_c:e}function Lc(e,t,n,o,r,i,a,s,l,c){const{makeMarker:u,clearMarker:h}=Oc(r);Object.assign(n,{origin:{p1:{x:0,y:0},p2:{x:0,y:0}},labelPosition:{p1:{x:0,y:0},p2:{x:0,y:0}},position:{p1:{x:0,y:0},p2:{x:0,y:0}}}),n.label=M(()=>e.value[t]?I.values(o.label,e.value[t]):w(n.label));const d=M(()=>{const g=e.value[t],m=$c(g,n.selected,n.hovered,o);isNaN(+m.width)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",t,m.width),m.width=1),(m.color===void 0||m.color===null)&&(console.warn("[v-network-graph] Edge color is invalid value. id=[%s] value=[%s]",t,m.color),m.color="#000000");let b=I.value(o.normal.width,g);isNaN(+b)&&(b=1);const y=Do(I.values(o.marker.source,[g,m])),f=Do(I.values(o.marker.target,[g,m]));return{stroke:m,normalWidth:b,source:y,target:f}});n.line=d;const v=Me(a.edgeLayoutPoints,t),x=Me(a.summarizedEdges,t),E=ye(()=>{var g,m,b,y,f,p,k;const T=e.value[t];if(!T)return;const C=(g=i[T.source])==null?void 0:g.staticShape,_=(m=i[T.target])==null?void 0:m.staticShape;if(!C||!_)return;const z=(b=s.nodes[T==null?void 0:T.source])!=null?b:{x:0,y:0},$=(y=s.nodes[T==null?void 0:T.target])!=null?y:{x:0,y:0},R=ac(v.value,(f=x.value)!=null?f:!1,z,$,l.value,o.keepOrder),[Y,B]=gc(z,$,C,_),W=l.value;n.labelPosition=gn(R,Y*W,B*W);let ie=0,ee=0;const le=d.value;if(le.source.type!=="none"){const de=le.source;ie=de.margin+de.width,de.units==="strokeWidth"&&(ie*=le.normalWidth)}if(le.target.type!=="none"){const de=le.target;ee=de.margin+de.width,de.units==="strokeWidth"&&(ee*=le.normalWidth)}o.margin&&(ie+=o.margin,ee+=o.margin);const Ve=!!o.margin||le.source.type!=="none"||le.target.type!=="none";if(T.source===T.target){n.origin=$t(z,$);const de=I.values(o.selfLoop,T),[Qe,et]=Zc(z,C,de,Ve,ie,ee,(k=(p=v.value)==null?void 0:p.pointInGroup)!=null?k:0,W);n.position=Qe,n.loop=et,n.curve=void 0;return}else n.loop=void 0;if(Ve&&(ie+=Y,ee+=B),o.type==="straight"||x.value)n.origin=R,n.curve=void 0,ie===0&&ee===0?n.position=n.origin:n.position=gn(n.origin,ie*W,ee*W);else{n.origin=$t(z,$);const de=v.value?v.value.groupWidth/2-v.value.pointInGroup:0,[Qe,et]=jc(n.origin,R,de,ie*W,ee*W);n.position=Qe,n.curve=et}}),S=ye(()=>{e.value[t]&&(n.sourceMarkerId=u(d.value.source,!0,n.sourceMarkerId,d.value.stroke.color,c),n.targetMarkerId=u(d.value.target,!1,n.targetMarkerId,d.value.stroke.color,c))});n.stopWatchHandle=()=>{E(),S(),h(n.sourceMarkerId),h(n.targetMarkerId)}}function Nc(e,t){return Object.entries(e).map(([n,o])=>{var r;return o.summarize?{id:(r=Object.keys(o.edges)[0])!=null?r:n,summarized:!0,key:n,group:o,zIndex:Object.keys(o.edges).map(i=>{var a,s;return(s=(a=t[i])==null?void 0:a.zIndex)!=null?s:0}).reduce((i,a)=>Math.max(i,a))}:Object.entries(o.edges).map(([i,a])=>{var s,l;return{id:i,summarized:!1,key:i,edge:a,zIndex:(l=(s=t[i])==null?void 0:s.zIndex)!=null?l:0}})}).flat()}function jc(e,t,n,o,r){const i=Q.fromLinePosition(e),a=Q.fromLinePosition(t),s=vc(t),[l,c]=mc(i.source,i.target,s);let u,h;if(c===0)return[e,h];if(n===0)return o===0&&r===0?u=e:u=gn(e,o,r),[u,h];const d=Q.fromVectors(l,s),v=rt(Q.fromVectors(l,i.source),d);if(o===0&&r===0)u=e;else{let g=o/c,m=r/c;v>0&&(g*=-1,m*=-1),u=$t(je(i.source,l,g),je(i.target,l,-m));let b=rt(Q.fromVectors(l,i.source),Q.fromVectors(l,i.target)),y=rt(Q.fromPositions(l,u.p1),Q.fromPositions(l,u.p2));if(v*b<0&&(b=mn(b),v*y<0&&(y=mn(y))),b*y<0){const f=s.clone().add(a.v.normalize().multiplyScalar(.5));return u=$t(s,f),[u,h]}}const[x,E]=dc(u),S=bn(x,l,E,v).map(g=>g.toObject());return h={center:s,theta:v,circle:{center:l,radius:c},control:S},[u,h]}function Zc(e,t,n,o,r,i,a,s){const l=s,c=(n.radius+a/2)*l,u=n.offset*l+c,h=(n.angle-90)*(Math.PI/180),d=V.fromObject({x:e.x+u*Math.cos(h),y:e.y+u*Math.sin(h)}),v=n.isClockwise;let x,E;if(o){const m=mt(d,c,V.fromObject(e),tt(t)*l);if(m){[x,E]=m;let b=1;if(v||([x,E]=[E,x],b=-1),r!==0||i!==0){const y=r*l/c*b,f=i*l/c*b;x=je(x,d,y),E=je(E,d,-f)}}}if(x===void 0||E===void 0){const m=V.fromObject(e).subtract(d).normalize().multiplyScalar(c);let b=1*(Math.PI/180);v||(b*=-1),x=d.clone().add(At(m,b)),E=d.clone().add(At(m,-b))}const S=V.fromObject(x).subtract(d).angleDegree(),g=(V.fromObject(E).subtract(d).angleDegree()+360-S)%360>=180;return[{p1:x,p2:E},{center:d,radius:[c,c],isLargeArc:v?g:!g,isClockwise:v}]}function Bc(e,t,n){const o=t.edgeGroups;Object.entries(o).filter(([r,i])=>i.summarize&&!(r in e)).forEach(([r,i])=>{const a={stroke:void 0};a.stroke=M(()=>I.values(n.edge.summarized.stroke,i.edges)),e[r]=a}),Object.keys(e).forEach(r=>{var i;(i=t.edgeGroups[r])!=null&&i.summarize||delete e[r]})}function Ro(e,t){return e.edges.map(n=>({edgeId:n,edge:t.objects.value[n]})).filter(n=>n.edge)}class vt{static valueOf(t){return Array.from(t.values())}}const Dc=3,Rc=6,Ir=500;function Mt(e){return e==="touch"?Rc:Dc}function Dn(e,t,n,o){let r=e.get(t);if(r)r.id!==n&&(r=void 0);else{const s=Array.from(e.entries()).find(([l,c])=>c.id===n);if(s){const[l,c]=s;e.delete(l),r=c}}let i,a;return[r,i,a]=Ar(r,o,n),e.set(t,r),[i,a]}function Ar(e,t,n){const o=Date.now();e&&o-e.lastTime<=Ir?(e.count++,e.lastTime=o):e={count:1,lastTime:o,id:n};const r={view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,button:t.button,buttons:t.buttons,detail:e.count};let i,a;return t instanceof PointerEvent?(Object.assign(r,{pointerId:t.pointerId,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,pointerType:t.pointerType,isPrimary:t.isPrimary}),i=new PointerEvent("click",r),e.count===2&&(a=new PointerEvent("dblclick",r))):(i=new MouseEvent("click",r),e.count===2&&(a=new MouseEvent("dblclick",r))),[e,i,a]}function Rn(e){const t=Date.now();Array.from(e.entries()).filter(([n,o])=>t-o.lastTime>Ir).map(([n,o])=>e.delete(n))}function Wc(e,t,n,o,r,i,a){const s={pointers:new Map,follow:{followedPointerId:-1,nodeBasePositions:{}},hoveredNodesPre:new Set,clicks:new Map},l={pointermove:v,pointerup:E,pointercancel:x};function c(y){const f=s.follow.followedPointerId===y.pointerId,p=r.has(y.nodeId),k=!(y.pointerId in s.pointers);if(f&&k||f&&!p){const T=vt.valueOf(s.pointers).find(C=>r.has(C.nodeId));if(!T){s.follow={followedPointerId:-1,nodeBasePositions:{}};return}y=T,s.follow.followedPointerId=y.pointerId}else{const T=s.pointers.get(s.follow.followedPointerId);if(!T){s.follow={followedPointerId:-1,nodeBasePositions:{}};return}y=T}if(f||p){const T=vt.valueOf(s.pointers).map(C=>C.nodeId);s.follow.nodeBasePositions=Object.fromEntries(Array.from(r).filter(C=>!T.includes(C)).filter(C=>{var _;return(_=e[C])==null?void 0:_.draggable}).map(C=>[C,ln(t.nodes,C)])),y.dragBasePosition=ue({},y.latestPosition),y.nodeBasePosition=ln(t.nodes,y.nodeId)}}U(r,y=>{const f=s.pointers.get(s.follow.followedPointerId);f&&c(f),y.size>0&&n.selectionMode.value!=="node"?n.selectionMode.value="node":y.size===0&&n.selectionMode.value==="node"&&(n.selectionMode.value="container")}),U(n.selectionMode,y=>{y!=="node"&&r.clear()});function u(y,f){const p=y.dragBasePosition.x-f.pageX,k=y.dragBasePosition.y-f.pageY,T=s.follow.followedPointerId==y.pointerId?ue({[y.nodeId]:y.nodeBasePosition},s.follow.nodeBasePositions):{[y.nodeId]:y.nodeBasePosition},C=i.value;return Object.fromEntries(Object.entries(T).map(([_,z])=>[_,{x:z.x-p/C,y:z.y-k/C}]))}function h(y,f){var p,k;if(f.isTrusted||f.shiftKey&&!["container","node"].includes(n.selectionMode.value))return;n.selectionMode.value="node";const T=(k=(p=e[y])==null?void 0:p.selectable)!=null?k:!1;if(T){const C=vt.valueOf(s.pointers).filter(_=>r.has(_.nodeId)).length>0;f.shiftKey||C?r.has(y)?r.delete(y):typeof T=="number"&&r.size>=T||r.add(y):r.has(y)||(r.clear(),r.add(y))}a.emit("node:click",{node:y,event:f})}function d(y,f){f.isTrusted||a.emit("node:dblclick",{node:y,event:f})}function v(y){var f;y.stopPropagation();const p=s.pointers.get(y.pointerId);if(!p)return;p.latestPosition={x:y.pageX,y:y.pageY},p.moveCounter++;const k=Mt(y.pointerType);if(p.moveCounter<=k||!((f=e[p.nodeId])!=null&&f.draggable))return;if(p.moveCounter===k+1){const C=u(p,{pointerId:p.pointerId,pageX:p.dragBasePosition.x,pageY:p.dragBasePosition.y});a.emit("node:dragstart",C)}const T=u(p,y);a.emit("node:pointermove",T)}function x(y){y.stopPropagation();let f=s.pointers.get(y.pointerId);if(f){for(f of s.pointers.values()){const p=f.nodeId,k=Mt(y.pointerType);if(f.moveCounter>k){const T=u(f,{pointerId:f.pointerId,pageX:f.latestPosition.x,pageY:f.latestPosition.y});a.emit("node:dragend",T)}a.emit("node:pointerup",{node:p,event:y})}s.pointers.clear(),s.follow={followedPointerId:-1,nodeBasePositions:{}},ge(l).forEach(([p,k])=>{document.removeEventListener(p,k)}),n.viewMode.value="default"}}function E(y){var f,p,k;y.stopPropagation();const T=s.pointers.get(y.pointerId);if(!T)return;s.pointers.delete(y.pointerId);const C=T.nodeId,_=Mt(y.pointerType),z=T.moveCounter>_;if(z){if((f=e[T.nodeId])!=null&&f.draggable){const $=u(T,y);a.emit("node:dragend",$),a.emit("node:pointerup",{node:C,event:y})}}else a.emit("node:pointerup",{node:C,event:y});if(!z){const[$,R]=Dn(s.clicks,T.pointerId,C,y);(p=T.eventTarget)==null||p.dispatchEvent($),R&&((k=T.eventTarget)==null||k.dispatchEvent(R))}s.pointers.size===0?(s.follow={followedPointerId:-1,nodeBasePositions:{}},ge(l).forEach(([$,R])=>{document.removeEventListener($,R)}),Rn(s.clicks),n.viewMode.value="default"):c(T),o.clear(),s.hoveredNodesPre.forEach(o.add,o)}function S(y,f){if(f.button==2||(f.stopPropagation(),!["default","node"].includes(n.viewMode.value)))return;s.pointers.size==0&&(n.viewMode.value="node",ge(l).forEach(([k,T])=>{document.addEventListener(k,T)}));const p={pointerId:f.pointerId,nodeId:y,moveCounter:0,nodeBasePosition:ln(t.nodes,y),dragBasePosition:{x:f.pageX,y:f.pageY},latestPosition:{x:f.pageX,y:f.pageY},eventTarget:f.currentTarget};s.pointers.set(f.pointerId,p),r.has(y)&&(s.follow.followedPointerId<0?(s.follow.followedPointerId=f.pointerId,c(p)):delete s.follow.nodeBasePositions[p.nodeId]),a.emit("node:pointerdown",{node:y,event:f})}function g(y,f){s.hoveredNodesPre.add(y),!(s.pointers.size>0)&&(o.add(y),a.emit("node:pointerover",{node:y,event:f}))}function m(y,f){s.hoveredNodesPre.delete(y),!(s.pointers.size>0)&&(o.delete(y),a.emit("node:pointerout",{node:y,event:f}))}function b(y,f){f.stopPropagation(),a.emit("node:contextmenu",{node:y,event:f})}return{handleNodePointerDownEvent:S,handleNodePointerOverEvent:g,handleNodePointerOutEvent:m,handleNodeClickEvent:h,handleNodeDoubleClickEvent:d,handleNodeContextMenu:b}}function ln(e,t){var n;const o=(n=e[t])!=null?n:{x:0,y:0};return ue({},o)}function Vc(e,t,n,o,r){const i={pointers:new Map,pointerPeekCount:0,clicks:new Map},a={pointerup:l,pointercancel:c};U(o,f=>{f.size>0&&t.selectionMode.value!=="edge"?t.selectionMode.value="edge":f.size===0&&t.selectionMode.value==="edge"&&(t.selectionMode.value="container")}),U(t.selectionMode,f=>{f!=="edge"&&o.clear()});function s(f,p){if(p.button==2||(p.stopPropagation(),!["default","edge"].includes(t.viewMode.value)))return;i.pointers.size==0&&(t.viewMode.value="edge",ge(a).forEach(([T,C])=>{document.addEventListener(T,C)}),i.pointerPeekCount=0),i.pointerPeekCount++;const k={pointerId:p.pointerId,id:f,eventTarget:p.currentTarget};i.pointers.set(p.pointerId,k),r.emit("edge:pointerdown",xe(f,p))}function l(f){var p,k;f.stopPropagation();const T=i.pointers.get(f.pointerId);if(!T)return;i.pointers.delete(f.pointerId);const C=T.id;r.emit("edge:pointerup",xe(C,f));const[_,z]=Dn(i.clicks,T.pointerId,C instanceof Array?C.join(","):C,f);(p=T.eventTarget)==null||p.dispatchEvent(_),z&&((k=T.eventTarget)==null||k.dispatchEvent(z)),i.pointers.size===0&&(i.pointerPeekCount=0,ge(a).forEach(([$,R])=>{document.removeEventListener($,R)}),Rn(i.clicks),t.viewMode.value="default")}function c(f){if(f.stopPropagation(),!!i.pointers.get(f.pointerId)){for(const p of i.pointers.values()){const k=p.id;r.emit("edge:pointerup",xe(k,f))}i.pointers.clear(),i.pointerPeekCount=0,ge(a).forEach(([p,k])=>{document.removeEventListener(p,k)}),r.emit("view:mode","default")}}function u(f,p){var k;if(p.isTrusted||p.shiftKey&&!["container","edge"].includes(t.selectionMode.value))return;t.selectionMode.value="edge";const T=f instanceof Array?f:[f],C=vt.valueOf(i.pointers).filter(_=>(_.id instanceof Array?_.id:[_.id]).every(z=>o.has(z))).length>0;if(f instanceof Array)T.find(_=>{var z;return(z=e[_])==null?void 0:z.selectable})&&(p.shiftKey||C?T.some(_=>o.has(_))?T.forEach(_=>o.delete(_)):T.forEach(_=>{var z;const $=(z=e[_])==null?void 0:z.selectable;typeof $=="number"&&o.size>=$||o.add(_)}):(o.clear(),T.forEach(_=>o.add(_))));else{const _=(k=e[f])==null?void 0:k.selectable;_&&(p.shiftKey||C?o.has(f)?o.delete(f):typeof _=="number"&&o.size>=_||o.add(f):o.has(f)||(o.clear(),o.add(f)))}r.emit("edge:click",xe(f,p))}function h(f,p){p.isTrusted||r.emit("edge:dblclick",xe(f,p))}function d(f,p){n.add(f),r.emit("edge:pointerover",xe(f,p))}function v(f,p){n.delete(f),r.emit("edge:pointerout",xe(f,p))}function x(f,p){p.stopPropagation(),r.emit("edge:contextmenu",xe(f,p))}function E(f,p){if(p.button==2||(p.stopPropagation(),!["default","edge"].includes(t.viewMode.value)))return;i.pointers.size==0&&(t.viewMode.value="edge",ge(a).forEach(([T,C])=>{document.addEventListener(T,C)}),i.pointerPeekCount=0),i.pointerPeekCount++;const k={pointerId:p.pointerId,id:f,eventTarget:p.currentTarget};i.pointers.set(p.pointerId,k),r.emit("edge:pointerdown",xe(f,p))}function S(f,p){f.forEach(k=>n.add(k)),r.emit("edge:pointerover",xe(f,p))}function g(f,p){f.forEach(k=>n.delete(k)),r.emit("edge:pointerout",xe(f,p))}function m(f,p){u(f,p)}function b(f,p){h(f,p)}function y(f,p){p.stopPropagation(),r.emit("edge:contextmenu",xe(f,p))}return{handleEdgePointerDownEvent:s,handleEdgePointerOverEvent:d,handleEdgePointerOutEvent:v,handleEdgeClickEvent:u,handleEdgeDoubleClickEvent:h,handleEdgeContextMenu:x,handleEdgesPointerDownEvent:E,handleEdgesPointerOverEvent:S,handleEdgesPointerOutEvent:g,handleEdgesClickEvent:m,handleEdgesDoubleClickEvent:b,handleEdgesContextMenu:y}}function xe(e,t){return e instanceof Array?{edges:e,event:t,summarized:!0}:{edge:e,edges:[e],event:t,summarized:!1}}function Hc(e,t,n,o){const r={moveCounter:0,pointerCounter:0,clickState:void 0},i={pointermove:s,pointerup:l,pointercancel:l};function a(v){r.moveCounter=0,r.pointerCounter===0&&ge(i).forEach(([x,E])=>{document.addEventListener(x,E,{passive:!0})}),r.pointerCounter++}function s(v){r.moveCounter++}function l(v){if(r.pointerCounter--,r.pointerCounter<=0){r.pointerCounter=0,ge(i).forEach(([E,S])=>{document.removeEventListener(E,S)});const x=Mt(v.pointerType);if(r.moveCounter<=x){if(v.shiftKey&&t.selectionMode.value!=="container")return;t.selectionMode.value="container";const[E,S,g]=Ar(r.clickState,v,"view");r.clickState=E,e.value.dispatchEvent(S),g&&e.value.dispatchEvent(g)}}}function c(v){v.isTrusted||(v.stopPropagation(),o.emit("view:click",{event:v}))}function u(v){v.isTrusted||(v.stopPropagation(),o.emit("view:dblclick",{event:v}))}function h(v){o.emit("view:contextmenu",{event:v}),r.pointerCounter>0&&(r.pointerCounter=0,ge(i).forEach(([x,E])=>{var S;(S=e.value)==null||S.removeEventListener(x,E)}))}const d=v=>{v.preventDefault()};it(()=>{const v=e.value;v&&(v.addEventListener("pointerdown",a,{passive:!0}),v.addEventListener("click",c,{passive:!1}),v.addEventListener("dblclick",u,{passive:!1}),v.addEventListener("contextmenu",h,{passive:!1}),n.value&&v.addEventListener("wheel",d,{passive:!1}))}),bt(()=>{const v=e.value;v&&(v.removeEventListener("pointerdown",a),v.removeEventListener("click",c),v.removeEventListener("dblclick",u),v.removeEventListener("contextmenu",h),n.value&&v.removeEventListener("wheel",d))}),U(n,(v,x)=>{const E=e.value;!E||v===x||(v?E.addEventListener("wheel",d,{passive:!1}):E.removeEventListener("wheel",d))})}function Fc(e,t,n,o,r,i){const a={pointers:new Map,pointerPeekCount:0,clicks:new Map};function s(g,m){var b,y;return r.value?{path:(y=(b=e[g])==null?void 0:b.path)!=null?y:g,event:m}:{path:g,event:m}}const l={pointerup:u,pointercancel:h};U(o,g=>{g.size>0&&t.selectionMode.value!=="path"?t.selectionMode.value="path":g.size===0&&t.selectionMode.value==="path"&&(t.selectionMode.value="container")}),U(t.selectionMode,g=>{g!=="path"&&o.clear()});function c(g,m){var b;if(!((b=e[g])!=null&&b.clickable)||m.button==2||(m.stopPropagation(),!["default","path"].includes(t.viewMode.value)))return;a.pointers.size==0&&(t.viewMode.value="path",ge(l).forEach(([f,p])=>{document.addEventListener(f,p)}),a.pointerPeekCount=0),a.pointerPeekCount++;const y={pointerId:m.pointerId,id:g,eventTarget:m.currentTarget};a.pointers.set(m.pointerId,y),i.emit("path:pointerdown",s(g,m))}function u(g){var m,b;const y=a.pointers.get(g.pointerId);if(!y)return;g.stopPropagation(),a.pointers.delete(g.pointerId);const f=y.id;i.emit("path:pointerup",s(f,g));const[p,k]=Dn(a.clicks,y.pointerId,f,g);(m=y.eventTarget)==null||m.dispatchEvent(p),k&&((b=y.eventTarget)==null||b.dispatchEvent(k)),a.pointers.size===0&&(a.pointerPeekCount=0,ge(l).forEach(([T,C])=>{document.removeEventListener(T,C)}),Rn(a.clicks),t.viewMode.value="default")}function h(g){if(a.pointers.get(g.pointerId)){g.stopPropagation();for(const m of a.pointers.values()){const b=m.id;i.emit("path:pointerup",s(b,g))}a.pointers.clear(),a.pointerPeekCount=0,ge(l).forEach(([m,b])=>{document.removeEventListener(m,b)}),i.emit("view:mode","default")}}function d(g,m){var b;(b=e[g])!=null&&b.hoverable&&(n.add(g),i.emit("path:pointerover",s(g,m)))}function v(g,m){var b;(b=e[g])!=null&&b.hoverable&&(n.delete(g),i.emit("path:pointerout",s(g,m)))}function x(g,m){var b,y,f;if(m.isTrusted||!((b=e[g])!=null&&b.clickable)||m.shiftKey&&!["container","path"].includes(t.selectionMode.value))return;t.selectionMode.value="path";const p=(f=(y=e[g])==null?void 0:y.selectable)!=null?f:!1;if(p){const k=vt.valueOf(a.pointers).filter(T=>o.has(T.id)).length>0;m.shiftKey||k?o.has(g)?o.delete(g):typeof p=="number"&&o.size>=p||o.add(g):o.has(g)||(o.clear(),o.add(g))}i.emit("path:click",s(g,m))}function E(g,m){var b;m.isTrusted||(b=e[g])!=null&&b.clickable&&i.emit("path:dblclick",s(g,m))}function S(g,m){var b;(b=e[g])!=null&&b.clickable&&(m.stopPropagation(),i.emit("path:contextmenu",s(g,m)))}return{handlePathPointerDownEvent:c,handlePathPointerOverEvent:d,handlePathPointerOutEvent:v,handlePathClickEvent:x,handlePathDoubleClickEvent:E,handlePathContextMenu:S}}function Uc(e){return Pe(this,null,function*(){const t=yield(yield fetch(e)).blob();return new Promise((n,o)=>{try{const r=new FileReader;r.onload=function(){n(this.result)},r.readAsDataURL(t)}catch(r){o(r)}})})}function wn(e,t,n){var o;const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const i=r.matrixTransform((o=t.getCTM())==null?void 0:o.inverse());return{x:i.x,y:i.y}}function Gc(e,t,n){const o=e.createSVGPoint();o.x=n.x,o.y=n.y;const r=o.matrixTransform(t.getCTM());return{x:r.x,y:r.y}}function $r(e,t,n){var o;const r=e.cloneNode(!0),i=t.getBBox(),a=1/n,s={x:Math.floor((i.x-10)*a),y:Math.floor((i.y-10)*a),width:Math.ceil((i.width+20)*a),height:Math.ceil((i.height+20)*a)};r.setAttribute("width",s.width.toString()),r.setAttribute("height",s.height.toString());const l=r.querySelector(".v-ng-viewport");l.setAttribute("transform",`translate(${-s.x} ${-s.y}), scale(${a})`),l.removeAttribute("style"),r.setAttribute("viewBox",`0 0 ${s.width} ${s.height}`),r.removeAttribute("style");const c=document.createNodeIterator(r,NodeFilter.SHOW_COMMENT);for(;c.nextNode();){const u=c.referenceNode;(o=u.parentNode)==null||o.removeChild(u)}return r}function qc(e){return Pe(this,null,function*(){let t=!1,n=e.getAttribute("href");if(n||(t=!0,n=e.getAttribute("xlink:href")),!(!n||n.startsWith("data:")))try{const o=yield Uc(n);e.setAttribute(t?"xlink:href":"href",o)}catch{console.warn("Image download failed.",n);return}})}function Xc(e,t,n){return Pe(this,arguments,function*(o,r,i,a={}){const s=$r(o,r,i);if(a.embedImages){const l=Array.from(s.querySelectorAll("image")).map(c=>qc(c));yield Promise.all(l)}return s})}function Yc(e,t,n,o,r,i){const a=M(()=>!!i.node.selectable&&i.view.boxSelectionEnabled),s=M(()=>t.viewMode.value==="box-selection"),l=Z(),c=Z(),u={pointers:new Set,points:new Map,startPoint:null,selectedNodesAtSelectStarted:new Set,selectionType:"append",options:{stopTrigger:"pointerup",selectionType:"append",selectionTypeWithShiftKey:"same"}},h=Tu(()=>{Kc(X(e.value,"container"),X(l.value,"viewport"),c,n.nodes,o,r,u.selectedNodesAtSelectStarted,u.selectionType)},50,{maxWait:100}),d=new Jc(e,x,E,S,v,g);function v(p){if(u.options.stopTrigger!=="click"||u.pointers.size>0)return;const k={x:p.offsetX,y:p.offsetY};u.startPoint&&V.fromObject(u.startPoint).distance(k)>10||f()}function x(p){p.stopPropagation();const k={x:p.offsetX,y:p.offsetY};u.pointers.size===0&&(u.startPoint=k,d.activate(),u.selectedNodesAtSelectStarted.clear(),r.forEach(T=>u.selectedNodesAtSelectStarted.add(T)),u.options.selectionTypeWithShiftKey==="same"?u.selectionType=u.options.selectionType:u.selectionType=p.shiftKey?u.options.selectionTypeWithShiftKey:u.options.selectionType),u.pointers.has(p.pointerId)||u.pointers.add(p.pointerId),u.points.set(p.pointerId,k),m()}function E(p){if(u.pointers.delete(p.pointerId),u.pointers.size===1){const k=X(e.value).getBoundingClientRect(),T={x:p.x-k.x,y:p.y-k.y};u.startPoint=T}else u.pointers.size===0&&(d.deactivate(),u.options.stopTrigger==="pointerup"&&f(),u.selectedNodesAtSelectStarted.clear());m()}function S(p){const k=X(e.value).getBoundingClientRect(),T={x:p.x-k.x,y:p.y-k.y};u.points.set(p.pointerId,T),m(),h()}function g(p){p.key==="Escape"&&u.options.stopTrigger!=="manual"&&(p.stopPropagation(),f())}function m(){let p,k;const T=Array.from(u.pointers);if(T.length>=2){const C=T[0],_=T[T.length-1];p=u.points.get(C),k=u.points.get(_)}else if(u.startPoint&&T.length===1){const C=T[0];p=u.startPoint,k=u.points.get(C)}else p=void 0,k=void 0;p&&k?(c.value={pos:{x:Math.min(p.x,k.x),y:Math.min(p.y,k.y)},size:{width:Math.abs(k.x-p.x),height:Math.abs(k.y-p.y)}},c.value.size.width===0&&(c.value.size.width=1),c.value.size.height===0&&(c.value.size.height=1)):c.value&&(c.value=void 0)}const b=new Qc(e,p=>{a.value&&i.view.selection.detector(p)&&(y({stop:"manual",type:"append",withShiftKey:"invert"}),b.activate())},p=>{a.value&&i.view.selection.detector(p)&&(u.pointers.size===0?f():u.options.stopTrigger="pointerup",b.deactivate())});U(a,p=>{p?b.register():b.unregister()}),it(()=>{var p;l.value=(p=e.value)==null?void 0:p.querySelector(".v-ng-viewport"),a.value&&b.register()}),bt(()=>{f(),a.value&&b.unregister()});function y(p={}){var k,T,C;u.options={stopTrigger:(k=p.stop)!=null?k:"pointerup",selectionType:(T=p.type)!=null?T:"append",selectionTypeWithShiftKey:(C=p.withShiftKey)!=null?C:"same"},t.viewMode.value!=="box-selection"&&(t.viewMode.value="box-selection",u.pointers.clear(),d.register())}function f(){t.viewMode.value==="box-selection"&&(t.viewMode.value="default",d.unregister())}return{isBoxSelectionMode:s,selectionBox:c,startBoxSelection:y,stopBoxSelection:f}}function Kc(e,t,n,o,r,i,a,s){if(!n.value)return;const l=n.value,c=wn(e,t,l.pos),u=wn(e,t,{x:l.pos.x+l.size.width,y:l.pos.y+l.size.height}),h=new Set(Object.entries(o).filter(([d,v])=>c.x<=v.x&&v.x<=u.x&&c.y<=v.y&&v.y<=u.y).map(([d,v])=>d));if(s==="append")i.forEach(d=>{h.has(d)||i.delete(d)}),h.forEach(d=>{var v,x;const E=(x=(v=r[d])==null?void 0:v.selectable)!=null?x:!1;(E===!0||typeof E=="number"&&i.size<E)&&i.add(d)});else{const d=new Set(a);d.forEach(v=>{h.has(v)&&d.delete(v)}),h.forEach(v=>{var x,E;if(!a.has(v)){const S=(E=(x=r[v])==null?void 0:x.selectable)!=null?E:!1;(S===!0||typeof S=="number"&&d.size<S)&&d.add(v)}}),i.clear(),d.forEach(v=>i.add(v))}}class Jc{constructor(t,n,o,r,i,a){this._container=t,this._handlePointerDownEvent=n,this._handlePointerUpEvent=o,this._handlePointerMoveEvent=r,this._handleClickEvent=i,this._handleKeyDownEvent=a,this._ignoreEvent=s=>s.stopPropagation()}register(){const t={capture:!0,passive:!1},n=X(this._container.value,"container");n.addEventListener("pointerdown",this._handlePointerDownEvent,t),n.addEventListener("click",this._handleClickEvent,t),n.addEventListener("pointerenter",this._ignoreEvent,t),n.addEventListener("pointerleave",this._ignoreEvent,t),document.addEventListener("keydown",this._handleKeyDownEvent,t)}activate(){const t={capture:!0,passive:!1};document.addEventListener("pointermove",this._handlePointerMoveEvent,t),document.addEventListener("pointerup",this._handlePointerUpEvent,t)}deactivate(){const t={capture:!0};document.removeEventListener("pointermove",this._handlePointerMoveEvent,t),document.removeEventListener("pointerup",this._handlePointerUpEvent,t)}unregister(){this.deactivate();const t={capture:!0};if(this._container.value){const n=this._container.value;n.removeEventListener("pointerdown",this._handlePointerDownEvent,t),n.removeEventListener("click",this._handleClickEvent,t),n.removeEventListener("pointerenter",this._ignoreEvent,t),n.removeEventListener("pointerleave",this._ignoreEvent,t),document.removeEventListener("keydown",this._handleKeyDownEvent,t)}}}class Qc{constructor(t,n,o){this._container=t,this._handleKeyDownEvent=n,this._handleKeyUpEvent=o,this._preventDefault=r=>{r.stopPropagation(),r.preventDefault()}}register(){document.addEventListener("keydown",this._handleKeyDownEvent,{capture:!0,passive:!0})}activate(){document.addEventListener("keyup",this._handleKeyUpEvent,{capture:!0,passive:!0}),X(this._container.value,"container").addEventListener("contextmenu",this._preventDefault,{passive:!1})}deactivate(){document.removeEventListener("keyup",this._handleKeyUpEvent,{capture:!0}),this._container.value&&this._container.value.removeEventListener("contextmenu",this._preventDefault)}unregister(){this.deactivate(),document.removeEventListener("keydown",this._handleKeyDownEvent,{capture:!0})}}const Lr=Symbol("mouseEventHandlers");function ed(e,t,n,o,r,i,a,s,l,c,u,h,d,v,x,E){const S={selectionMode:Z("container"),viewMode:Z("default")};a.size>0?S.selectionMode.value="node":s.size>0?S.selectionMode.value="edge":l.size>0&&(S.selectionMode.value="path"),U(S.viewMode,m=>{E.emit("view:mode",m)}),Hc(e,S,v,E);const g=ue(ue(ue(ue({selectedNodes:a,hoveredNodes:c,selectedEdges:s,hoveredEdges:u,selectedPaths:l,hoveredPaths:h},Wc(o,t,S,c,a,n,E)),Vc(r,S,u,s,E)),Fc(i,S,h,l,d,E)),Yc(e,S,t,o,a,x));return Re(Lr,g),g}function Et(){return X(We(Lr),"mouseEventHandlers")}function td(e){return{all:e=e||new Map,on:function(t,n){var o=e.get(t);o?o.push(n):e.set(t,[n])},off:function(t,n){var o=e.get(t);o&&(n?o.splice(o.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var o=e.get(t);o&&o.slice().map(function(r){r(n)}),(o=e.get("*"))&&o.slice().map(function(r){r(t,n)})}}}const Nr=Symbol("emitter");function nd(){const e=td();return Re(Nr,e),e}function od(){return X(We(Nr),"event emitter")}var Lt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function rd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ut={getGlobalThis:function(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof Lt!="undefined")return Lt;if(typeof this!="undefined")return this;throw new Error("Unable to locate global `this`")},extend:function(e,t){e=e||{};for(var n in t)this.isObject(t[n])?e[n]=this.extend(e[n],t[n]):e[n]=t[n];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var t,n;if(this.isElement(e))t=e;else if(typeof e=="string"||e instanceof String){if(t=document.querySelector(e),!t)throw new Error("Provided selector did not find any elements. Selector: "+e)}else throw new Error("Provided selector is not an HTML object nor String");if(t.tagName.toLowerCase()==="svg")n=t;else if(t.tagName.toLowerCase()==="object")n=t.contentDocument.documentElement;else if(t.tagName.toLowerCase()==="embed")n=t.getSVGDocument().documentElement;else throw t.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return n},proxy:function(e,t){return function(){return e.apply(t,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,t){if(e.clientX===void 0||e.clientX===null)if(e.clientX=0,e.clientY=0,e.touches!==void 0&&e.touches.length){if(e.touches[0].clientX!==void 0)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(e.touches[0].pageX!==void 0){var n=t.getBoundingClientRect();e.clientX=e.touches[0].pageX-n.left,e.clientY=e.touches[0].pageY-n.top}}else e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},touchNormalize:function(e,t,n){if(e.touches!==void 0&&e.touches.length){if(e.touches[n].clientX!==void 0)e.clientX=e.touches[n].clientX,e.clientY=e.touches[n].clientY;else if(e.touches[n].pageX!==void 0){var o=t.getBoundingClientRect();e.clientX=e.touches[n].pageX-o.left,e.clientY=e.touches[n].pageY-o.top}}else(e.clientX===void 0||e.clientX===null)&&(e.clientX=0,e.clientY=0,e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY))},isDblClick:function(e,t){if(e.detail===2)return!0;if(t!=null){var n=e.timeStamp-t.timeStamp,o=Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2));return n<250&&o<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(e,t,n){var o=this,r,i,a,s=null,l=0;n||(n={});var c=function(){l=n.leading===!1?0:o.now(),s=null,a=e.apply(r,i),s||(r=i=null)};return function(){var u=o.now();!l&&n.leading===!1&&(l=u);var h=t-(u-l);return r=this,i=arguments,h<=0||h>t?(clearTimeout(s),s=null,l=u,a=e.apply(r,i),s||(r=i=null)):!s&&n.trailing!==!1&&(s=setTimeout(c,h)),a}},createRequestAnimationFrame:function(e){var t=null;return e!=="auto"&&e<60&&e>1&&(t=Math.floor(1e3/e)),t===null?window.requestAnimationFrame||Wo(33):Wo(t)},calculateDistance:function(e,t){var n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)}};function Wo(e){return function(t){window.setTimeout(t,e)}}var id=Ut,ad=function(){var e="",t,n,o,r=[],i={passive:!0},a={passive:!1};id.getGlobalThis().addEventListener?(t="addEventListener",n="removeEventListener"):(t="attachEvent",n="detachEvent",e="on");function s(){return o||(o="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll"),o}function l(E,S){var g=function(m){!m&&(m=window.event);var b={originalEvent:m,target:m.target||m.srcElement,type:"wheel",deltaMode:m.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){m.preventDefault?m.preventDefault():m.returnValue=!1}};return s()=="mousewheel"?(b.deltaY=-.025*m.wheelDelta,m.wheelDeltaX&&(b.deltaX=-.025*m.wheelDeltaX)):b.deltaY=m.detail,S(b)};return r.push({element:E,fn:g}),g}function c(E){for(var S=0;S<r.length;S++)if(r[S].element===E)return r[S].fn;return function(){}}function u(E){for(var S=0;S<r.length;S++)if(r[S].element===E)return r.splice(S,1)}function h(E,S,g,m){var b;s()==="wheel"?b=g:b=l(E,g),E[t](e+S,b,m?i:a)}function d(E,S,g,m){var b;s()==="wheel"?b=g:b=c(E),E[n](e+S,b,m?i:a),u(E)}function v(E,S,g){h(E,s(),S,g),s()=="DOMMouseScroll"&&h(E,"MozMousePixelScroll",S,g)}function x(E,S,g){d(E,s(),S,g),s()=="DOMMouseScroll"&&d(E,"MozMousePixelScroll",S,g)}return{on:v,off:x}}(),Ot=Ut,jr="unknown";typeof document!="undefined"&&document.documentMode&&(jr="ie");var Wn={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(e,t){var n=null;if(Ot.isElement(t)?n=t:n=e.querySelector(t),!n){var o=Array.prototype.slice.call(e.childNodes||e.children).filter(function(l){return l.nodeName!=="defs"&&l.nodeName!=="#text"});o.length===1&&o[0].nodeName==="g"&&o[0].getAttribute("transform")===null&&(n=o[0])}if(!n){var r="viewport-"+new Date().toISOString().replace(/\D/g,"");n=document.createElementNS(this.svgNS,"g"),n.setAttribute("id",r);var i=e.childNodes||e.children;if(i&&i.length>0)for(var a=i.length;a>0;a--)i[i.length-a].nodeName!=="defs"&&n.appendChild(i[i.length-a]);e.appendChild(n)}var s=[];return n.getAttribute("class")&&(s=n.getAttribute("class").split(" ")),~s.indexOf("svg-pan-zoom_viewport")||(s.push("svg-pan-zoom_viewport"),n.setAttribute("class",s.join(" "))),n},setupSvgAttributes:function(e){if(e.setAttribute("xmlns",this.svgNS),e.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),e.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),e.parentNode!==null){var t=e.getAttribute("style")||"";t.toLowerCase().indexOf("overflow")===-1&&e.setAttribute("style","overflow: hidden; "+t)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:Ot.throttle(function(){for(var e=document.querySelectorAll("defs"),t=e.length,n=0;n<t;n++){var o=e[n];o.parentNode.insertBefore(o,o)}},Lt?Lt.internetExplorerRedisplayInterval:null),setCTM:function(e,t,n){var o=this,r="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttributeNS(null,"transform",r),"transform"in e.style?e.style.transform=r:"-ms-transform"in e.style?e.style["-ms-transform"]=r:"-webkit-transform"in e.style&&(e.style["-webkit-transform"]=r),jr==="ie"&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){o.refreshDefsGlobal()},o.internetExplorerRedisplayInterval))},getEventPoint:function(e,t){var n=t.createSVGPoint();return Ot.mouseAndTouchNormalize(e,t),n.x=e.clientX,n.y=e.clientY,n},getTouchPoint:function(e,t,n){var o=t.createSVGPoint();return Ot.touchNormalize(e,t,n),o.x=e.clientX,o.y=e.clientY,o},getSvgCenterPoint:function(e,t,n){return this.createSVGPoint(e,t/2,n/2)},createSVGPoint:function(e,t,n){var o=e.createSVGPoint();return o.x=t,o.y=n,o}},be=Wn,sd={enable:function(e){var t=e.svg.querySelector("defs");t||(t=document.createElementNS(be.svgNS,"defs"),e.svg.appendChild(t));var n=t.querySelector("style#svg-pan-zoom-controls-styles");if(!n){var o=document.createElementNS(be.svgNS,"style");o.setAttribute("id","svg-pan-zoom-controls-styles"),o.setAttribute("type","text/css"),o.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",t.appendChild(o)}var r=document.createElementNS(be.svgNS,"g");r.setAttribute("id","svg-pan-zoom-controls"),r.setAttribute("transform","translate("+(e.width-70)+" "+(e.height-76)+") scale(0.75)"),r.setAttribute("class","svg-pan-zoom-control"),r.appendChild(this._createZoomIn(e)),r.appendChild(this._createZoomReset(e)),r.appendChild(this._createZoomOut(e)),e.svg.appendChild(r),e.controlIcons=r},_createZoomIn:function(e){var t=document.createElementNS(be.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-in"),t.setAttribute("transform","translate(30.5 5) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomIn()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomIn()},!1);var n=document.createElementNS(be.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(be.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o),t},_createZoomReset:function(e){var t=document.createElementNS(be.svgNS,"g");t.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),t.setAttribute("transform","translate(5 35) scale(0.4)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().reset()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().reset()},!1);var n=document.createElementNS(be.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(be.svgNS,"path");o.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o);var r=document.createElementNS(be.svgNS,"path");return r.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r),t},_createZoomOut:function(e){var t=document.createElementNS(be.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-out"),t.setAttribute("transform","translate(30.5 70) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomOut()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomOut()},!1);var n=document.createElementNS(be.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(be.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o),t},disable:function(e){e.controlIcons&&(e.controlIcons.parentNode.removeChild(e.controlIcons),e.controlIcons=null)}},ld=Wn,Ze=Ut,re=function(e,t){this.init(e,t)};re.prototype.init=function(e,t){this.viewport=e,this.options=t,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=Ze.proxy(this.updateCTM,this),this.requestAnimationFrame=Ze.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()};re.prototype.cacheViewBox=function(){var e=this.options.svg.getAttribute("viewBox");if(e){var t=e.split(/[\s\,]/).filter(function(o){return o}).map(parseFloat);this.viewBox.x=t[0],this.viewBox.y=t[1],this.viewBox.width=t[2],this.viewBox.height=t[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=isFinite(n)?n:1,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()};re.prototype.simpleViewBoxCache=function(){var e=this.viewport.getBBox();this.viewBox.x=e.x,this.viewBox.y=e.y,this.viewBox.width=e.width,this.viewBox.height=e.height};re.prototype.getViewBox=function(){return Ze.extend({},this.viewBox)};re.prototype.processCTM=function(){var e=this.getCTM();if(this.options.fit||this.options.contain){var t;this.options.fit?t=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):t=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),t=isFinite(t)?t:1,e.a=t,e.d=t,e.e=-this.viewBox.x*t,e.f=-this.viewBox.y*t}if(this.options.center){var n=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*e.a)*.5,o=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*e.a)*.5;e.e=n,e.f=o}return this.originalState.zoom=e.a,this.originalState.x=e.e,this.originalState.y=e.f,e};re.prototype.getOriginalState=function(){return Ze.extend({},this.originalState)};re.prototype.getState=function(){return Ze.extend({},this.activeState)};re.prototype.getZoom=function(){return this.activeState.zoom};re.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom};re.prototype.computeRelativeZoom=function(e){return e/this.originalState.zoom};re.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}};re.prototype.getCTM=function(){var e=this.options.svg.createSVGMatrix();return e.a=this.activeState.zoom,e.b=0,e.c=0,e.d=this.activeState.zoom,e.e=this.activeState.x,e.f=this.activeState.y,e};re.prototype.setCTM=function(e){var t=this.isZoomDifferent(e),n=this.isPanDifferent(e);if(t||n){if(t&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(e.a))===!1?(e.a=e.d=this.activeState.zoom,t=!1):(this.updateCache(e),this.options.onZoom(this.getRelativeZoom()))),n){var o=this.options.beforePan(this.getPan(),{x:e.e,y:e.f}),r=!1,i=!1;o===!1?(e.e=this.getPan().x,e.f=this.getPan().y,r=i=!0):Ze.isObject(o)&&(o.x===!1?(e.e=this.getPan().x,r=!0):Ze.isNumber(o.x)&&(e.e=o.x),o.y===!1?(e.f=this.getPan().y,i=!0):Ze.isNumber(o.y)&&(e.f=o.y)),r&&i||!this.isPanDifferent(e)?n=!1:(this.updateCache(e),this.options.onPan(this.getPan()))}(t||n)&&this.updateCTMOnNextFrame()}};re.prototype.isZoomDifferent=function(e){return this.activeState.zoom!==e.a};re.prototype.isPanDifferent=function(e){return this.activeState.x!==e.e||this.activeState.y!==e.f};re.prototype.updateCache=function(e){this.activeState.zoom=e.a,this.activeState.x=e.e,this.activeState.y=e.f};re.prototype.pendingUpdate=!1;re.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))};re.prototype.updateCTM=function(){var e=this.getCTM();ld.setCTM(this.viewport,e,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(e)};var ud=function(e,t){return new re(e,t)},Zr=ad,xn=sd,pe=Ut,se=Wn,cd=ud,G=function(e,t){this.init(e,t)},dd={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},Br={passive:!0},Dr={passive:!1};G.prototype.init=function(e,t){var n=this;this.svg=e,this.defs=e.querySelector("defs"),se.setupSvgAttributes(this.svg),this.options=pe.extend(pe.extend({},dd),t),this.state="none";var o=se.getBoundingClientRectNormalized(e);this.width=o.width,this.height=o.height,this.viewport=cd(se.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(i,a){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(i,a)},onZoom:function(i){if(n.viewport&&n.options.onZoom)return n.options.onZoom(i)},beforePan:function(i,a){if(n.viewport&&n.options.beforePan)return n.options.beforePan(i,a)},onPan:function(i){if(n.viewport&&n.options.onPan)return n.options.onPan(i)},onUpdatedCTM:function(i){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(i)}});var r=this.getPublicInstance();r.setBeforeZoom(this.options.beforeZoom),r.setOnZoom(this.options.onZoom),r.setBeforePan(this.options.beforePan),r.setOnPan(this.options.onPan),r.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&xn.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()};G.prototype.setupHandlers=function(){var e=this,t=null;if(this.eventListeners={pointerdown:function(i){if(i.pointerType!=="touch"){var a=e.handleMouseDown(i,t);return t=i,a}},touchstart:function(i){var a=e.handleTouchStart(i,t);return t=i,a},pointerup:function(i){if(i.pointerType!=="touch")return e.handleMouseUp(i)},touchend:function(i){return e.handleTouchEnd(i)},pointermove:function(i){if(i.pointerType!=="touch")return e.handleMouseMove(i)},touchmove:function(i){return e.handleTouchMove(i)},pointerleave:function(i){if(i.pointerType!=="touch")return e.handleMouseUp(i)},pointercancel:function(i){if(i.pointerType!=="touch")return e.handleMouseUp(i)},touchleave:function(i){return e.handleTouchEnd(i)},touchcancel:function(i){return e.handleTouchEnd(i)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var o=n.length-1;o>=0;o--)this.eventListeners.hasOwnProperty(n[o])&&delete this.eventListeners[n[o]]}for(var r in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(r,this.eventListeners[r],this.options.preventMouseEventsDefault?Dr:Br);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())};G.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var e=this;this.wheelListener=function(n){return e.handleMouseWheel(n)};var t=!this.options.preventMouseEventsDefault;Zr.on(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!0}};G.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var e=!this.options.preventMouseEventsDefault;Zr.off(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!1}};G.prototype.handleMouseWheel=function(e){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var t=e.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,o=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in e&&e.deltaMode===0&&e.wheelDelta&&(t=e.deltaY===0?0:Math.abs(e.wheelDelta)/e.deltaY),t=-.3<t&&t<.3?t:(t>0?1:-1)*Math.log(Math.abs(t)+10)/o;var r=this.svg.getScreenCTM().inverse(),i=se.getEventPoint(e,this.svg).matrixTransform(r),a=Math.pow(1+this.options.zoomScaleSensitivity,-1*t);this.zoomAtPoint(a,i)}};G.prototype.zoomAtPoint=function(e,t,n){var o=this.viewport.getOriginalState();n?(e=Math.max(this.options.minZoom*o.zoom,Math.min(this.options.maxZoom*o.zoom,e)),e=e/this.getZoom()):this.getZoom()*e<this.options.minZoom*o.zoom?e=this.options.minZoom*o.zoom/this.getZoom():this.getZoom()*e>this.options.maxZoom*o.zoom&&(e=this.options.maxZoom*o.zoom/this.getZoom());var r=this.viewport.getCTM(),i=t.matrixTransform(r.inverse()),a=this.svg.createSVGMatrix().translate(i.x,i.y).scale(e).translate(-i.x,-i.y),s=r.multiply(a);s.a!==r.a&&this.viewport.setCTM(s)};G.prototype.zoom=function(e,t){this.zoomAtPoint(e,se.getSvgCenterPoint(this.svg,this.width,this.height),t)};G.prototype.publicZoom=function(e,t){t&&(e=this.computeFromRelativeZoom(e)),this.zoom(e,t)};G.prototype.publicZoomAtPoint=function(e,t,n){if(n&&(e=this.computeFromRelativeZoom(e)),pe.getType(t)!=="SVGPoint")if("x"in t&&"y"in t)t=se.createSVGPoint(this.svg,t.x,t.y);else throw new Error("Given point is invalid");this.zoomAtPoint(e,t,n)};G.prototype.getZoom=function(){return this.viewport.getZoom()};G.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()};G.prototype.computeFromRelativeZoom=function(e){return e*this.viewport.getOriginalState().zoom};G.prototype.resetZoom=function(){var e=this.viewport.getOriginalState();this.zoom(e.zoom,!0)};G.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())};G.prototype.reset=function(){this.resetZoom(),this.resetPan()};G.prototype.handleDblClick=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.options.controlIconsEnabled){var t=e.target.getAttribute("class")||"";if(t.indexOf("svg-pan-zoom-control")>-1)return!1}var n;e.shiftKey?n=1/((1+this.options.zoomScaleSensitivity)*2):n=(1+this.options.zoomScaleSensitivity)*2;var o=se.getEventPoint(e,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(n,o)};G.prototype.handleMouseDown=function(e,t){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),pe.mouseAndTouchNormalize(e,this.svg),this.options.dblClickZoomEnabled&&pe.isDblClick(e,t)?this.handleDblClick(e):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=se.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()))};G.prototype.handleMouseMove=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var t=se.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(t.x-this.stateOrigin.x,t.y-this.stateOrigin.y);this.viewport.setCTM(n)}};G.prototype.handleMouseUp=function(e){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&(this.state="none")};G.prototype.handleTouchStart=function(e,t){if(e.touches.length==1)this.handleMouseDown(e,t);else{this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM();var n=se.getTouchPoint(e,this.svg,0),o=se.getTouchPoint(e,this.svg,1);this.firstDistance=pe.calculateDistance(n,o),n.x=(n.x+o.x)/2,n.y=(n.y+o.y)/2,this.stateOrigin=n.matrixTransform(this.firstEventCTM.inverse()),this.firstZoomLevel=this.getZoom()}};G.prototype.handleTouchMove=function(e){if(e.touches.length==1)this.handleMouseMove(e);else{if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),!this.options.panEnabled&&!this.options.zoomEnabled)return;var t=se.getTouchPoint(e,this.svg,0),n=se.getTouchPoint(e,this.svg,1),o=this.svg.createSVGPoint();if(o.x=(t.x+n.x)/2,o.y=(t.y+n.y)/2,this.state==="pan"&&this.options.panEnabled){var r=o.matrixTransform(this.firstEventCTM.inverse()),i=this.firstEventCTM.translate(r.x-this.stateOrigin.x,r.y-this.stateOrigin.y);this.viewport.setCTM(i)}if(this.options.zoomEnabled){var a=pe.calculateDistance(t,n),s=a/this.firstDistance,l=this.svg.getScreenCTM().inverse(),c=o.matrixTransform(l);this.zoomAtPoint(this.firstZoomLevel*s,c,!0)}}};G.prototype.handleTouchEnd=function(e){if(e.touches.length==0)this.handleMouseUp(e);else if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM(),e.touches.length==1)this.stateOrigin=se.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse());else{var t=se.getTouchPoint(e,this.svg,0),n=se.getTouchPoint(e,this.svg,1);this.firstDistance=pe.calculateDistance(t,n),t.x=(t.x+n.x)/2,t.y=(t.y+n.y)/2,this.stateOrigin=t.matrixTransform(this.firstEventCTM.inverse())}};G.prototype.fit=function(){var e=this.viewport.getViewBox(),t=Math.min(this.width/e.width,this.height/e.height);this.zoom(t,!0)};G.prototype.contain=function(){var e=this.viewport.getViewBox(),t=Math.max(this.width/e.width,this.height/e.height);this.zoom(t,!0)};G.prototype.center=function(){var e=this.viewport.getViewBox(),t=(this.width-(e.width+e.x*2)*this.getZoom())*.5,n=(this.height-(e.height+e.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:t,y:n})};G.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()};G.prototype.pan=function(e){var t=this.viewport.getCTM();t.e=e.x,t.f=e.y,this.viewport.setCTM(t)};G.prototype.panBy=function(e){var t=this.viewport.getCTM();t.e+=e.x,t.f+=e.y,this.viewport.setCTM(t)};G.prototype.getPan=function(){var e=this.viewport.getState();return{x:e.x,y:e.y}};G.prototype.resize=function(){var e=se.getBoundingClientRectNormalized(this.svg);this.width=e.width,this.height=e.height;var t=this.viewport;t.options.width=this.width,t.options.height=this.height,t.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())};G.prototype.destroy=function(){var e=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var t in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(t,this.eventListeners[t],this.options.preventMouseEventsDefault?Dr:Br);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),$e=$e.filter(function(n){return n.svg!==e.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}};G.prototype.getPublicInstance=function(){var e=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return e.options.panEnabled=!0,e.pi},disablePan:function(){return e.options.panEnabled=!1,e.pi},isPanEnabled:function(){return!!e.options.panEnabled},pan:function(t){return e.pan(t),e.pi},panBy:function(t){return e.panBy(t),e.pi},getPan:function(){return e.getPan()},setBeforePan:function(t){return e.options.beforePan=t===null?null:pe.proxy(t,e.publicInstance),e.pi},setOnPan:function(t){return e.options.onPan=t===null?null:pe.proxy(t,e.publicInstance),e.pi},enableZoom:function(){return e.options.zoomEnabled=!0,e.pi},disableZoom:function(){return e.options.zoomEnabled=!1,e.pi},isZoomEnabled:function(){return!!e.options.zoomEnabled},enableControlIcons:function(){return e.options.controlIconsEnabled||(e.options.controlIconsEnabled=!0,xn.enable(e)),e.pi},disableControlIcons:function(){return e.options.controlIconsEnabled&&(e.options.controlIconsEnabled=!1,xn.disable(e)),e.pi},isControlIconsEnabled:function(){return!!e.options.controlIconsEnabled},enableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!0,e.pi},disableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!1,e.pi},isDblClickZoomEnabled:function(){return!!e.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return e.enableMouseWheelZoom(),e.pi},disableMouseWheelZoom:function(){return e.disableMouseWheelZoom(),e.pi},isMouseWheelZoomEnabled:function(){return!!e.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(t){return e.options.zoomScaleSensitivity=t,e.pi},setMinZoom:function(t){return e.options.minZoom=t,e.pi},setMaxZoom:function(t){return e.options.maxZoom=t,e.pi},setBeforeZoom:function(t){return e.options.beforeZoom=t===null?null:pe.proxy(t,e.publicInstance),e.pi},setOnZoom:function(t){return e.options.onZoom=t===null?null:pe.proxy(t,e.publicInstance),e.pi},zoom:function(t){return e.publicZoom(t,!0),e.pi},zoomBy:function(t){return e.publicZoom(t,!1),e.pi},zoomAtPoint:function(t,n){return e.publicZoomAtPoint(t,n,!0),e.pi},zoomAtPointBy:function(t,n){return e.publicZoomAtPoint(t,n,!1),e.pi},zoomIn:function(){return this.zoomBy(1+e.options.zoomScaleSensitivity),e.pi},zoomOut:function(){return this.zoomBy(1/(1+e.options.zoomScaleSensitivity)),e.pi},getZoom:function(){return e.getRelativeZoom()},setOnUpdatedCTM:function(t){return e.options.onUpdatedCTM=t===null?null:pe.proxy(t,e.publicInstance),e.pi},resetZoom:function(){return e.resetZoom(),e.pi},resetPan:function(){return e.resetPan(),e.pi},reset:function(){return e.reset(),e.pi},fit:function(){return e.fit(),e.pi},contain:function(){return e.contain(),e.pi},center:function(){return e.center(),e.pi},updateBBox:function(){return e.updateBBox(),e.pi},resize:function(){return e.resize(),e.pi},getSizes:function(){return{width:e.width,height:e.height,realZoom:e.getZoom(),viewBox:e.viewport.getViewBox()}},destroy:function(){return e.destroy(),e.pi}}),this.publicInstance};var $e=[],vd=function(e,t){var n=pe.getSvg(e);if(n===null)return null;for(var o=$e.length-1;o>=0;o--)if($e[o].svg===n)return $e[o].instance.getPublicInstance();return $e.push({svg:n,instance:new G(n,t)}),$e[$e.length-1].instance.getPublicInstance()},hd=vd;const fd=rd(hd),pd={fitToContents(){return this.fit().center().zoomOut().zoomOut(),this},getViewArea(){const e=this.getSizes(),t=this.getPan(),n=e.realZoom;t.x/=n,t.y/=n;const o={width:e.width/n,height:e.height/n};return{box:{top:-t.y,bottom:o.height-t.y,left:-t.x,right:o.width-t.x},center:{x:o.width/2-t.x,y:o.height/2-t.y}}},getViewBox(){return this.getViewArea().box},setViewBox(e){const t=e.right-e.left,n=e.bottom-e.top,{width:o,height:r}=this.getSizes(),i=t/n,a=o/r,s=i<a?n*a:t,l=i>a?t/a:n,c=Math.min(o/s,r/l),u=this.getRealZoom(),h=this.getZoom(),d=u/h;this.zoom(c/d);const v={x:(e.left+t/2)*c,y:(e.top+n/2)*c};this.pan({x:-v.x+s/2*c,y:-v.y+l/2*c})},getRealZoom(){return this.getSizes().realZoom},applyAbsoluteZoomLevel(e,t,n){const o=Math.max(1e-4,t),r=Math.max(o,n),i=Math.max(Math.min(r,e),o),a=this.getRealZoom(),s=this.getZoom(),l=a/s;this.setMinZoom(o/l).setMaxZoom(r/l).zoom(i/l)},isPanEnabled(){return this._isPanEnabled},enablePan(){return this._isPanEnabled=!0,this._internalEnablePan(),this},disablePan(){return this._isPanEnabled=!1,this._internalDisablePan(),this},isZoomEnabled(){return this._isZoomEnabled},enableZoom(){return this._isZoomEnabled=!0,this._internalEnableZoom(),this},disableZoom(){return this._isZoomEnabled=!1,this._internalDisableZoom(),this},setPanEnabled(e){return e?this.enablePan():this.disablePan(),this},setZoomEnabled(e){return e?(this.enableZoom(),this.enableDblClickZoom()):(this.disableZoom(),this.disableDblClickZoom()),this}};function gd(e,t){var n,o;const r=e;return r._isPanEnabled=(n=t.panEnabled)!=null?n:!0,r._isZoomEnabled=(o=t==null?void 0:t.zoomEnabled)!=null?o:!0,r._internalIsPanEnabled=r.isPanEnabled,r._internalEnablePan=r.enablePan,r._internalDisablePan=r.disablePan,r._internalIsZoomEnabled=r.isZoomEnabled,r._internalEnableZoom=r.enableZoom,r._internalDisableZoom=r.disableZoom,Object.assign(e,pd),r}function md(e,t){var n,o,r,i,a,s;const l=(o=(n=t.customEventsHandler)==null?void 0:n.init)!=null?o:h=>{},c=(i=(r=t.customEventsHandler)==null?void 0:r.destroy)!=null?i:h=>{},u=(s=(a=t.customEventsHandler)==null?void 0:a.haltEventListeners)!=null?s:[];return t.mouseWheelZoomEnabled===void 0&&(t.mouseWheelZoomEnabled=t.zoomEnabled),t.customEventsHandler={init:h=>{gd(h.instance,t),l(h)},destroy:h=>c(h),haltEventListeners:u},fd(e,t)}function bd(e,t){const n=Z();let o=0;const r=[],i=[],a=()=>{o=1,r.forEach(l=>l()),r.length=0},s=()=>{o=2,i.forEach(l=>l()),i.length=0};return it(()=>{var l,c,u,h,d,v;const x=X(e.value,"<svg>"),E=(c=(l=t.customEventsHandler)==null?void 0:l.init)!=null?c:b=>{},S=(h=(u=t.customEventsHandler)==null?void 0:u.destroy)!=null?h:b=>{},g=(v=(d=t.customEventsHandler)==null?void 0:d.haltEventListeners)!=null?v:[];t.customEventsHandler={init:b=>{n.value=b.instance,E(b),a()},destroy:b=>{s(),S(b)},haltEventListeners:g};const m=()=>{const b=x.getBoundingClientRect();b.width!==0&&b.height!==0?md(x,t):setTimeout(m,200)};m()}),bt(()=>{var l;(l=n.value)==null||l.destroy(),n.value=void 0}),{svgPanZoom:n,onSvgPanZoomMounted:l=>{o===0?r.push(l):o===1&&l()},onSvgPanZoomUnmounted:l=>{o===0||o===1?i.push(l):l()}}}const Rr=Symbol("zoomLevel");function yd(e,t){const n=M(()=>t.scalingObjects?1:1/e.value);return Re(Rr,{zoomLevel:e,scale:n}),{scale:n}}function we(){return X(We(Rr),"zoomLevel")}function wd(e){return e instanceof Promise||e&&typeof e.then=="function"}function xd(){let e=null;const t=Z({enabled:!1,duration:300,timingFunction:"linear"});function n(o,r=300,i="linear"){e&&(clearTimeout(e),e=null),t.value={enabled:!0,duration:r,timingFunction:i},Sn(()=>Pe(this,null,function*(){const a=o();wd(a)&&(yield a),e&&clearTimeout(e),e=window==null?void 0:window.setTimeout(()=>{t.value.enabled=!1,e=null},r)}))}return{transitionWhile:n,transitionOption:t}}function Ed(e){const t=Z({}),n=Z(!1);let o=1;const r=new Map;return ye(()=>{if(e.value instanceof Array){const i=new Set([]);if(t.value=Object.fromEntries(e.value.map(a=>{let s=a.id;return s||(n.value||(n.value=!0,console.warn("[v-network-graph] Please specify the `id` field for the `Path` object. Currently, this works for compatibility, but in the future, the id field will be required.")),s=r.get(a),s||(s="path-"+o++,r.set(a,s))),i.add(s),[s,a]})),n.value)for(const[a,s]of Array.from(r.entries()))i.has(s)||r.delete(a)}else t.value=e.value}),{objects:t,isInCompatibilityModeForPath:n}}function Sd(e,t,n,o){if(o){const i=Z(o(e[t])),a=s=>{Ne(s,i.value)||(i.value=s),Ne(s,e[t])||n(`update:${t}`,s)};return U(()=>o(i.value),a),U(()=>e[t],s=>a(o(s))),i.value!==e[t]&&n(`update:${t}`,i.value),i}const r=Z(e[t]);return U(()=>e[t],i=>{Ne(i,r.value)||(r.value=i)}),U(r,i=>{Ne(i,e[t])||n(`update:${t}`,i)}),r}function un(e,t,n,o){const r=Ce(new Set);return U(()=>e[t],()=>{const i=e[t].filter(a=>a in n.value);Ne(i,Array.from(r))||(r.clear(),i.forEach(r.add,r))},{deep:!0,immediate:!0}),U(r,()=>{const i=Array.from(r);Ne(e[t],i)||o(`update:${t}`,i)}),Le(r)}const Wr=Symbol("selection");function Pd(e,t,n){Re(Wr,{selectedNodes:e,selectedEdges:t,selectedPaths:n})}function kd(){return X(We(Wr),"Selections")}const Vr=Symbol("layouts");function Od(e){Re(Vr,e)}function Vn(){return X(We(Vr),"Layouts")}function Td(e,t){for(let n=0;n<e.length-1;n++)t(e[n],e[n+1])}function ct(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function Md(e,t,n){const o=e.indexOf(t);o<0||e.splice(o+1,0,n)}function _d(e,t){const n=["edges","edge-labels","focusring","nodes","node-labels","paths"];return M(()=>{const o=Wu(e.view.builtInLayerOrder).filter(i=>{const a=n.includes(i);return a||console.warn(`Layer ${i} is not a built-in layer.`),a}).reverse(),r=[...n];return Td(o,(i,a)=>{ct(r,a),Md(r,i,a)}),"edge-label"in t||"edges-label"in t||ct(r,"edge-labels"),e.node.focusring.visible||ct(r,"focusring"),e.node.label.visible===!1&&ct(r,"node-labels"),e.path.visible||ct(r,"paths"),r})}const Vo=()=>new Promise(e=>Sn(e)),Cd=["x","y","width","height","fill","stroke","stroke-width","stroke-dasharray"],zd=F({__name:"VSelectionBox",props:{box:null,config:null},setup(e){return(t,n)=>(O(),A("rect",{class:"v-ng-selection-box",x:Math.round(e.box.pos.x),y:Math.round(e.box.pos.y),width:Math.ceil(e.box.size.width),height:Math.ceil(e.box.size.height),fill:e.config.color,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth,"stroke-dasharray":e.config.strokeDasharray},null,8,Cd))}}),Id=["points","fill"],Ad=F({__name:"VMarkerHeadArrow",props:{width:null,height:null,refX:null,color:null,isSource:{type:Boolean},units:null},setup(e){const t=e,n=M(()=>{const o=t.width,r=t.height;return t.isSource?`${o} ${r}, 0 ${r/2}, ${o} 0`:`0 0, ${o} ${r/2}, 0 ${r}`});return(o,r)=>(O(),A("polygon",{points:w(n),fill:e.color},null,8,Id))}}),$d=["points","stroke-width","stroke"],Ld=F({__name:"VMarkerHeadAngle",props:{width:null,height:null,refX:null,color:null,isSource:{type:Boolean},units:null},setup(e){const t=e,n=M(()=>t.units==="strokeWidth"?1:Math.min(t.width,t.height)/5),o=M(()=>{const r=n.value/2,i=t.width,a=t.height;return t.isSource?`${i-r} ${a-r}, ${r} ${a/2}, ${i-r} ${r}`:`${r} ${r}, ${i-r} ${a/2}, ${r} ${a-r}`});return(r,i)=>(O(),A("polyline",{points:w(o),fill:"none","stroke-width":w(n),stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,$d))}}),Nd=["fill","cx","cy","rx","ry"],jd=F({__name:"VMarkerHeadCircle",props:{width:null,height:null,refX:null,color:null,isSource:{type:Boolean},units:null},setup(e){return(t,n)=>(O(),A("ellipse",{fill:e.color,cx:e.width/2,cy:e.height/2,rx:e.width/2,ry:e.height/2},null,8,Nd))}}),Zd=["id","markerWidth","markerHeight","refX","refY","markerUnits"],Bd=F({__name:"VMarkerHead",props:{id:null,marker:null,scale:null},setup(e){const t=e,n={arrow:Ad,angle:Ld,circle:jd},o=M(()=>t.marker.width*(t.marker.units==="strokeWidth"?1:t.scale)),r=M(()=>t.marker.height*(t.marker.units==="strokeWidth"?1:t.scale)),i=M(()=>{const s=t.marker.margin*(t.marker.units==="strokeWidth"?1:t.scale);return t.marker.isSource?o.value+s:-s}),a=M(()=>{const s=t.marker.offset*(t.marker.units==="strokeWidth"?1:t.scale);return t.marker.isSource?s:-s});return(s,l)=>e.marker.type!=="none"&&e.marker.type!=="custom"?(O(),A("marker",{key:0,id:e.id,markerWidth:w(o),markerHeight:w(r),refX:w(i),refY:w(r)/2+w(a),orient:"auto",markerUnits:e.marker.units,class:"v-ng-marker"},[(O(),H(qo(n[e.marker.type]),{width:w(o),height:w(r),refX:w(i),color:e.marker.color,"is-source":e.marker.isSource,units:e.marker.units},null,8,["width","height","refX","color","is-source","units"]))],8,Zd)):ve("",!0)}}),Dd={class:"v-ng-background-grid","shape-rendering":"crispEdges"},Rd=["d"],Wd=["d"],Vd=["d"],Hd=["d"],Fd=F({__name:"VBackgroundGrid",setup(e){const{container:t,svgPanZoom:n}=zn(),{zoomLevel:o}=we(),r=od(),i=tc(),a=Z({x:0,y:0}),s=Z({width:500,height:500});it(()=>{var d;const v=(d=n.value)==null?void 0:d.getPan();v&&(a.value={x:-v.x,y:-v.y});const x=t.value.getBoundingClientRect();s.value={width:x.width,height:x.height}}),r.on("view:resize",d=>{s.value={width:d.width,height:d.height}}),r.on("view:pan",d=>{a.value={x:-d.x,y:-d.y}}),r.on("view:zoom",()=>{var d;const v=(d=n.value)==null?void 0:d.getPan();v&&(a.value={x:-v.x,y:-v.y})});const l=Z([]),c=Z([]),u=Z([]),h=Z([]);return ye(()=>{const d=[],v=[],x=[],E=[],S=1/o.value,g=i.grid.interval,m=a.value.x*S,b=a.value.y*S,y=Math.floor(s.value.width/g+1)*g,f=Math.floor(s.value.height/g+1)*g,p=(a.value.x+y)*S,k=(a.value.y+f)*S,T=i.grid.thickIncrements,C=i.grid.line.dasharray,_=i.grid.thick.dasharray;let z={stroke:i.grid.thick.color,"stroke-width":i.grid.thick.width,"stroke-dasharray":_,"stroke-dashoffset":_?m/S:void 0},$={stroke:i.grid.line.color,"stroke-width":i.grid.line.width,"stroke-dasharray":C,"stroke-dashoffset":C?m/S:void 0};const R=(a.value.x+y)*S;for(let B=b;B<=k;B+=g){const W=Math.floor(B/g);T&&W%T===0?d.push([W,W*g,m,R,z]):x.push([W,W*g,m,R,$])}z=ue({},z),z["stroke-dashoffset"]=_?b/S:void 0,$=ue({},$),$["stroke-dashoffset"]=C?b/S:void 0;const Y=(a.value.y+f)*S;for(let B=m;B<=p;B+=g){const W=Math.floor(B/g);T&&W%T===0?v.push([W,W*g,b,Y,z]):E.push([W,W*g,b,Y,$])}c.value=d,l.value=v,h.value=x,u.value=E}),(d,v)=>(O(),A("g",Dd,[(O(!0),A(q,null,te(h.value,([x,E,S,g,m])=>(O(),A("path",ke({key:`nv${x}`,d:`M ${S} ${E} L ${g} ${E}`},m,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Rd))),128)),(O(!0),A(q,null,te(u.value,([x,E,S,g,m])=>(O(),A("path",ke({key:`nh${x}`,d:`M ${E} ${S} L ${E} ${g}`},m,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Wd))),128)),(O(!0),A(q,null,te(c.value,([x,E,S,g,m])=>(O(),A("path",ke({key:`tv${x}`,d:`M ${S} ${E} L ${g} ${E}`},m,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Vd))),128)),(O(!0),A(q,null,te(l.value,([x,E,S,g,m])=>(O(),A("path",ke({key:`th${x}`,d:`M ${E} ${S} L ${E} ${g}`},m,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Hd))),128))]))}}),Ud=F({__name:"VBackgroundViewport",setup(e){const{viewport:t}=zn(),n=Z(),o=(i,a,s)=>{i.forEach(l=>{var c;return a.setAttribute(l,(c=s.getAttribute(l))!=null?c:"")})},r=new MutationObserver(i=>{if(!n.value)return;const a=i.map(s=>{var l;return(l=s.attributeName)!=null?l:""}).filter(Boolean);o(a,n.value,t.value)});return it(()=>{const i=["transform","style"];r.observe(t.value,{attributes:!0,attributeFilter:i}),n.value&&o(i,n.value,t.value)}),bt(()=>{r.disconnect()}),(i,a)=>(O(),A("g",{ref_key:"background",ref:n,class:"v-ng-background-viewport"},[K(i.$slots,"default")],512))}}),Gd=["d","stroke-width"],qd=F({__name:"VEdgeBackground",props:{id:null,state:null,sourcePos:{default:void 0},targetPos:{default:void 0}},setup(e){const t=e,{scale:n}=we(),o=Ht(),{handleEdgePointerDownEvent:r,handleEdgePointerOverEvent:i,handleEdgePointerOutEvent:a,handleEdgeClickEvent:s,handleEdgeDoubleClickEvent:l,handleEdgeContextMenu:c}=Et(),u=M(()=>{const d=t.state.position;if(t.state.loop){const{radius:v,isLargeArc:x,isClockwise:E}=t.state.loop,[S,g]=v,m=x?1:0,b=E?1:0;return`M ${d.p1.x} ${d.p1.y} A ${S} ${g} 0 ${m} ${b} ${d.p2.x} ${d.p2.y}`}else{if(o.type==="straight"||!t.state.curve)return`M ${d.p1.x} ${d.p1.y} L ${d.p2.x} ${d.p2.y}`;{const v=[...t.state.curve.control,{x:d.p2.x,y:d.p2.y}],x=[];return x.push(`M ${d.p1.x} ${d.p1.y}`),Mn(v,2).forEach(([E,S])=>x.push(`Q ${E.x} ${E.y} ${S.x} ${S.y}`)),x.join(" ")}}}),h=M(()=>(t.state.line.stroke.width+10)*n.value);return(d,v)=>(O(),A("path",{class:me({"v-ng-line-background":!0,selectable:e.state.selectable}),d:w(u),stroke:"transparent","stroke-width":w(h),fill:"none",onPointerdown:v[0]||(v[0]=Se(x=>w(r)(e.id,x),["stop"])),onPointerenterPassive:v[1]||(v[1]=x=>w(i)(e.id,x)),onPointerleavePassive:v[2]||(v[2]=x=>w(a)(e.id,x)),onClick:v[3]||(v[3]=Se(x=>w(s)(e.id,x),["stop"])),onDblclick:v[4]||(v[4]=Se(x=>w(l)(e.id,x),["stop"])),onContextmenu:v[5]||(v[5]=x=>w(c)(e.id,x))},null,42,Gd))}}),Xd=F({__name:"VEdgeBackgrounds",setup(e){const{edgeStates:t,edgeGroupStates:n,layouts:o}=Te();return(r,i)=>(O(!0),A(q,null,te(w(n).edgeGroups,({summarize:a,edges:s})=>(O(),A(q,null,[a?ve("",!0):(O(!0),A(q,{key:0},te(s,(l,c)=>(O(),H(qd,{key:c,id:c,state:w(t)[c],"source-pos":w(o).nodes[l.source],"target-pos":w(o).nodes[l.target]},null,8,["id","state","source-pos","target-pos"]))),128))],64))),256))}}),Yd=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],Hr=F({__name:"VLine",props:{p1:null,p2:null,config:null},setup(e){const t=e,{scale:n}=we(),o=M(()=>t.config.width*n.value),r=M(()=>xt(t.config.dasharray,n.value)),i=M(()=>{const a=t.config.animate?Rt(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return a?{"--animation-speed":a}:void 0});return(a,s)=>(O(),A("path",{class:me({"v-ng-line":!0,animate:e.config.animate}),d:`M ${e.p1.x} ${e.p1.y} L ${e.p2.x} ${e.p2.y}`,stroke:e.config.color,"stroke-width":w(o),"stroke-dasharray":w(r),"stroke-linecap":e.config.linecap,style:yt(w(i))},null,14,Yd))}}),Kd=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],Jd=F({__name:"VArc",props:{p1:null,p2:null,radius:null,isLargeArc:{type:Boolean},isClockwise:{type:Boolean},config:null},setup(e){const t=e,{scale:n}=we(),o=M(()=>t.config.width*n.value),r=M(()=>xt(t.config.dasharray,n.value)),i=M(()=>{const s=t.config.animate?Rt(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return s?{"--animation-speed":s}:void 0}),a=M(()=>{const{p1:s,p2:l,radius:c,isLargeArc:u,isClockwise:h}=t,[d,v]=c,x=u?1:0,E=h?1:0;return`M ${s.x} ${s.y} A ${d} ${v} 0 ${x} ${E} ${l.x} ${l.y}`});return(s,l)=>(O(),A("path",{class:me({"v-ng-line":!0,animate:e.config.animate}),d:w(a),stroke:e.config.color,"stroke-width":w(o),"stroke-dasharray":w(r),"stroke-linecap":e.config.linecap,style:yt(w(i)),fill:"none"},null,14,Kd))}}),Qd=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","marker-start","marker-end"],ev=F({__name:"VEdgeCurved",props:{state:null,config:null,markerStart:{default:void 0},markerEnd:{default:void 0}},setup(e){const t=e,{scale:n}=we(),o=M(()=>{var s,l;const c=t.state.position,u=[...(l=(s=t.state.curve)==null?void 0:s.control)!=null?l:[],{x:c.p2.x,y:c.p2.y}],h=[];return h.push(`M ${c.p1.x} ${c.p1.y}`),Mn(u,2).forEach(([d,v])=>h.push(`Q ${d.x} ${d.y} ${v.x} ${v.y}`)),h.join(" ")}),r=M(()=>t.config.width*n.value),i=M(()=>xt(t.config.dasharray,n.value)),a=M(()=>{const s=t.config.animate?Rt(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return s?{"--animation-speed":s}:void 0});return(s,l)=>(O(),A("path",{class:me({"v-ng-line":!0,animate:e.config.animate}),d:w(o),fill:"none",stroke:e.config.color,"stroke-width":w(r),"stroke-dasharray":w(i),"stroke-linecap":e.config.linecap,style:yt(w(a)),"marker-start":e.markerStart,"marker-end":e.markerEnd},null,14,Qd))}}),tv=F({__name:"VEdge",props:{id:null,state:null,sourcePos:{default:void 0},targetPos:{default:void 0}},setup(e){const t=Ht();return(n,o)=>e.state.loop?(O(),H(Jd,ke({key:0},e.state.position,{radius:e.state.loop.radius,"is-large-arc":e.state.loop.isLargeArc,"is-clockwise":e.state.loop.isClockwise,class:[{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},"v-ng-edge"],config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0}),null,16,["radius","is-large-arc","is-clockwise","class","config","marker-start","marker-end"])):w(t).type=="straight"||!e.state.curve?(O(),H(Hr,ke({key:1,"data-edge-id":e.id},e.state.position,{class:[{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},"v-ng-edge"],config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0}),null,16,["data-edge-id","class","config","marker-start","marker-end"])):(O(),H(ev,{key:2,"data-edge-id":e.id,class:me([{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},"v-ng-edge"]),state:e.state,config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0},null,8,["data-edge-id","class","state","config","marker-start","marker-end"]))}}),nv=["cx","cy","r","fill","stroke","stroke-width","stroke-dasharray"],ov=["x","y","width","height","rx","ry","fill","stroke","stroke-width","stroke-dasharray"],Gt=F({__name:"VShape",props:{baseX:{default:0},baseY:{default:0},config:null},setup(e){const t=e,{scale:n}=we(),o=Z(t.baseX),r=Z(t.baseY),i=Z(0),a=Z("#000000"),s=Z(void 0),l=Z(0),c=Z(0),u=Z(0),h=Z(0);return ye(()=>{var d;const v=n.value;i.value=t.config.strokeWidth*v,a.value=(d=t.config.strokeColor)!=null?d:"none",s.value=xt(t.config.strokeDasharray,v),t.config.type==="circle"?(o.value=t.baseX,r.value=t.baseY,l.value=t.config.radius*v):(c.value=t.config.width*v,u.value=t.config.height*v,h.value=t.config.borderRadius*v,o.value=t.baseX-c.value/2,r.value=t.baseY-u.value/2)}),(d,v)=>e.config.type==="circle"?(O(),A("circle",{key:0,class:"v-ng-shape-circle",cx:o.value,cy:r.value,r:l.value,fill:e.config.color,stroke:a.value,"stroke-width":i.value,"stroke-dasharray":s.value},null,8,nv)):(O(),A("rect",{key:1,class:"v-ng-shape-rect",x:o.value,y:r.value,width:c.value,height:u.value,rx:h.value,ry:h.value,fill:e.config.color,stroke:a.value,"stroke-width":i.value,"stroke-dasharray":s.value},null,8,ov))}}),rv=["rx","ry","fill","transform"],iv=["x","y","dominant-baseline","font-family","font-size","fill"],av=["x","dy","dominant-baseline"],qt=F({__name:"VLabelText",props:{text:null,x:{default:0},y:{default:0},dominantBaseline:{default:"central"},config:null},setup(e){const t=e,n=hi(),{scale:o}=we(),r=M(()=>{var S,g;return(g=(S=t.text)==null?void 0:S.toString().split(/\r?\n/))!=null?g:""}),i=M(()=>{var S;return(S=n["font-size"])!=null?S:t.config.fontSize*o.value}),a=M(()=>i.value*t.config.lineHeight),s=M(()=>{const S=t.dominantBaseline;return S==="hanging"?0:S==="central"?-(a.value*(r.value.length-1))/2:-a.value*(r.value.length-1)}),l=Z(),c=Z(""),u=Ce({x:0,y:0,width:0,height:0}),h=M(()=>{var S,g;const m=t.config.background;if(!m)return u;let b,y;m.padding instanceof Object?(b=m.padding.vertical,y=m.padding.horizontal):(b=(S=m.padding)!=null?S:0,y=(g=m.padding)!=null?g:0);const f=a.value-i.value;return{x:u.x-y*o.value,y:u.y-b*o.value-f/2,width:u.width+y*2*o.value,height:u.height+b*2*o.value+f}});let d;const v=()=>{t.config.background&&t.config.background.visible?!d&&l.value&&(d=E(l.value,u,c)):(d==null||d.disconnect(),d=void 0)};it(()=>v()),U(()=>t.config.background&&t.config.background.visible,(S,g)=>{S!=g&&v()}),bt(()=>{d==null||d.disconnect(),d=void 0});function x(S,g,m){var b;const y=S.getBBox();g.x=y.x,g.y=y.y,g.width=y.width,g.height=y.height,m.value=(b=S.getAttribute("transform"))!=null?b:void 0}function E(S,g,m){const b=new MutationObserver(()=>{x(S,g,m)});return b.observe(S,{attributes:!0,attributeFilter:["x","y","transform","font-size"]}),x(S,g,m),b}return(S,g)=>{var m,b,y,f,p,k;return O(),A(q,null,[e.config.background&&e.config.background.visible?(O(),A("rect",ke({key:0,class:"v-ng-text-background"},w(h),{rx:((b=(m=e.config.background)==null?void 0:m.borderRadius)!=null?b:0)*w(o),ry:((f=(y=e.config.background)==null?void 0:y.borderRadius)!=null?f:0)*w(o),fill:(k=(p=e.config.background)==null?void 0:p.color)!=null?k:"#ffffff",transform:c.value}),null,16,rv)):ve("",!0),Go("text",ke({ref_key:"element",ref:l,class:"v-ng-text"},S.$attrs,{x:e.x,y:e.y,"dominant-baseline":e.dominantBaseline,"font-family":S.$attrs["font-family"]?`${S.$attrs["font-family"]}`:e.config.fontFamily,"font-size":w(i),fill:S.$attrs.fill?`${S.$attrs.fill}`:e.config.color}),[w(r).length<=1?(O(),A(q,{key:0},[fi(Yn(e.text),1)],64)):(O(!0),A(q,{key:1},te(w(r),(T,C)=>(O(),A("tspan",{key:C,x:e.x,dy:C==0?w(s):w(a),"dominant-baseline":e.dominantBaseline},Yn(T),9,av))),128))],16,iv)],64)}}}),sv=F({__name:"VEdgeSummarized",props:{edges:null,layouts:null},setup(e){const t=e,n=Ht(),{handleEdgesPointerDownEvent:o,handleEdgesPointerOverEvent:r,handleEdgesPointerOutEvent:i,handleEdgesClickEvent:a,handleEdgesDoubleClickEvent:s,handleEdgesContextMenu:l}=Et(),{edgeStates:c}=Te(),u=Z({p1:{x:0,y:0},p2:{x:0,y:0}}),h=Z({x:0,y:0});ye(()=>{const b=Object.keys(t.edges).find(y=>y in c);b&&(u.value=c[b].position,h.value={x:(u.value.p1.x+u.value.p2.x)/2,y:(u.value.p1.y+u.value.p2.y)/2})});const d=M(()=>Object.keys(t.edges)),v=M(()=>I.values(n.summarized.label,t.edges)),x=M(()=>I.values(n.summarized.shape,t.edges)),E=M(()=>I.values(n.summarized.stroke,t.edges)),S=M(()=>d.value.some(b=>c[b].hovered)),g=M(()=>d.value.some(b=>c[b].selectable)),m=M(()=>d.value.some(b=>c[b].selected));return(b,y)=>(O(),A("g",{class:me({"v-ng-line-summarized":!0,hovered:w(S),selectable:w(g),selected:w(m)}),onPointerdown:y[0]||(y[0]=Se(f=>w(o)(w(d),f),["stop"])),onPointerenterPassive:y[1]||(y[1]=f=>w(r)(w(d),f)),onPointerleavePassive:y[2]||(y[2]=f=>w(i)(w(d),f)),onClick:y[3]||(y[3]=Se(f=>w(a)(w(d),f),["stop"])),onDblclick:y[4]||(y[4]=Se(f=>w(s)(w(d),f),["stop"])),onContextmenu:y[5]||(y[5]=f=>w(l)(w(d),f))},[Ue(Hr,ke(u.value,{config:w(E),"data-edge-id":w(d)[0]}),null,16,["config","data-edge-id"]),Ue(Gt,{"base-x":h.value.x,"base-y":h.value.y,config:w(x)},null,8,["base-x","base-y","config"]),Ue(qt,{text:Object.keys(e.edges).length.toString(),x:h.value.x,y:h.value.y,config:w(v),"text-anchor":"middle","dominant-baseline":"central"},null,8,["text","x","y","config"])],34))}}),lv={class:"v-ng-edge-overlay"},Ho=F({__name:"VEdgeOverlay",props:{edgeId:{default:void 0},edge:{default:void 0},edges:{default:()=>({})},state:null,isSummarized:{type:Boolean}},setup(e){const t=e,{svg:n}=zn(),{scale:o}=we(),r=Ht();function i(){return t.isSummarized?I.values(r.summarized.stroke,t.edges):t.state.line.stroke}function a(u){return{source:u.p1,target:u.p2}}function s(u){if(u.curve)return u.curve.center;{const h=u.origin.p1,d=u.origin.p2;return{x:(h.x+d.x)/2,y:(h.y+d.y)/2}}}function l(){var u;if(!n.value)return 0;const h=(u=t.edgeId)!=null?u:Object.keys(t.edges)[0],d=n.value.querySelector(`path[data-edge-id="${h}"]`);return d?d.getTotalLength():0}function c(u){var h;if(!n.value||!isFinite(u))return t.state.position.p1;t.state;const d=(h=t.edgeId)!=null?h:Object.keys(t.edges)[0],v=n.value.querySelector(`path[data-edge-id="${d}"]`);if(!v)return t.state.position.p1;const x=v.getPointAtLength(u);return{x:x.x,y:x.y}}return(u,h)=>(O(),A("g",lv,[e.isSummarized?K(u.$slots,"default",{key:0,edges:e.edges,isSummarized:e.isSummarized,stroke:i(),position:a(e.state.origin),center:s(e.state),hovered:e.state.hovered,selected:e.state.selected,scale:w(o),length:l(),pointAtLength:c}):K(u.$slots,"default",{key:1,edgeId:e.edgeId,edge:e.edge,edges:{[e.edgeId]:e.edge},isSummarized:e.isSummarized,stroke:i(),position:a(e.state.origin),center:s(e.state),hovered:e.state.hovered,selected:e.state.selected,scale:w(o),length:l(),pointAtLength:c})]))}}),uv=F({__name:"VEdgeGroups",props:{hasEdgeOverlaySlot:{type:Boolean}},setup(e){const{edgeStates:t,edgeZOrderedList:n,layouts:o}=Te();return(r,i)=>(O(!0),A(q,null,te(w(n),a=>(O(),A(q,null,[w(zc)(a)?(O(),A(q,{key:0},[(O(),H(sv,{key:a.key,edges:a.group.edges,layouts:w(o).nodes},null,8,["edges","layouts"])),e.hasEdgeOverlaySlot?(O(),H(Ho,{key:a.key,edges:a.group.edges,state:w(t)[Object.keys(a.group.edges)[0]],"is-summarized":!0},{default:oe(s=>[K(r.$slots,"default",he(fe(s)))]),_:2},1032,["edges","state"])):ve("",!0)],64)):(O(),A(q,{key:1},[(O(),H(tv,{id:a.key,key:a.key,state:w(t)[a.key],"source-pos":w(o).nodes[a.edge.source],"target-pos":w(o).nodes[a.edge.target]},null,8,["id","state","source-pos","target-pos"])),e.hasEdgeOverlaySlot?(O(),H(Ho,{key:a.key,"edge-id":a.key,edge:a.edge,state:w(t)[a.key],"is-summarized":!1},{default:oe(s=>[K(r.$slots,"default",he(fe(s)))]),_:2},1032,["edge-id","edge","state"])):ve("",!0)],64))],64))),256))}}),cv={class:"v-ng-layer-edges"},dv=F({__name:"VEdgesLayer",setup(e){const t=Nt(),n=M(()=>"edge-overlay"in t);return(o,r)=>(O(),A("g",cv,[Ue(Xd),Ue(uv,{"has-edge-overlay-slot":w(n)},En({_:2},[w(n)?{name:"default",fn:oe(i=>[K(o.$slots,"edge-overlay",he(fe(i)))]),key:"0"}:void 0]),1032,["has-edge-overlay-slot"])]))}}),vv=F({__name:"VEdgeLabelPlace",props:{edgeId:null,edge:null,state:null},setup(e){const t=e,{scale:n}=we(),o=M(()=>Mr(t.state.labelPosition,t.state.line.stroke,t.state.label.margin,t.state.label.padding,n.value));return(r,i)=>e.state.loop?ve("",!0):K(r.$slots,"default",{key:0,edgeId:e.edgeId,edge:e.edge,config:e.state.label,area:w(o),hovered:e.state.hovered,selected:e.state.selected,scale:w(n)})}}),hv=F({__name:"VEdgeLabelsPlace",props:{edges:null,state:null,summarizeState:null},setup(e){const t=e,{scale:n}=we(),o=M(()=>{var r,i;return Mr(t.state.labelPosition,(i=(r=t.summarizeState)==null?void 0:r.stroke)!=null?i:t.state.line.stroke,t.state.label.margin,t.state.label.padding,n.value)});return(r,i)=>e.state.loop?ve("",!0):K(r.$slots,"default",{key:0,edges:e.edges,config:e.state.label,area:w(o),hovered:e.state.hovered,selected:e.state.selected,scale:w(n)})}}),fv={class:"v-ng-edge-labels"},pv=F({__name:"VEdgeLabels",props:{enableEdgeLabel:{type:Boolean,default:!1},enableEdgesLabel:{type:Boolean,default:!1}},setup(e){const{edgeStates:t,edgeGroupStates:n,summarizedEdgeStates:o}=Te(),r=M(()=>{const a={},s={};return Object.entries(n.edgeGroups).forEach(([l,c])=>{Object.keys(c.edges).length>0&&(c.summarize?s[l]=c:a[l]=c)}),{individual:a,summarized:s}});function i(a){return Object.keys(a.edges)[0]}return(a,s)=>(O(),A("g",fv,[e.enableEdgeLabel?(O(!0),A(q,{key:0},te(w(r).individual,(l,c)=>(O(),A(q,{key:c},[(O(!0),A(q,null,te(l.edges,(u,h)=>(O(),H(vv,{key:h,"edge-id":h,edge:u,state:w(t)[h]},{default:oe(d=>[K(a.$slots,"edge-label",he(fe(d)))]),_:2},1032,["edge-id","edge","state"]))),128))],64))),128)):ve("",!0),e.enableEdgesLabel?(O(!0),A(q,{key:1},te(w(r).summarized,(l,c)=>(O(),H(hv,{key:c,edges:l.edges,state:w(t)[i(l)],"summarize-state":w(o)[i(l)]},{default:oe(u=>[K(a.$slots,"edges-label",he(fe(u)))]),_:2},1032,["edges","state","summarize-state"]))),128)):ve("",!0)]))}}),gv=F({__name:"VEdgeLabelsLayer",props:{enableEdgeLabel:{type:Boolean,default:!1},enableEdgesLabel:{type:Boolean,default:!1}},setup(e){return(t,n)=>(O(),H(pv,{"enable-edge-label":e.enableEdgeLabel,"enable-edges-label":e.enableEdgesLabel,class:"v-ng-layer-edge-labels"},En({_:2},[e.enableEdgeLabel?{name:"edge-label",fn:oe(o=>[K(t.$slots,"edge-label",he(fe(o)))]),key:"0"}:void 0,e.enableEdgesLabel?{name:"edges-label",fn:oe(o=>[K(t.$slots,"edges-label",he(fe(o)))]),key:"1"}:void 0]),1032,["enable-edge-label","enable-edges-label"]))}}),mv=F({__name:"VNodeFocusRing",props:{id:null,state:null,pos:{default:void 0}},setup(e){const t=e,n=M(()=>{var a;return((a=t.pos)==null?void 0:a.x)||0}),o=M(()=>{var a;return((a=t.pos)==null?void 0:a.y)||0}),r=Vt(),i=Ce({});return ye(()=>{var a,s,l;const c=t.state.shape;if(c.type==="circle"){const u={type:"circle",radius:c.radius+((a=c.strokeWidth)!=null?a:0)/2+r.focusring.padding+r.focusring.width/2,color:"none",strokeWidth:r.focusring.width,strokeColor:r.focusring.color,strokeDasharray:r.focusring.dasharray};Object.assign(i,u)}else{const u={type:"rect",width:c.width+((s=c.strokeWidth)!=null?s:0)+r.focusring.padding*2+r.focusring.width,height:c.height+((l=c.strokeWidth)!=null?l:0)+r.focusring.padding*2+r.focusring.width,borderRadius:c.borderRadius>0?c.borderRadius+r.focusring.padding:0,color:"none",strokeWidth:r.focusring.width,strokeColor:r.focusring.color,strokeDasharray:r.focusring.dasharray};Object.assign(i,u)}}),(a,s)=>(O(),H(Gt,{class:"v-ng-node-focusring","base-x":w(n),"base-y":w(o),config:i},null,8,["base-x","base-y","config"]))}}),bv={class:"v-ng-layer-nodes-selections"},yv=F({__name:"VFocusringLayer",setup(e){const{nodeStates:t}=Te(),{selectedNodes:n}=kd(),o=Vn();return(r,i)=>(O(),A("g",bv,[(O(!0),A(q,null,te(w(n),a=>(O(),H(mv,{id:a,key:a,state:w(t)[a],pos:w(o).nodes[a]},null,8,["id","state","pos"]))),128))]))}}),wv=["transform"],Fo=F({__name:"VNode",props:{id:null,state:null,pos:{default:void 0}},setup(e){const t=e,n=M(()=>{var h;return((h=t.pos)==null?void 0:h.x)||0}),o=M(()=>{var h;return((h=t.pos)==null?void 0:h.y)||0}),{scale:r}=we(),{handleNodePointerDownEvent:i,handleNodePointerOverEvent:a,handleNodePointerOutEvent:s,handleNodeClickEvent:l,handleNodeDoubleClickEvent:c,handleNodeContextMenu:u}=Et();return(h,d)=>(O(),A("g",{class:me({"v-ng-node":!0,hover:e.state.hovered,selected:e.state.selected}),transform:`translate(${w(n)} ${w(o)})`,onPointerdown:d[0]||(d[0]=Se(v=>w(i)(e.id,v),["stop"])),onPointerenterPassive:d[1]||(d[1]=v=>w(a)(e.id,v)),onPointerleavePassive:d[2]||(d[2]=v=>w(s)(e.id,v)),onClick:d[3]||(d[3]=Se(v=>w(l)(e.id,v),["stop"])),onDblclick:d[4]||(d[4]=Se(v=>w(c)(e.id,v),["stop"])),onContextmenu:d[5]||(d[5]=v=>w(u)(e.id,v))},[K(h.$slots,"override-node",{nodeId:e.id,scale:w(r),config:e.state.shape,class:me({draggable:e.state.draggable,selectable:e.state.selectable})},()=>[Ue(Gt,{config:e.state.shape,class:me({"v-ng-node-default":!0,draggable:e.state.draggable,selectable:e.state.selectable})},null,8,["config","class"])])],42,wv))}}),xv=F({__name:"VNodesLayer",setup(e){const t=Nt(),n=M(()=>"override-node"in t),{nodeZOrderedList:o}=Te(),r=Vt(),i=Vn();return(a,s)=>w(n)?(O(),H(ht,{key:0,name:w(r).transition,css:!!w(r).transition,tag:"g",class:"v-ng-layer-nodes"},{default:oe(()=>[(O(!0),A(q,null,te(w(o),l=>(O(),H(Fo,{id:l.id,key:l.id,state:l,pos:w(i).nodes[l.id]},{"override-node":oe(c=>[K(a.$slots,"override-node",he(fe(c)))]),_:2},1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(O(),H(ht,{key:1,name:w(r).transition,css:!!w(r).transition,tag:"g",class:"v-ng-layer-nodes"},{default:oe(()=>[(O(!0),A(q,null,te(w(o),l=>(O(),H(Fo,{id:l.id,key:l.id,state:l,pos:w(i).nodes[l.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"]))}}),Fr={[N.NORTH]:0,[N.NORTH_EAST]:1,[N.EAST]:2,[N.SOUTH_EAST]:3,[N.SOUTH]:4,[N.SOUTH_WEST]:5,[N.WEST]:6,[N.NORTH_WEST]:7,[N.CENTER]:-1},Ev=[(e,t)=>Ae(e,0,t?90:60),(e,t)=>Ae(e,45,t?90:45),(e,t)=>Ae(e,90,t?60:30),(e,t)=>Ae(e,135,t?90:45),(e,t)=>Ae(e,180,t?90:60),(e,t)=>Ae(e,225,t?90:45),(e,t)=>Ae(e,270,t?60:30),(e,t)=>Ae(e,315,t?90:45)];function Sv(e,t,n,o,r){if(r===N.CENTER)return N.CENTER;const i=[];Object.entries(n).forEach(([l,c])=>{let u=!1;if(c.nodeId===e){const d=o(l);d&&(u=!0,c=Dt(ue({},c),{pos:{x:d.x,y:d.y}}))}const h=(Zn(In(c.pos,t))+360+90)%360;i.push([h,u])});const a=Pv(r),s=[a,(a+4)%8,(a+2)%8,(a-2+8)%8,(a+1)%8,(a-1+8)%8,(a+3)%8,(a-3+8)%8].find(l=>i.every(c=>!Ev[l](...c)));return s===void 0?r:kv(s,r)}function Ae(e,t,n){e%=360;const o=(t-n+360)%360,r=(t+n)%360;return o<=r?o<e&&e<r:o<e||e<r}function Pv(e){var t;return(t=Fr[e])!=null?t:0}function kv(e,t){var n,o;return(o=(n=Object.entries(Fr)[e])==null?void 0:n[0])!=null?o:t}const Ov=["transform"],Uo=F({__name:"VNodeLabel",props:{id:null,state:null,pos:{default:void 0}},setup(e){const t=e,n=Vt(),{edgeStates:o}=Te(),{scale:r}=we(),{handleNodePointerDownEvent:i,handleNodePointerOverEvent:a,handleNodePointerOutEvent:s,handleNodeClickEvent:l,handleNodeDoubleClickEvent:c,handleNodeContextMenu:u}=Et(),h=M(()=>{var _;return((_=t.pos)==null?void 0:_.x)||0}),d=M(()=>{var _;return((_=t.pos)==null?void 0:_.y)||0}),v=M(()=>t.state.label.direction===N.CENTER?0:t.state.label.margin*r.value),x=Z(0),E=Z(0),S=Z(0),g=Z(0),m=M(()=>{var _;const z=t.state.label.direction,$=t.state.label.directionAutoAdjustment;if($===!1)return z;const R={x:h.value,y:d.value};return $===!0?Sv(t.state.id,R,t.state.oppositeNodes,Y=>{var B,W;return(W=(B=o[Y])==null?void 0:B.loop)==null?void 0:W.center},z):(_=$({nodeId:t.state.id,pos:R,oppositeNodes:t.state.oppositeNodes}))!=null?_:z}),b=M(()=>{switch(m.value){case N.CENTER:case N.NORTH:case N.SOUTH:return"middle";case N.EAST:case N.NORTH_EAST:case N.SOUTH_EAST:return"start";case N.WEST:case N.NORTH_WEST:case N.SOUTH_WEST:default:return"end"}}),y=M(()=>{switch(m.value){case N.NORTH:case N.NORTH_EAST:case N.NORTH_WEST:return"text-top";case N.SOUTH:case N.SOUTH_EAST:case N.SOUTH_WEST:return"hanging";case N.CENTER:case N.EAST:case N.WEST:default:return"central"}}),f=M(()=>{switch(m.value){case N.CENTER:case N.NORTH:case N.SOUTH:return 0;case N.EAST:return E.value;case N.WEST:return-E.value;case N.NORTH_EAST:case N.SOUTH_EAST:return g.value;case N.NORTH_WEST:case N.SOUTH_WEST:default:return-g.value}}),p=M(()=>{switch(m.value){case N.NORTH:return-x.value;case N.SOUTH:return x.value;case N.CENTER:case N.EAST:case N.WEST:return 0;case N.NORTH_EAST:case N.NORTH_WEST:return-S.value;case N.SOUTH_EAST:case N.SOUTH_WEST:default:return S.value}});ye(()=>{const _=r.value,z=t.state.shape;if(z.type=="circle"){const $=z.radius*_,R=$+v.value,Y=Math.sqrt(ce(R,2)/2);x.value=$+v.value,E.value=$+v.value,S.value=Y,g.value=Y}else{const $=z.borderRadius*_,R=z.width*_,Y=z.height*_,B=$+v.value,W=Math.sqrt(ce(B,2)/2);x.value=Y/2+v.value,E.value=R/2+v.value,S.value=Y/2-$+W,g.value=R/2-$+W}});const k=M(()=>_=>n.label.handleNodeEvents?{pointerdown:z=>{z.stopPropagation(),i(_,z)},pointerenter:z=>a(_,z),pointerleave:z=>s(_,z),click:z=>{z.stopPropagation(),l(_,z)},dblclick:z=>{z.stopPropagation(),c(_,z)},contextmenu:z=>{u(_,z)}}:{}),T=M(()=>{const _=n.label.handleNodeEvents;return{"v-ng-node-label":!0,hover:_&&t.state.hovered,selected:_&&t.state.selected}}),C=M(()=>{const _=n.label.handleNodeEvents;return{draggable:_&&t.state.draggable,selectable:_&&t.state.selectable}});return(_,z)=>(O(),A("g",ke({class:w(T),transform:`translate(${w(h)} ${w(d)})`},gi(w(k)(e.id),!0)),[K(_.$slots,"override-node-label",{nodeId:e.id,scale:w(r),text:e.state.labelText,x:w(f),y:w(p),config:e.state.label,shape:e.state.shape,textAnchor:w(b),dominantBaseline:w(y),class:me(w(C))},()=>[Ue(qt,{text:e.state.labelText,x:0,y:0,config:e.state.label,"text-anchor":w(b),"dominant-baseline":w(y),class:me(w(C)),transform:`translate(${w(f)} ${w(p)})`},null,8,["text","config","text-anchor","dominant-baseline","class","transform"])])],16,Ov))}}),Tv=F({__name:"VNodeLabelsLayer",setup(e){const t=Nt(),n=M(()=>"override-node-label"in t),{nodeZOrderedList:o}=Te(),r=Vt(),i=Vn(),a=M(()=>s(o.value));function s(l){return l.filter(c=>{var u;return c.label.visible&&((u=c.labelText)!=null?u:!1)})}return(l,c)=>w(n)?(O(),H(ht,{key:0,name:w(r).transition,css:!!w(r).transition,tag:"g",class:"v-ng-layer-node-labels"},{default:oe(()=>[(O(!0),A(q,null,te(w(a),u=>(O(),H(Uo,{id:u.id,key:u.id,state:u,pos:w(i).nodes[u.id]},{"override-node-label":oe(h=>[K(l.$slots,"override-node-label",he(fe(h)))]),_:2},1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(O(),H(ht,{key:1,name:w(r).transition,css:!!w(r).transition,tag:"g",class:"v-ng-layer-node-labels"},{default:oe(()=>[(O(!0),A(q,null,te(w(a),u=>(O(),H(Uo,{id:u.id,key:u.id,state:u,pos:w(i).nodes[u.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"]))}}),Mv=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","stroke-linejoin"],_v=F({__name:"VPath",props:{path:null},setup(e){const t=e,{nodeStates:n,edgeStates:o,layouts:r}=Te(),{scale:i}=we(),a=wr();function s(d){if(d.edges.length===0)return[];const v=I.value(a.margin,d.path)*i.value;return yc(d,n,r.nodes,o,i.value,a.curveInNode,a.end,v)}function l(d){const v=s(d);let x=!0;return v.map(E=>{if(E===null)x=!0;else{if(typeof E=="string")return E;if(E instanceof Array){E=[...E];const S=[];if(E.length%2===1){const g=E[0];E=E.slice(1),S.push(`L ${g.x} ${g.y}`)}return Mn(E,2).map(([g,m])=>S.push(`Q ${g.x} ${g.y} ${m.x} ${m.y}`)),S.join(" ")}else{const S=x;return x=!1,`${S?"M ":"L "}${E.x} ${E.y}`}}}).join(" ")}const c=M(()=>{const d=t.path;return d.selected?I.values(a.selected,d.path):d.hovered&&a.hover?I.values(a.hover,d.path):I.values(a.normal,d.path)}),u=M(()=>xt(c.value.dasharray,i.value)),h=M(()=>{const d=c.value.animate?Rt(c.value.dasharray)*c.value.animationSpeed*i.value:!1;return d?{"--animation-speed":d}:void 0});return(d,v)=>(O(),A("path",{class:me({"v-ng-path":!0,animate:w(c).animate,clickable:e.path.clickable,hoverable:e.path.hoverable}),d:l(e.path),fill:"none",stroke:w(c).color,"stroke-width":w(c).width*w(i),"stroke-dasharray":w(u),"stroke-linecap":w(c).linecap,"stroke-linejoin":w(c).linejoin,style:yt(w(h))},null,14,Mv))}}),Cv=F({__name:"VPaths",setup(e){const{pathZOrderedList:t}=Te(),n=wr(),{handlePathPointerDownEvent:o,handlePathPointerOverEvent:r,handlePathPointerOutEvent:i,handlePathClickEvent:a,handlePathDoubleClickEvent:s,handlePathContextMenu:l}=Et();return(c,u)=>(O(),H(ht,{name:w(n).transition,css:!!w(n).transition,tag:"g",class:"v-ng-paths"},{default:oe(()=>[(O(!0),A(q,null,te(w(t),h=>(O(),H(_v,{key:h.id,path:h,onPointerdown:d=>w(o)(h.id,d),onPointerenterPassive:d=>w(r)(h.id,d),onPointerleavePassive:d=>w(i)(h.id,d),onClick:Se(d=>w(a)(h.id,d),["stop"]),onDblclick:Se(d=>w(s)(h.id,d),["stop"]),onContextmenu:d=>w(l)(h.id,d)},null,8,["path","onPointerdown","onPointerenterPassive","onPointerleavePassive","onClick","onDblclick","onContextmenu"]))),128))]),_:1},8,["name","css"]))}}),zv=F({__name:"VPathsLayer",setup(e){return(t,n)=>(O(),H(Cv))}}),Iv={key:0},Av=F({__name:"VNetworkGraph",props:{nodes:{default:()=>({})},edges:{default:()=>({})},paths:{default:()=>({})},layouts:{default:()=>({})},zoomLevel:{default:1},selectedNodes:{default:()=>[]},selectedEdges:{default:()=>[]},selectedPaths:{default:()=>[]},configs:{default:()=>({})},layers:{default:()=>({})},eventHandlers:{default:()=>({})}},emits:["update:zoomLevel","update:selectedNodes","update:selectedEdges","update:selectedPaths","update:layouts"],setup(e,{expose:t,emit:n}){const o=e,r=["override-node","override-node-label","edge-overlay","edge-label","edges-label"],i=Nt(),a=Me(o,"nodes"),s=Me(o,"edges"),{objects:l,isInCompatibilityModeForPath:c}=Ed(Me(o,"paths")),u=nd();Object.entries(o.eventHandlers).forEach(([P,j])=>{u.on(P,j)});const h=ec(Me(o,"configs")),d=M(()=>{const P=new Set(Object.keys(i));r.forEach(L=>P.delete(L));const j=Object.fromEntries(qu.map(L=>[L,[]]));return Object.assign(j,Object.entries(o.layers).reduce((L,[D,ae])=>(P.delete(D),ae in L?L[ae].push(D):L[ae]=[D],L),{})),j.root.push(...P),j}),v=M(()=>h.view.grid.visible),x=M(()=>{const P=d.value;return v.value||P.background.length>0||P.grid.length>0}),E=_d(h,i),S=Z(),g=Z(),m=Z(),b=Z(0),y=M(()=>b.value!==0),f=Sd(o,"zoomLevel",n,P=>(P=Math.max(P,h.view.minZoomLevel),P=Math.min(P,h.view.maxZoomLevel),P)),{svgPanZoom:p,onSvgPanZoomMounted:k,onSvgPanZoomUnmounted:T}=bd(g,{viewportSelector:".v-ng-viewport",minZoom:h.view.minZoomLevel,maxZoom:h.view.maxZoomLevel,dblClickZoomEnabled:qn(h.view),mouseWheelZoomEnabled:Kt(h.view),fit:h.view.autoPanAndZoomOnLoad==="fit-content",center:h.view.autoPanAndZoomOnLoad!==!1,zoomEnabled:h.view.zoomEnabled,preventMouseEventsDefault:!1,onZoom:P=>{var j,L;if(b.value===2)return;const D=(L=(j=p.value)==null?void 0:j.getRealZoom())!=null?L:1;Math.abs(f.value-D)>=1e-6&&(f.value=D,u.emit("view:zoom",D))},panEnabled:h.view.panEnabled,onPan:P=>{b.value!==2&&u.emit("view:pan",P)}});Xu({container:S,svg:g,viewport:m,svgPanZoom:p});const C={width:0,height:0},_=globalThis.ResizeObserver?new ResizeObserver(()=>{var P,j,L;if((P=p.value)==null||P.resize(),!h.view.autoPanOnResize)return;const D=(j=S.value)==null?void 0:j.getBoundingClientRect();if(D){const ae=-(C.width-D.width)/2,Jt=-(C.height-D.height)/2;(L=p.value)==null||L.panBy({x:ae,y:Jt});const{width:at,height:Qt}=D;(C.width!==at||C.height!==Qt)&&(Object.assign(C,{width:at,height:Qt}),u.emit("view:resize",{x:D.x,y:D.y,width:at,height:Qt}))}}):void 0;k(()=>{var P,j,L;const D=X(S.value,"svg-pan-zoom container");_==null||_.observe(D),(j=(P=h.view).onSvgPanZoomInitialized)==null||j.call(P,X(p.value,"svg-pan-zoom instance"));const ae=D.getBoundingClientRect(),{width:Jt,height:at}=ae;Object.assign(C,{width:Jt,height:at}),(L=m.value)==null||L.addEventListener("touchstart",Xn,{passive:!1})}),T(()=>{var P;_==null||_.disconnect(),(P=m.value)==null||P.removeEventListener("touchstart",Xn)});const z=P=>{var j;(j=p.value)==null||j.applyAbsoluteZoomLevel(P,h.view.minZoomLevel,h.view.maxZoomLevel)};U(()=>h.view.panEnabled,P=>{var j;(j=p.value)==null||j.setPanEnabled(P)}),U(()=>[h.view.zoomEnabled,qn(h.view),Kt(h.view)],()=>{const P=p.value;P&&vi(P,h.view.zoomEnabled,h.view.doubleClickZoomEnabled,h.view.mouseWheelZoomEnabled)}),U(f,P=>z(P)),U(()=>[h.view.minZoomLevel,h.view.maxZoomLevel],P=>{z(f.value)});const{scale:$}=yd(f,h.view);k(()=>{const P=o.zoomLevel;z(P)});const R=()=>Pe(this,null,function*(){var P;Object.keys(o.nodes).length>0&&((P=p.value)==null||P.updateBBox(),yield Vo())}),Y=()=>Pe(this,null,function*(){yield R(),p.value&&(p.value.fitToContents(),u.emit("view:fit",void 0))}),B=()=>Pe(this,null,function*(){var P;yield R(),(P=p.value)==null||P.center()}),W=()=>{var P,j;return(j=(P=p.value)==null?void 0:P.getViewBox())!=null?j:{top:0,bottom:0,left:0,right:0}},ie=P=>{var j;return(j=p.value)==null?void 0:j.setViewBox(P)},ee=un(o,"selectedNodes",a,n);U(ee,P=>u.emit("node:select",Array.from(P)));const le=un(o,"selectedEdges",s,n);U(le,P=>u.emit("edge:select",Array.from(P)));const Ve=un(o,"selectedPaths",l,n);U(Ve,P=>u.emit("path:select",Array.from(P))),Pd(ee,le,Ve);const de=Le(new Set),Qe=Le(new Set),et=Le(new Set),Ie=Le({nodes:{}});Od(Ie),U(()=>o.layouts,()=>Object.assign(Ie,o.layouts),{deep:!0,immediate:!0}),U(Ie,()=>n("update:layouts",Ie),{deep:!0});const Xt=kc(),Yt=Z(!1);u.on("node:dragstart",P=>Yt.value=!0),u.on("node:dragend",P=>Yt.value=!1),u.on("view:mode",P=>{var j,L,D,ae;h.view.panEnabled&&(P==="default"?(j=p.value)==null||j.enablePan():(L=p.value)==null||L.disablePan()),h.view.zoomEnabled&&(P==="default"?(D=p.value)==null||D.enableZoom():(ae=p.value)==null||ae.disableZoom())});const Ur=M(()=>h.view.panEnabled||h.view.zoomEnabled||h.node.draggable),{nodeStates:Gr,edgeStates:qr,pathStates:Xr}=Cc(sn(a,ee,de),sn(s,le,Qe),sn(l,Ve,et),st(h),Ie,Xt,$),Yr=M(()=>Kt(h.view)),{isBoxSelectionMode:Kr,selectionBox:Hn,startBoxSelection:Jr,stopBoxSelection:Qr}=ed(g,st(Ie),st(f),Gr,qr,Xr,ee,le,Ve,de,Qe,et,c,Yr,h,u),Fn=()=>({layouts:Le(Ie.nodes),nodePositions:Me(Ie,"nodes"),nodes:a,edges:s,configs:st(h),scale:st($),emitter:u,svgPanZoom:X(p.value)});U(()=>h.view.layoutHandler,(P,j)=>{j.deactivate(),P.activate(Fn())});const{transitionWhile:ei,transitionOption:Un}=xd(),ti=M(()=>{const P=Un.value;return P.enabled?{"--transition-duration":P.duration+"ms","--transition-function":P.timingFunction}:{}});k(()=>Pe(this,null,function*(){if(h.view.onBeforeInitialDisplay){const L=h.view.onBeforeInitialDisplay();rc(L)&&(yield L)}const P=X(p.value,"svg-pan-zoom");h.view.layoutHandler.activate(Fn()),yield Vo();const j=h.view.autoPanAndZoomOnLoad;if(h.view.fit||j!==!1){const L=Object.keys(o.nodes).length==0,D=P.getPan();if(L||j==="center-zero"){yield R();const ae=P.getSizes();P.pan({x:ae.width/2,y:ae.height/2})}else j==="fit-content"||h.view.fit?yield Y():j==="center-content"?yield B():yield R();Sn(()=>{const ae=P.getPan();D.x===ae.x&&D.y===ae.y&&u.emit("view:pan",ae)})}else yield R();u.emit("view:load"),b.value=1})),T(()=>{b.value=2,u.emit("view:unload"),h.view.layoutHandler.deactivate()});function ni(){var P;(P=p.value)==null||P.zoomIn()}function oi(){var P;(P=p.value)==null||P.zoomOut()}function ri(P){var j;(j=p.value)==null||j.pan(P)}function ii(P){var j;(j=p.value)==null||j.panBy(P)}function ai(){return X(p.value).getPan()}function si(){const P=X(p.value).getSizes();return{width:P.width,height:P.height,viewBox:P.viewBox}}function li(P){return wn(X(g.value,"svg"),X(m.value,"viewport"),P)}function ui(P){return Gc(X(g.value,"svg"),X(m.value,"viewport"),P)}function ci(){return $r(X(g.value,"svg"),X(m.value,"viewport"),$.value).outerHTML}function di(){return Pe(this,arguments,function*(P={}){return(yield Gn(P)).outerHTML})}function Gn(){return Pe(this,arguments,function*(P={}){return Xc(X(g.value,"svg"),X(m.value,"viewport"),$.value,P)})}t({fitToContents:Y,panToCenter:B,getViewBox:W,setViewBox:ie,transitionWhile:ei,startBoxSelection:Jr,stopBoxSelection:Qr,zoomIn:ni,zoomOut:oi,panTo:ri,panBy:ii,getPan:ai,getSizes:si,translateFromDomToSvgCoordinates:li,translateFromSvgToDomCoordinates:ui,getAsSvg:ci,exportAsSvgText:di,exportAsSvgElement:Gn});function vi(P,j,L,D){P.setZoomEnabled(j),j&&L?P.enableDblClickZoom():P.disableDblClickZoom(),j&&D?P.enableMouseWheelZoom():P.disableMouseWheelZoom()}function qn(P){return P.zoomEnabled&&P.doubleClickZoomEnabled}function Kt(P){return P.zoomEnabled&&P.mouseWheelZoomEnabled}function Xn(P){P.stopPropagation()}return(P,j)=>(O(),A("div",{ref_key:"container",ref:S,class:"v-network-graph v-ng-container"},[(O(),A("svg",{ref_key:"svg",ref:g,class:me(["v-ng-canvas",{show:w(y),dragging:Yt.value,touches:w(Ur),"box-selection-mode":w(Kr)}]),width:"100%",height:"100%"},[(O(!0),A(q,null,te(w(d).root,L=>K(P.$slots,L,{key:L,scale:w($)})),128)),Object.keys(w(Xt).markers).length>0?(O(),A("defs",Iv,[(O(!0),A(q,null,te(w(Xt).markers,(L,D)=>(O(),H(Bd,{id:D,key:D,marker:L,scale:w($)},null,8,["id","marker","scale"]))),128))])):ve("",!0),w(x)?(O(),H(Ud,{key:1},{default:oe(()=>[(O(!0),A(q,null,te(w(d).background,L=>(O(),A("g",{key:L,class:"v-ng-layer"},[K(P.$slots,L,{scale:w($)})]))),128)),w(v)?(O(),H(Fd,{key:0})):ve("",!0),(O(!0),A(q,null,te(w(d).grid,L=>(O(),A("g",{key:L,class:"v-ng-layer"},[K(P.$slots,L,{scale:w($)})]))),128))]),_:3})):ve("",!0),Go("g",{ref_key:"viewport",ref:m,class:me(["v-ng-viewport",{"v-ng-transition":w(Un).enabled}]),style:yt(w(ti))},[(O(!0),A(q,null,te(w(d).base,L=>(O(),A("g",{key:L,class:"v-ng-layer"},[K(P.$slots,L,{scale:w($)})]))),128)),(O(!0),A(q,null,te(w(E),L=>(O(),A(q,{key:L},[L==="edges"?(O(),H(dv,{key:0},En({_:2},["edge-overlay"in w(i)?{name:"edge-overlay",fn:oe(D=>[K(P.$slots,"edge-overlay",he(fe(D)))]),key:"0"}:void 0]),1024)):L==="edge-labels"?(O(),H(gv,{key:1,"enable-edge-label":"edge-label"in w(i),"enable-edges-label":"edges-label"in w(i)},{"edge-label":oe(D=>[K(P.$slots,"edge-label",he(fe(D)))]),"edges-label":oe(D=>[K(P.$slots,"edges-label",he(fe(D)))]),_:3},8,["enable-edge-label","enable-edges-label"])):L==="focusring"?(O(),H(yv,{key:2})):L==="nodes"?(O(),H(xv,{key:3},{"override-node":oe(D=>[K(P.$slots,"override-node",he(fe(D)))]),_:3})):L==="node-labels"?(O(),H(Tv,{key:4},{"override-node-label":oe(D=>[K(P.$slots,"override-node-label",he(fe(D)))]),_:3})):L==="paths"?(O(),H(zv,{key:5})):ve("",!0),(O(!0),A(q,null,te(w(d)[L],D=>(O(),A("g",{key:D,class:"v-ng-layer"},[K(P.$slots,D,{scale:w($)})]))),128))],64))),128))],6),w(Hn)?(O(),H(zd,{key:2,box:w(Hn),config:w(h).view.selection.box},null,8,["box","config"])):ve("",!0)],2))],512))}}),$v=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},Lv={};function Nv(e,t){return O(),A("defs",null,[(O(),H(qo("style"),null,{default:oe(()=>[K(e.$slots,"default")]),_:3}))])}const jv=$v(Lv,[["render",Nv]]),Zv=F({__name:"VEdgeLabel",props:{area:null,config:null,text:{default:""},align:{default:"center"},verticalAlign:{default:"center"},edge:{default:void 0},hovered:{type:Boolean,default:void 0},selected:{type:Boolean,default:void 0},scale:{default:void 0}},setup(e){const t=e,n=Z(0),o=Z(0),r=Z("middle"),i=Z("central"),a=Z(0);ye(()=>{const l=t.area.source,c=t.area.target;t.align==="source"?(l.above.x==c.above.x?r.value=l.above.y>c.above.y?"start":"end":r.value=l.above.x<c.above.x?"start":"end",t.verticalAlign==="above"?(n.value=l.above.x,o.value=l.above.y,i.value="text-top"):t.verticalAlign==="below"?(n.value=l.below.x,o.value=l.below.y,i.value="hanging"):(n.value=(l.above.x+l.below.x)/2,o.value=(l.above.y+l.below.y)/2,i.value="central")):t.align==="target"?(l.above.x==c.above.x?r.value=l.above.y<c.above.y?"start":"end":r.value=l.above.x>c.above.x?"start":"end",t.verticalAlign==="above"?(n.value=c.above.x,o.value=c.above.y,i.value="text-top"):t.verticalAlign==="below"?(n.value=c.below.x,o.value=c.below.y,i.value="hanging"):(n.value=(c.above.x+c.below.x)/2,o.value=(c.above.y+c.below.y)/2,i.value="central")):(r.value="middle",t.verticalAlign==="above"?(n.value=(l.above.x+c.above.x)/2,o.value=(l.above.y+c.above.y)/2,i.value="text-top"):t.verticalAlign==="below"?(n.value=(l.below.x+c.below.x)/2,o.value=(l.below.y+c.below.y)/2,i.value="hanging"):(n.value=(l.above.x+c.below.x)/2,o.value=(l.above.y+c.below.y)/2,i.value="central"));let u=Q.fromPositions(l.above,c.above).v.angleDegree();(u<-90||u>=90)&&(u=u+180,u>180&&(u-=360)),a.value=u});const s=M(()=>i.value==="central"&&!t.config.background?Dt(ue({},t.config),{background:{visible:!0,color:"#ffffff",padding:{vertical:1,horizontal:4},borderRadius:2}}):t.config);return(l,c)=>(O(),H(qt,{class:"v-ng-edge-label",text:e.text,x:n.value,y:o.value,config:w(s),"text-anchor":r.value,"dominant-baseline":i.value,transform:`rotate(${a.value} ${n.value} ${o.value})`},null,8,["text","x","y","config","text-anchor","dominant-baseline","transform"]))}}),Bv=Object.freeze(Object.defineProperty({__proto__:null,VEdgeLabel:Zv,VLabelText:qt,VNetworkGraph:Av,VShape:Gt,VStyle:jv},Symbol.toStringTag,{value:"Module"})),Wv=function(e){Object.entries(Bv).forEach(([t,n])=>{e.component(t,n)})};export{Rv as Z,Wv as _};
