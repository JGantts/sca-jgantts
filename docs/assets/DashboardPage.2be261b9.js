var pe=Object.defineProperty;var Ce=(e,r,i)=>r in e?pe(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i;var Q=(e,r,i)=>(Ce(e,typeof r!="symbol"?r+"":r,i),i);import{c as we,h as Se,f as _e}from"./QBtn.9f1986ab.js";import{i as fe,X as H,Y as Fe,a7 as Re,c as P,h as ee,g as xe,d as ce,m as V,F as N,y as Y,q as j,t as _,l as F,x as X,r as ne,w as U,P as G,ah as Ve,U as Ae,o as Ee,ai as Ie,a2 as he,ag as Pe,f as se,aj as Te,s as me,Q as Le,E as Oe,G as De}from"./index.0fc24f3f.js";import{u as ae}from"./languages-store.46b7cb7b.js";import{u as Ne,a as je,b as Ue,c as $e,d as Be,e as Ke,f as ge,g as We,h as qe}from"./use-key-composition.3158a684.js";import"./use-dark.889e49ee.js";var ze=we({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:r}){const{proxy:{$q:i}}=xe(),u=fe(Fe,H);if(u===H)return console.error("QPage needs to be a deep child of QLayout"),H;if(fe(Re,H)===H)return console.error("QPage needs to be child of QPageContainer"),H;const d=P(()=>{const x=(u.header.space===!0?u.header.size:0)+(u.footer.space===!0?u.footer.size:0);if(typeof e.styleFn=="function"){const R=u.isContainer.value===!0?u.containerHeight.value:i.screen.height;return e.styleFn(x,R)}return{minHeight:u.isContainer.value===!0?u.containerHeight.value-x+"px":i.screen.height===0?x!==0?`calc(100vh - ${x}px)`:"100vh":i.screen.height-x+"px"}}),v=P(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>ee("main",{class:v.value,style:d.value},Se(r.default))}});const ve=ae();function be(e){let r="";switch(e.kind){case"syllables":for(const i of e.syllables)r!==""&&(r+="."),r+=Ze(i);break;case"phones":r+=oe(e.phones);break}return r}function Ze(e){let r=oe(e.onset);return r+=oe(e.rhyme.nucleus),r+=oe(e.rhyme.coda),r}function oe(e){let r="";for(const i of e)r+=te(i);return r}function te(e){var r,i;return e==null||ve.languages==null?"":(i=(r=Object.values(ve.languages.data.phonemes).filter(u=>u.featureStops.every(s=>Qe(e,s)))[0])==null?void 0:r.IPA)!=null?i:"Error]"}function Qe(e,r){return e.features[r.categoryId]===r.stopId}const He=_("h2",null,"List of words:",-1),Ye=ce({__name:"LexemeListComponent",setup(e){const r=ae();return(i,u)=>{var s;return F(),V(N,null,[He,(F(!0),V(N,null,Y((s=j(r).languages)==null?void 0:s.data.words,d=>(F(),V("li",{key:d.id,class:"roman-medium"},X(j(be)(d.entryForm)),1))),128))],64)}}}),ke={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},ie={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Me=Object.keys(ie);Me.forEach(e=>{ie[e].regex=new RegExp(ie[e].pattern)});const Xe=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Me.join("")+"])|(.)","g"),ye=/[.*+?^${}()|[\]\\]/g,C=String.fromCharCode(1),Ge={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Je(e,r,i,u){let s,d,v,x,R,y;const w=ne(null),c=ne(p());function E(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}U(()=>e.type+e.autogrow,q),U(()=>e.mask,l=>{if(l!==void 0)B(c.value,!0);else{const n=T(c.value);q(),e.modelValue!==n&&r("update:modelValue",n)}}),U(()=>e.fillMask+e.reverseFillMask,()=>{w.value===!0&&B(c.value,!0)}),U(()=>e.unmaskedValue,()=>{w.value===!0&&B(c.value)});function p(){if(q(),w.value===!0){const l=z(T(e.modelValue));return e.fillMask!==!1?re(l):l}return e.modelValue}function $(l){if(l<s.length)return s.slice(-l);let n="",o=s;const a=o.indexOf(C);if(a>-1){for(let h=l-o.length;h>0;h--)n+=C;o=o.slice(0,a)+n+o.slice(a)}return o}function q(){if(w.value=e.mask!==void 0&&e.mask.length!==0&&E(),w.value===!1){x=void 0,s="",d="";return}const l=ke[e.mask]===void 0?e.mask:ke[e.mask],n=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",o=n.replace(ye,"\\$&"),a=[],h=[],f=[];let M=e.reverseFillMask===!0,m="",g="";l.replace(Xe,(S,t,b,O,L)=>{if(O!==void 0){const A=ie[O];f.push(A),g=A.negate,M===!0&&(h.push("(?:"+g+"+)?("+A.pattern+"+)?(?:"+g+"+)?("+A.pattern+"+)?"),M=!1),h.push("(?:"+g+"+)?("+A.pattern+")?")}else if(b!==void 0)m="\\"+(b==="\\"?"":b),f.push(b),a.push("([^"+m+"]+)?"+m+"?");else{const A=t!==void 0?t:L;m=A==="\\"?"\\\\\\\\":A.replace(ye,"\\\\$&"),f.push(A),a.push("([^"+m+"]+)?"+m+"?")}});const K=new RegExp("^"+a.join("")+"("+(m===""?".":"[^"+m+"]")+"+)?"+(m===""?"":"["+m+"]*")+"$"),W=h.length-1,k=h.map((S,t)=>t===0&&e.reverseFillMask===!0?new RegExp("^"+o+"*"+S):t===W?new RegExp("^"+S+"("+(g===""?".":g)+"+)?"+(e.reverseFillMask===!0?"$":o+"*")):new RegExp("^"+S));v=f,x=S=>{const t=K.exec(e.reverseFillMask===!0?S:S.slice(0,f.length+1));t!==null&&(S=t.slice(1).join(""));const b=[],O=k.length;for(let L=0,A=S;L<O;L++){const Z=k[L].exec(A);if(Z===null)break;A=A.slice(Z.shift().length),b.push(...Z)}return b.length!==0?b.join(""):S},s=f.map(S=>typeof S=="string"?S:C).join(""),d=s.split(C).join(n)}function B(l,n,o){const a=u.value,h=a.selectionEnd,f=a.value.length-h,M=T(l);n===!0&&q();const m=z(M),g=e.fillMask!==!1?re(m):m,K=c.value!==g;a.value!==g&&(a.value=g),K===!0&&(c.value=g),document.activeElement===a&&G(()=>{if(g===d){const k=e.reverseFillMask===!0?d.length:0;a.setSelectionRange(k,k,"forward");return}if(o==="insertFromPaste"&&e.reverseFillMask!==!0){const k=a.selectionEnd;let S=h-1;for(let t=R;t<=S&&t<k;t++)s[t]!==C&&S++;I.right(a,S);return}if(["deleteContentBackward","deleteContentForward"].indexOf(o)>-1){const k=e.reverseFillMask===!0?h===0?g.length>m.length?1:0:Math.max(0,g.length-(g===d?0:Math.min(m.length,f)+1))+1:h;a.setSelectionRange(k,k,"forward");return}if(e.reverseFillMask===!0)if(K===!0){const k=Math.max(0,g.length-(g===d?0:Math.min(m.length,f+1)));k===1&&h===1?a.setSelectionRange(k,k,"forward"):I.rightReverse(a,k)}else{const k=g.length-f;a.setSelectionRange(k,k,"backward")}else if(K===!0){const k=Math.max(0,s.indexOf(C),Math.min(m.length,h)-1);I.right(a,k)}else{const k=h-1;I.right(a,k)}});const W=e.unmaskedValue===!0?T(g):g;String(e.modelValue)!==W&&i(W,!0)}function ue(l,n,o){const a=z(T(l.value));n=Math.max(0,s.indexOf(C),Math.min(a.length,n)),R=n,l.setSelectionRange(n,o,"forward")}const I={left(l,n){const o=s.slice(n-1).indexOf(C)===-1;let a=Math.max(0,n-1);for(;a>=0;a--)if(s[a]===C){n=a,o===!0&&n++;break}if(a<0&&s[n]!==void 0&&s[n]!==C)return I.right(l,0);n>=0&&l.setSelectionRange(n,n,"backward")},right(l,n){const o=l.value.length;let a=Math.min(o,n+1);for(;a<=o;a++)if(s[a]===C){n=a;break}else s[a-1]===C&&(n=a);if(a>o&&s[n-1]!==void 0&&s[n-1]!==C)return I.left(l,o);l.setSelectionRange(n,n,"forward")},leftReverse(l,n){const o=$(l.value.length);let a=Math.max(0,n-1);for(;a>=0;a--)if(o[a-1]===C){n=a;break}else if(o[a]===C&&(n=a,a===0))break;if(a<0&&o[n]!==void 0&&o[n]!==C)return I.rightReverse(l,0);n>=0&&l.setSelectionRange(n,n,"backward")},rightReverse(l,n){const o=l.value.length,a=$(o),h=a.slice(0,n+1).indexOf(C)===-1;let f=Math.min(o,n+1);for(;f<=o;f++)if(a[f-1]===C){n=f,n>0&&h===!0&&n--;break}if(f>o&&a[n-1]!==void 0&&a[n-1]!==C)return I.leftReverse(l,o);l.setSelectionRange(n,n,"forward")}};function de(l){r("click",l),y=void 0}function le(l){if(r("keydown",l),Ve(l)===!0||l.altKey===!0)return;const n=u.value,o=n.selectionStart,a=n.selectionEnd;if(l.shiftKey||(y=void 0),l.keyCode===37||l.keyCode===39){l.shiftKey&&y===void 0&&(y=n.selectionDirection==="forward"?o:a);const h=I[(l.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(l.preventDefault(),h(n,y===o?a:o),l.shiftKey){const f=n.selectionStart;n.setSelectionRange(Math.min(y,f),Math.max(y,f),"forward")}}else l.keyCode===8&&e.reverseFillMask!==!0&&o===a?(I.left(n,o),n.setSelectionRange(n.selectionStart,a,"backward")):l.keyCode===46&&e.reverseFillMask===!0&&o===a&&(I.rightReverse(n,a),n.setSelectionRange(o,n.selectionEnd,"forward"))}function z(l){if(l==null||l==="")return"";if(e.reverseFillMask===!0)return D(l);const n=v;let o=0,a="";for(let h=0;h<n.length;h++){const f=l[o],M=n[h];if(typeof M=="string")a+=M,f===M&&o++;else if(f!==void 0&&M.regex.test(f))a+=M.transform!==void 0?M.transform(f):f,o++;else return a}return a}function D(l){const n=v,o=s.indexOf(C);let a=l.length-1,h="";for(let f=n.length-1;f>=0&&a>-1;f--){const M=n[f];let m=l[a];if(typeof M=="string")h=M+h,m===M&&a--;else if(m!==void 0&&M.regex.test(m))do h=(M.transform!==void 0?M.transform(m):m)+h,a--,m=l[a];while(o===f&&m!==void 0&&M.regex.test(m));else return h}return h}function T(l){return typeof l!="string"||x===void 0?typeof l=="number"?x(""+l):l:x(l)}function re(l){return d.length-l.length<=0?l:e.reverseFillMask===!0&&l.length!==0?d.slice(0,-l.length)+l:l+d.slice(l.length)}return{innerValue:c,hasMask:w,moveCursorForPaste:ue,updateMaskValue:B,onMaskedKeydown:le,onMaskedClick:de}}function et(e,r){function i(){const u=e.modelValue;try{const s="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(u)===u&&("length"in u?Array.from(u):[u]).forEach(d=>{s.items.add(d)}),{files:s.files}}catch{return{files:void 0}}}return r===!0?P(()=>{if(e.type==="file")return i()}):P(i)}var tt=we({name:"QInput",inheritAttrs:!1,props:{...Ne,...Ge,...je,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Ue,"paste","change","keydown","click","animationend"],setup(e,{emit:r,attrs:i}){const{proxy:u}=xe(),{$q:s}=u,d={};let v=NaN,x,R,y=null,w;const c=ne(null),E=$e(e),{innerValue:p,hasMask:$,moveCursorForPaste:q,updateMaskValue:B,onMaskedKeydown:ue,onMaskedClick:I}=Je(e,r,m,c),de=et(e,!0),le=P(()=>ge(p.value)),z=qe(f),D=Be(),T=P(()=>e.type==="textarea"||e.autogrow===!0),re=P(()=>T.value===!0||["text","search","url","tel","password"].includes(e.type)),l=P(()=>{const t={...D.splitAttrs.listeners.value,onInput:f,onPaste:h,onChange:K,onBlur:W,onFocus:he};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=z,$.value===!0&&(t.onKeydown=ue,t.onClick=I),e.autogrow===!0&&(t.onAnimationend=M),t}),n=P(()=>{const t={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:E.value,...D.splitAttrs.attributes.value,id:D.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return T.value===!1&&(t.type=e.type),e.autogrow===!0&&(t.rows=1),t});U(()=>e.type,()=>{c.value&&(c.value.value=e.modelValue)}),U(()=>e.modelValue,t=>{if($.value===!0){if(R===!0&&(R=!1,String(t)===v))return;B(t)}else p.value!==t&&(p.value=t,e.type==="number"&&d.hasOwnProperty("value")===!0&&(x===!0?x=!1:delete d.value));e.autogrow===!0&&G(g)}),U(()=>e.autogrow,t=>{t===!0?G(g):c.value!==null&&i.rows>0&&(c.value.style.height="auto")}),U(()=>e.dense,()=>{e.autogrow===!0&&G(g)});function o(){We(()=>{const t=document.activeElement;c.value!==null&&c.value!==t&&(t===null||t.id!==D.targetUid.value)&&c.value.focus({preventScroll:!0})})}function a(){c.value!==null&&c.value.select()}function h(t){if($.value===!0&&e.reverseFillMask!==!0){const b=t.target;q(b,b.selectionStart,b.selectionEnd)}r("paste",t)}function f(t){if(!t||!t.target)return;if(e.type==="file"){r("update:modelValue",t.target.files);return}const b=t.target.value;if(t.target.qComposing===!0){d.value=b;return}if($.value===!0)B(b,!1,t.inputType);else if(m(b),re.value===!0&&t.target===document.activeElement){const{selectionStart:O,selectionEnd:L}=t.target;O!==void 0&&L!==void 0&&G(()=>{t.target===document.activeElement&&b.indexOf(t.target.value)===0&&t.target.setSelectionRange(O,L)})}e.autogrow===!0&&g()}function M(t){r("animationend",t),g()}function m(t,b){w=()=>{y=null,e.type!=="number"&&d.hasOwnProperty("value")===!0&&delete d.value,e.modelValue!==t&&v!==t&&(v=t,b===!0&&(R=!0),r("update:modelValue",t),G(()=>{v===t&&(v=NaN)})),w=void 0},e.type==="number"&&(x=!0,d.value=t),e.debounce!==void 0?(y!==null&&clearTimeout(y),d.value=t,y=setTimeout(w,e.debounce)):w()}function g(){requestAnimationFrame(()=>{const t=c.value;if(t!==null){const b=t.parentNode.style,{scrollTop:O}=t,{overflowY:L,maxHeight:A}=s.platform.is.firefox===!0?{}:window.getComputedStyle(t),Z=L!==void 0&&L!=="scroll";Z===!0&&(t.style.overflowY="hidden"),b.marginBottom=t.scrollHeight-1+"px",t.style.height="1px",t.style.height=t.scrollHeight+"px",Z===!0&&(t.style.overflowY=parseInt(A,10)<t.scrollHeight?"auto":"hidden"),b.marginBottom="",t.scrollTop=O}})}function K(t){z(t),y!==null&&(clearTimeout(y),y=null),w!==void 0&&w(),r("change",t.target.value)}function W(t){t!==void 0&&he(t),y!==null&&(clearTimeout(y),y=null),w!==void 0&&w(),x=!1,R=!1,delete d.value,e.type!=="file"&&setTimeout(()=>{c.value!==null&&(c.value.value=p.value!==void 0?p.value:"")})}function k(){return d.hasOwnProperty("value")===!0?d.value:p.value!==void 0?p.value:""}Ae(()=>{W()}),Ee(()=>{e.autogrow===!0&&g()}),Object.assign(D,{innerValue:p,fieldClass:P(()=>`q-${T.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:P(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:c,emitValue:m,hasValue:le,floatingLabel:P(()=>le.value===!0&&(e.type!=="number"||isNaN(p.value)===!1)||ge(e.displayValue)),getControl:()=>ee(T.value===!0?"textarea":"input",{ref:c,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...n.value,...l.value,...e.type!=="file"?{value:k()}:de.value}),getShadowControl:()=>ee("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(T.value===!0?"":" text-no-wrap")},[ee("span",{class:"invisible"},k()),ee("span",e.shadowText)])});const S=Ke(D);return Object.assign(u,{focus:o,select:a,getNativeElement:()=>c.value}),Ie(u,"nativeEl",()=>c.value),S}});function nt(e,r){const i=[],u=[];let s=!1;for(const d of e.split(".")){const v=at(d,r),x=[],R=[],y=[];let w=!1;for(const c of v)switch(c.syllabic){case"Syllabic":if(w)throw new Error("Couldn't parse syllables.");w=!0,R.push(J(c));break;case"Nonsyllabic":switch(u.push(J(c)),r.data.phoneTypes[c.typeID].articulation){case"Vowel":R.push(J(c));break;case"Consonant":w?y.push(J(c)):x.push(J(c));break}break}s=s||w,i.push({id:crypto.randomUUID(),onset:x,rhyme:{nucleus:R,coda:y}})}return s?{id:crypto.randomUUID(),kind:"syllables",syllables:i}:{id:crypto.randomUUID(),kind:"phones",phones:u}}function at(e,r){const i=[];let u=!1,s=0,d=0;for(;!u;){const v=Object.values(r.data.languages)[0].phonemesAll[d];if(!v){u=!0;break}e.substring(s,s+v.IPA.length)===v.IPA?(i.push(v),s+=v.IPA.length,d=0):(d+=1,d>=Object.values(r.data.languages)[0].phonemesAll.length&&(d=0,s+=1,s>=e.length&&(u=!0)))}return i}function J(e){if(!e)return{id:crypto.randomUUID(),type:"",features:{}};const r={};for(const i of e.featureStops)r[i.categoryId]=i.stopId;return{id:crypto.randomUUID(),type:e.typeID,features:r}}function lt(e){const r=ae();!r.languages||r.languages.data.words.push(e)}function rt(e){console.log("blarg");const r=ae();if(!r.languages)return;const i=r.languages.data.words.filter(s=>s.id===e.id)[0],u=r.languages.data.words.indexOf(i);r.languages.data.words.splice(u,1)}class ot{constructor(r){Q(this,"kind","add");Q(this,"lexeme");Q(this,"do",()=>{switch(this.kind){case"add":this.addLexeme();break;case"remove":this.removeLexeme();break}});Q(this,"undo",()=>{switch(this.kind){case"add":this.removeLexeme();break;case"remove":this.addLexeme();break}});this.lexeme=r}addLexeme(){lt(this.lexeme)}removeLexeme(){rt(this.lexeme)}}class st extends ot{constructor(){super(...arguments);Q(this,"kind","add")}}function it(e){return{id:crypto.randomUUID(),entryForm:e.word,entryTreeLimb:"",entryDate:0}}const ut=Pe("userSanity",{state:()=>({dashboard:{newWord:""}}),actions:{}}),dt=_("br",null,null,-1),ct={key:0},ft=_("tr",null,[_("th",null,"O"),_("th",null,"N"),_("th",null,"C")],-1),ht={key:1},mt=_("tr",null,[_("th",null,"Nonsyllabic")],-1),gt={class:"ipa"},vt=_("br",null,null,-1),kt=ce({__name:"NewLexemeComponent",setup(e){const r=ae(),i=ut(),u=ne(null),s=ne({});function d(){if(v=null,u.value=null,s.value="",!!r.languages&&i.dashboard.newWord!=="")try{v=nt(i.dashboard.newWord,r.languages),u.value=v,s.value=be(v)}catch(R){console.log(R)}}let v=null;function x(){!v||(r.executeDo(new st(it({word:v}))),i.dashboard.newWord="",d())}return(R,y)=>{var w,c;return F(),V(N,null,[se(tt,{rounded:"",outlined:"",modelValue:j(i).dashboard.newWord,"onUpdate:modelValue":[y[0]||(y[0]=E=>j(i).dashboard.newWord=E),d],label:"New Word",onKeydown:Te(Le(x,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),dt,_("p",null,"Interpretation: "+X(s.value),1),((w=u.value)==null?void 0:w.kind)=="syllables"?(F(),V("div",ct,[_("table",null,[ft,(F(!0),V(N,null,Y(u.value.syllables,E=>(F(),V("tr",{key:E.id},[_("td",null,[(F(!0),V(N,null,Y(E.onset,p=>(F(),V("span",{key:p.id},X(j(te)(p)),1))),128))]),_("td",null,[(F(!0),V(N,null,Y(E.rhyme.nucleus,p=>(F(),V("span",{key:p.id},X(j(te)(p)),1))),128))]),_("td",null,[(F(!0),V(N,null,Y(E.rhyme.coda,p=>(F(),V("span",{key:p.id},X(j(te)(p)),1))),128))])]))),128))])])):me("",!0),((c=u.value)==null?void 0:c.kind)=="phones"?(F(),V("div",ht,[_("table",null,[mt,_("tr",null,[_("td",gt,[(F(!0),V(N,null,Y(u.value.phones,E=>(F(),V("span",{key:E.id},X(j(te)(E)),1))),128))])])])])):me("",!0),vt,se(_e,{color:"primary",label:"Add to list",elevated:"",rounded:"",onClick:x})],64)}}}),yt={style:{position:"relative",display:"grid"}},wt=_("br",null,null,-1),_t=ce({__name:"DashboardPage",setup(e){return(r,i)=>(F(),Oe(ze,{class:"row items-center justify-evenly"},{default:De(()=>[_("div",yt,[se(kt),wt,se(Ye)])]),_:1}))}});export{_t as default};
