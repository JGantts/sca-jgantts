import{k as ir}from"./QBtn.57088c1b.js";import{u as is}from"./languages-store.5cdfddf8.js";import{d as cs,r as cr,l as Dt,m as Tt,t as _e,f as lr,G as Tr,v as Ot,q as ls,s as Gt,x as ur,F as us}from"./index.e96ee7c1.js";const ds={version:"SaveFileData_v0_1_beta_1",projectName:"IPA"},fs={phoneTypes:[{id:"QGDYAEYMDEZDMMPOBXRTCUDHYYPYFBPF",desc:"vowel",type:"Vowel",features:[{id:"QCOTLERJNNSYNKCMMSILQBETHSFYNLLC",desc:"height",type:{values:[{id:"BFEXVLSDEZENWZKHHCJLAOGSLFOTKHSJ",desc:"open"},{id:"ITXNMDIJIXIOXVFYPAETYXLLPLGINNXG",desc:"near-open"},{id:"YWQMANONVLHZAZFHSYQHHDFXCFWAJFWV",desc:"open-mid"},{id:"CUCHRTPAZJQDGBZJRHCELPPYIXLCTTKB",desc:"mid"},{id:"LEOXQKQBEINZXHVKNQABHIJVYRBSEOJJ",desc:"close-mid"},{id:"KONWQVVVUWWOUHVMDAADQWRIWMQKZTMP",desc:"near-close"},{id:"UGDNUKMWNLUNIGAUZJKMUALBDPWTKBJI",desc:"close"}]}},{id:"JGJYSLLKLOVLDIKKLQXPDTBRUXNAMGOJ",desc:"backness",type:{values:[{id:"NWAIGDSPCAAFGOGYLFPGWWVKBREZPWBD",desc:"front"},{id:"YEWERSFOMXLUOLOBMATLTTQKUATLZTZI",desc:"central"},{id:"TNTXXUTXNIJQEJCVBNRAJSDBJCHXVCJN",desc:"back"}]}},{id:"CTKXTKTLAUXLERTJKSEVLBTSFVYUXSUP",desc:"roundness",type:{values:[{id:"NRPMAAJKFSTQCLHHXLWSWKNVSQATESYT",desc:"unrounded"},{id:"YVGQZGLHLVPYJOEQZAYZZFNPGBBNHIVG",desc:"rounded"}]}}]},{id:"JMHNZPRXUPBIYCCPAEHZGLHIZGVNYPXR",desc:"consonant",type:"Consonant",features:[{id:"YUUNFSLQUZZVJGKXNYSNCKZHIPURKVVT",desc:"place",type:{values:[{id:"ZXYFPKHUIGDWXVUPMVVFXMROSBKFKHZR",desc:"bilabilal"},{id:"APINNIFZCAKTUWTDYVZUSNFBMDAYYPSG",desc:"labiodental"},{id:"WPYQRFRZZATALISKLYVWSBZGBOLULSML",desc:"linguolabial"},{id:"BXNFTBKXZVSWGWMXLFXNZSSVXNKNJSGB",desc:"dental"},{id:"ZBKMZTESQRTSRXPZMNHQCDUVYEWNBUQL",desc:"alveolar"},{id:"QQPEJMVYETQWAMDRFLFVYJETUUQQMUVH",desc:"postalveolar"},{id:"DLBLEDTMBQMFFTNJJVMJNZDBDGBJDEHK",desc:"retroflex"},{id:"ZCXOAFYEWIOKFMMCORBSEQUFJFNYQRSH",desc:"palatal"},{id:"YHHQNKELEXGKPVQXGBVWYXFHVLKFRPMY",desc:"velar"},{id:"OFHIVUCPJCWBQSHZVLTEWIPGXDUOMNAZ",desc:"uvular"},{id:"WBZVYCLCEJOKZMQOKGWQFBHAFJDTYRSW",desc:"pharyngeal/epiglottal"},{id:"KPQROYYZCDMACXZEXGZYBOCBHSAJJRHI",desc:"glottal"}]}},{id:"KPAZCPLBROAZKNOSUGMXSRMUGQPUVVPA",desc:"manner",type:{values:[{id:"PQPWUKRVGOBQMKWLFTJZCFTJGPASBHSA",desc:"nasal"},{id:"VNGWOVCSMCUZGMYDOQHCQPJTMZPQCIRI",desc:"plosive"},{id:"PFUKOICTDXSMPOTJXMIYGTUCZMEXAZRL",desc:"silibant affricate"},{id:"NSDHPOWAXKBKRYYFPAXCWZKLFPNQJFPE",desc:"non-silibant affricate"},{id:"GXIKPDFDIMJJOUEEFTWHNAAZZTZYVZIE",desc:"silibant fricative"},{id:"RUPOAGMZWDHRHKSSVJFIYYMYSTIHWWTF",desc:"non-silibant fricative"},{id:"GMKLRZGQUBPDOIBLTJPXPVVWESTJOZZE",desc:"approximant"},{id:"CQDZRXJZOQOKNUIHALDMHHIIVAGWLBRX",desc:"tap"},{id:"VAZDUHUYJIBAFATHZTVIOOVJINSRKDSP",desc:"trill"},{id:"IMHJWSHYQPDOKDDBLHEVCPIUWYBALEAQ",desc:"lateral affricative"},{id:"FXMGJZEKIXQMIRCVLPZVBELXNSBHVBXY",desc:"lateral fricative"},{id:"VVYLUMZXQPWSIFYVREPMJAQPXKPYHFCR",desc:"lateral approximant"},{id:"EMMLESLTRVOYOKLACZJFVYRJTYEWZRFY",desc:"lateral tap"}]}},{id:"CHRJYONQPXKFWAQDENLLHHWYKHJQZFVD",desc:"voicedness",type:{values:[{id:"IFKUDEPWTBULJGCZIYGWDYITMLUEQMVD",desc:"unvoiced"},{id:"OFOMPHTROPHZFTWTXDDDUDRKKQDPYWPU",desc:"voiced"}]}}]}],languages:[{id:"ODEOJAEMMEFZSIOWFABSUOBHUIGSOKEH",desc:"Proto",grid:[{typeID:"QGDYAEYMDEZDMMPOBXRTCUDHYYPYFBPF",id:"DDQDFQREJUTNLIPBMGAOCGLYUYMGOVJG",IPA:"i",desc:null,syllabic:"Syllabic",featureStops:[{kind:"FeatureStop",categoryID:"QCOTLERJNNSYNKCMMSILQBETHSFYNLLC",id:"UGDNUKMWNLUNIGAUZJKMUALBDPWTKBJI"},{kind:"FeatureStop",categoryID:"JGJYSLLKLOVLDIKKLQXPDTBRUXNAMGOJ",id:"NWAIGDSPCAAFGOGYLFPGWWVKBREZPWBD"},{kind:"FeatureStop",categoryID:"CTKXTKTLAUXLERTJKSEVLBTSFVYUXSUP",id:"NRPMAAJKFSTQCLHHXLWSWKNVSQATESYT"}]},{typeID:"QGDYAEYMDEZDMMPOBXRTCUDHYYPYFBPF",id:"USKYXZGEZNUVYDZVIKAMTVRHSZVKRXNZ",IPA:"y",desc:null,syllabic:"Syllabic",featureStops:[{kind:"FeatureStop",categoryID:"QCOTLERJNNSYNKCMMSILQBETHSFYNLLC",id:"UGDNUKMWNLUNIGAUZJKMUALBDPWTKBJI"},{kind:"FeatureStop",categoryID:"JGJYSLLKLOVLDIKKLQXPDTBRUXNAMGOJ",id:"NWAIGDSPCAAFGOGYLFPGWWVKBREZPWBD"},{kind:"FeatureStop",categoryID:"CTKXTKTLAUXLERTJKSEVLBTSFVYUXSUP",id:"YVGQZGLHLVPYJOEQZAYZZFNPGBBNHIVG"}]},{typeID:"QGDYAEYMDEZDMMPOBXRTCUDHYYPYFBPF",id:"UCROONCOOOISUEIRBLCCKDHIGXWJGIDB",IPA:"\u0268",desc:null,syllabic:"Syllabic",featureStops:[{kind:"FeatureStop",categoryID:"QCOTLERJNNSYNKCMMSILQBETHSFYNLLC",id:"UGDNUKMWNLUNIGAUZJKMUALBDPWTKBJI"},{kind:"FeatureStop",categoryID:"JGJYSLLKLOVLDIKKLQXPDTBRUXNAMGOJ",id:"YEWERSFOMXLUOLOBMATLTTQKUATLZTZI"},{kind:"FeatureStop",categoryID:"CTKXTKTLAUXLERTJKSEVLBTSFVYUXSUP",id:"NRPMAAJKFSTQCLHHXLWSWKNVSQATESYT"}]},{typeID:"QGDYAEYMDEZDMMPOBXRTCUDHYYPYFBPF",id:"LFZFWOZLVRJNWZBMJPLDFFMNEVTYIDUU",IPA:"\u0289",desc:null,syllabic:"Syllabic",featureStops:[{kind:"FeatureStop",categoryID:"QCOTLERJNNSYNKCMMSILQBETHSFYNLLC",id:"UGDNUKMWNLUNIGAUZJKMUALBDPWTKBJI"},{kind:"FeatureStop",categoryID:"JGJYSLLKLOVLDIKKLQXPDTBRUXNAMGOJ",id:"YEWERSFOMXLUOLOBMATLTTQKUATLZTZI"},{kind:"FeatureStop",categoryID:"CTKXTKTLAUXLERTJKSEVLBTSFVYUXSUP",id:"YVGQZGLHLVPYJOEQZAYZZFNPGBBNHIVG"}]},{typeID:"QGDYAEYMDEZDMMPOBXRTCUDHYYPYFBPF",id:"AZXDMONRTVBBRCLDXEFVYDAIEJAOQTYQ",IPA:"\u026F",desc:null,syllabic:"Syllabic",featureStops:[{kind:"FeatureStop",categoryID:"QCOTLERJNNSYNKCMMSILQBETHSFYNLLC",id:"UGDNUKMWNLUNIGAUZJKMUALBDPWTKBJI"},{kind:"FeatureStop",categoryID:"JGJYSLLKLOVLDIKKLQXPDTBRUXNAMGOJ",id:"TNTXXUTXNIJQEJCVBNRAJSDBJCHXVCJN"},{kind:"FeatureStop",categoryID:"CTKXTKTLAUXLERTJKSEVLBTSFVYUXSUP",id:"NRPMAAJKFSTQCLHHXLWSWKNVSQATESYT"}]},{typeID:"QGDYAEYMDEZDMMPOBXRTCUDHYYPYFBPF",id:"VQWKWCBRGBOAFHSRCRIBGWPDMQPBYIAW",IPA:"u",desc:null,syllabic:"Syllabic",featureStops:[{kind:"FeatureStop",categoryID:"QCOTLERJNNSYNKCMMSILQBETHSFYNLLC",id:"UGDNUKMWNLUNIGAUZJKMUALBDPWTKBJI"},{kind:"FeatureStop",categoryID:"JGJYSLLKLOVLDIKKLQXPDTBRUXNAMGOJ",id:"TNTXXUTXNIJQEJCVBNRAJSDBJCHXVCJN"},{kind:"FeatureStop",categoryID:"CTKXTKTLAUXLERTJKSEVLBTSFVYUXSUP",id:"YVGQZGLHLVPYJOEQZAYZZFNPGBBNHIVG"}]},{typeID:"QGDYAEYMDEZDMMPOBXRTCUDHYYPYFBPF",id:"YCLZGBAVXKMQNDRKIPDZWQDDEBVNFYGX",IPA:"a",desc:null,syllabic:"Syllabic",featureStops:[{kind:"FeatureStop",categoryID:"QCOTLERJNNSYNKCMMSILQBETHSFYNLLC",id:"BFEXVLSDEZENWZKHHCJLAOGSLFOTKHSJ"},{kind:"FeatureStop",categoryID:"JGJYSLLKLOVLDIKKLQXPDTBRUXNAMGOJ",id:"NWAIGDSPCAAFGOGYLFPGWWVKBREZPWBD"},{kind:"FeatureStop",categoryID:"CTKXTKTLAUXLERTJKSEVLBTSFVYUXSUP",id:"NRPMAAJKFSTQCLHHXLWSWKNVSQATESYT"}]},{typeID:"JMHNZPRXUPBIYCCPAEHZGLHIZGVNYPXR",id:"IPOYSNZXCKAZYEACJIOTRJZSJYUXSPGB",IPA:"m",desc:null,syllabic:"Nonsyllabic",featureStops:[{kind:"FeatureStop",categoryID:"YUUNFSLQUZZVJGKXNYSNCKZHIPURKVVT",id:"ZXYFPKHUIGDWXVUPMVVFXMROSBKFKHZR"},{kind:"FeatureStop",categoryID:"KPAZCPLBROAZKNOSUGMXSRMUGQPUVVPA",id:"PQPWUKRVGOBQMKWLFTJZCFTJGPASBHSA"},{kind:"FeatureStop",categoryID:"CHRJYONQPXKFWAQDENLLHHWYKHJQZFVD",id:"OFOMPHTROPHZFTWTXDDDUDRKKQDPYWPU"}]},{typeID:"JMHNZPRXUPBIYCCPAEHZGLHIZGVNYPXR",id:"WTMSEOODZHEDZXFYWLKONUTWKCPSVQGJ",IPA:"m\u0329",desc:null,syllabic:"Syllabic",featureStops:[{kind:"FeatureStop",categoryID:"YUUNFSLQUZZVJGKXNYSNCKZHIPURKVVT",id:"ZXYFPKHUIGDWXVUPMVVFXMROSBKFKHZR"},{kind:"FeatureStop",categoryID:"KPAZCPLBROAZKNOSUGMXSRMUGQPUVVPA",id:"PQPWUKRVGOBQMKWLFTJZCFTJGPASBHSA"},{kind:"FeatureStop",categoryID:"CHRJYONQPXKFWAQDENLLHHWYKHJQZFVD",id:"IFKUDEPWTBULJGCZIYGWDYITMLUEQMVD"}]},{typeID:"JMHNZPRXUPBIYCCPAEHZGLHIZGVNYPXR",id:"RDZCIIEKMLCMPBUBYHESOKUFKRYOYHLS",IPA:"d",desc:null,syllabic:"Nonsyllabic",featureStops:[{kind:"FeatureStop",categoryID:"YUUNFSLQUZZVJGKXNYSNCKZHIPURKVVT",id:"ZBKMZTESQRTSRXPZMNHQCDUVYEWNBUQL"},{kind:"FeatureStop",categoryID:"KPAZCPLBROAZKNOSUGMXSRMUGQPUVVPA",id:"VNGWOVCSMCUZGMYDOQHCQPJTMZPQCIRI"},{kind:"FeatureStop",categoryID:"CHRJYONQPXKFWAQDENLLHHWYKHJQZFVD",id:"OFOMPHTROPHZFTWTXDDDUDRKKQDPYWPU"}]}]}],lexicon:{words:[{id:"",entryForm:{value:{kind:"Syllables",sounds:[{onset:[{type:"JMHNZPRXUPBIYCCPAEHZGLHIZGVNYPXR",features:{YUUNFSLQUZZVJGKXNYSNCKZHIPURKVVT:"ZXYFPKHUIGDWXVUPMVVFXMROSBKFKHZR",KPAZCPLBROAZKNOSUGMXSRMUGQPUVVPA:"PQPWUKRVGOBQMKWLFTJZCFTJGPASBHSA",CHRJYONQPXKFWAQDENLLHHWYKHJQZFVD:"OFOMPHTROPHZFTWTXDDDUDRKKQDPYWPU"}}],rhyme:{nucleus:[{type:"QGDYAEYMDEZDMMPOBXRTCUDHYYPYFBPF",features:{QCOTLERJNNSYNKCMMSILQBETHSFYNLLC:"UGDNUKMWNLUNIGAUZJKMUALBDPWTKBJI",JGJYSLLKLOVLDIKKLQXPDTBRUXNAMGOJ:"TNTXXUTXNIJQEJCVBNRAJSDBJCHXVCJN",CTKXTKTLAUXLERTJKSEVLBTSFVYUXSUP:"YVGQZGLHLVPYJOEQZAYZZFNPGBBNHIVG"}}],coda:[{type:"JMHNZPRXUPBIYCCPAEHZGLHIZGVNYPXR",features:{YUUNFSLQUZZVJGKXNYSNCKZHIPURKVVT:"ZXYFPKHUIGDWXVUPMVVFXMROSBKFKHZR",KPAZCPLBROAZKNOSUGMXSRMUGQPUVVPA:"PQPWUKRVGOBQMKWLFTJZCFTJGPASBHSA",CHRJYONQPXKFWAQDENLLHHWYKHJQZFVD:"OFOMPHTROPHZFTWTXDDDUDRKKQDPYWPU"}}]}}]}},entryTreeLimb:"",entryDate:0},{id:"",entryForm:{value:{kind:"Syllables",sounds:[{onset:[{type:"JMHNZPRXUPBIYCCPAEHZGLHIZGVNYPXR",features:{YUUNFSLQUZZVJGKXNYSNCKZHIPURKVVT:"ZBKMZTESQRTSRXPZMNHQCDUVYEWNBUQL",KPAZCPLBROAZKNOSUGMXSRMUGQPUVVPA:"VNGWOVCSMCUZGMYDOQHCQPJTMZPQCIRI",CHRJYONQPXKFWAQDENLLHHWYKHJQZFVD:"OFOMPHTROPHZFTWTXDDDUDRKKQDPYWPU"}}],rhyme:{nucleus:[{type:"QGDYAEYMDEZDMMPOBXRTCUDHYYPYFBPF",features:{QCOTLERJNNSYNKCMMSILQBETHSFYNLLC:"BFEXVLSDEZENWZKHHCJLAOGSLFOTKHSJ",JGJYSLLKLOVLDIKKLQXPDTBRUXNAMGOJ:"NWAIGDSPCAAFGOGYLFPGWWVKBREZPWBD",CTKXTKTLAUXLERTJKSEVLBTSFVYUXSUP:"NRPMAAJKFSTQCLHHXLWSWKNVSQATESYT"}}],coda:[{type:"JMHNZPRXUPBIYCCPAEHZGLHIZGVNYPXR",features:{YUUNFSLQUZZVJGKXNYSNCKZHIPURKVVT:"ZBKMZTESQRTSRXPZMNHQCDUVYEWNBUQL",KPAZCPLBROAZKNOSUGMXSRMUGQPUVVPA:"VNGWOVCSMCUZaGMYDOQHCQPJTMZPQCIRI",CHRJYONQPXKFWAQDENLLHHWYKHJQZFVD:"OFOMPHTROPHZFTWTXDDDUDRKKQDPYWPU"}}]}}]}},entryTreeLimb:"",entryDate:0}],rules:[{id:"ZSUQBWJJCCAHSLUFFSRRANKVNNFHXQOP",treeLimbs:[],rules:[]}],treeTrunks:["QKFUWFZLSQOUHHYTDSMIGWJWJEXLTFYJ"],treeLimbs:[{id:"QKFUWFZLSQOUHHYTDSMIGWJWJEXLTFYJ",branch:{deathDate:100,children:["LGOQCVJMEHTWMTYYYFKSKSONGNOHZJFP"]}},{id:"LGOQCVJMEHTWMTYYYFKSKSONGNOHZJFP",branch:{deathDate:200,children:["PTTLVWNYQDIEUHUDSSBJGUXOUJFEXJRB","AUKREWWMFVSHBMHFRNZPXTPVISEGVBFT"]}},{id:"PTTLVWNYQDIEUHUDSSBJGUXOUJFEXJRB",branch:{deathDate:300,children:["VGPMUBSWKOVGVTPGAPBAXKCVLTUVZWMN"]}},{id:"VGPMUBSWKOVGVTPGAPBAXKCVLTUVZWMN",branch:{deathDate:400,children:[]}},{id:"AUKREWWMFVSHBMHFRNZPXTPVISEGVBFT",branch:{deathDate:300,children:["OIHYZATBJHLDYRSYRHGZGGFVVMLYMVIT"]}},{id:"OIHYZATBJHLDYRSYRHGZGGFVVMLYMVIT",branch:{deathDate:400,children:[]}}]}};var hs={metadata:ds,data:fs},ps=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ms(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fr={exports:{}},ea={},Ye={},At={},xt={},ne={},Wt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(_){if(super(),!e.IDENTIFIER.test(_))throw new Error("CodeGen: name must be a valid identifier");this.str=_}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(_){super(),this._items=typeof _=="string"?[_]:_}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const _=this._items[0];return _===""||_==='""'}get str(){var _;return(_=this._str)!==null&&_!==void 0?_:this._str=this._items.reduce((P,R)=>`${P}${R}`,"")}get names(){var _;return(_=this._names)!==null&&_!==void 0?_:this._names=this._items.reduce((P,R)=>(R instanceof r&&(P[R.str]=(P[R.str]||0)+1),P),{})}}e._Code=n,e.nil=new n("");function a(u,..._){const P=[u[0]];let R=0;for(;R<_.length;)m(P,_[R]),P.push(u[++R]);return new n(P)}e._=a;const o=new n("+");function c(u,..._){const P=[I(u[0])];let R=0;for(;R<_.length;)P.push(o),m(P,_[R]),P.push(o,I(u[++R]));return v(P),new n(P)}e.str=c;function m(u,_){_ instanceof n?u.push(..._._items):_ instanceof r?u.push(_):u.push(y(_))}e.addCodeArg=m;function v(u){let _=1;for(;_<u.length-1;){if(u[_]===o){const P=p(u[_-1],u[_+1]);if(P!==void 0){u.splice(_-1,3,P);continue}u[_++]="+"}_++}}function p(u,_){if(_==='""')return u;if(u==='""')return _;if(typeof u=="string")return _ instanceof r||u[u.length-1]!=='"'?void 0:typeof _!="string"?`${u.slice(0,-1)}${_}"`:_[0]==='"'?u.slice(0,-1)+_.slice(1):void 0;if(typeof _=="string"&&_[0]==='"'&&!(u instanceof r))return`"${u}${_.slice(1)}`}function h(u,_){return _.emptyStr()?u:u.emptyStr()?_:c`${u}${_}`}e.strConcat=h;function y(u){return typeof u=="number"||typeof u=="boolean"||u===null?u:I(Array.isArray(u)?u.join(","):u)}function D(u){return new n(I(u))}e.stringify=D;function I(u){return JSON.stringify(u).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=I;function O(u){return typeof u=="string"&&e.IDENTIFIER.test(u)?new n(`.${u}`):a`[${u}]`}e.getProperty=O;function A(u){if(typeof u=="string"&&e.IDENTIFIER.test(u))return new n(`${u}`);throw new Error(`CodeGen: invalid export name: ${u}, use explicit $id name mapping`)}e.getEsmExportName=A;function b(u){return new n(u.toString())}e.regexpCode=b})(Wt);var Lr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Wt;class r extends Error{constructor(p){super(`CodeGen: "code" for ${p} not defined`),this.value=p.value}}var n;(function(v){v[v.Started=0]="Started",v[v.Completed=1]="Completed"})(n=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class a{constructor({prefixes:p,parent:h}={}){this._names={},this._prefixes=p,this._parent=h}toName(p){return p instanceof t.Name?p:this.name(p)}name(p){return new t.Name(this._newName(p))}_newName(p){const h=this._names[p]||this._nameGroup(p);return`${p}${h.index++}`}_nameGroup(p){var h,y;if(((y=(h=this._parent)===null||h===void 0?void 0:h._prefixes)===null||y===void 0?void 0:y.has(p))||this._prefixes&&!this._prefixes.has(p))throw new Error(`CodeGen: prefix "${p}" is not allowed in this scope`);return this._names[p]={prefix:p,index:0}}}e.Scope=a;class o extends t.Name{constructor(p,h){super(h),this.prefix=p}setValue(p,{property:h,itemIndex:y}){this.value=p,this.scopePath=(0,t._)`.${new t.Name(h)}[${y}]`}}e.ValueScopeName=o;const c=(0,t._)`\n`;class m extends a{constructor(p){super(p),this._values={},this._scope=p.scope,this.opts={...p,_n:p.lines?c:t.nil}}get(){return this._scope}name(p){return new o(p,this._newName(p))}value(p,h){var y;if(h.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const D=this.toName(p),{prefix:I}=D,O=(y=h.key)!==null&&y!==void 0?y:h.ref;let A=this._values[I];if(A){const _=A.get(O);if(_)return _}else A=this._values[I]=new Map;A.set(O,D);const b=this._scope[I]||(this._scope[I]=[]),u=b.length;return b[u]=h.ref,D.setValue(h,{property:I,itemIndex:u}),D}getValue(p,h){const y=this._values[p];if(!!y)return y.get(h)}scopeRefs(p,h=this._values){return this._reduceValues(h,y=>{if(y.scopePath===void 0)throw new Error(`CodeGen: name "${y}" has no value`);return(0,t._)`${p}${y.scopePath}`})}scopeCode(p=this._values,h,y){return this._reduceValues(p,D=>{if(D.value===void 0)throw new Error(`CodeGen: name "${D}" has no value`);return D.value.code},h,y)}_reduceValues(p,h,y={},D){let I=t.nil;for(const O in p){const A=p[O];if(!A)continue;const b=y[O]=y[O]||new Map;A.forEach(u=>{if(b.has(u))return;b.set(u,n.Started);let _=h(u);if(_){const P=this.opts.es5?e.varKinds.var:e.varKinds.const;I=(0,t._)`${I}${P} ${u} = ${_};${this.opts._n}`}else if(_=D==null?void 0:D(u))I=(0,t._)`${I}${_}${this.opts._n}`;else throw new r(u);b.set(u,n.Completed)})}return I}}e.ValueScope=m})(Lr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Wt,r=Lr;var n=Wt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var a=Lr;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(s,d){return this}}class c extends o{constructor(s,d,T){super(),this.varKind=s,this.name=d,this.rhs=T}render({es5:s,_n:d}){const T=s?r.varKinds.var:this.varKind,V=this.rhs===void 0?"":` = ${this.rhs}`;return`${T} ${this.name}${V};`+d}optimizeNames(s,d){if(!!s[this.name.str])return this.rhs&&(this.rhs=Z(this.rhs,s,d)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class m extends o{constructor(s,d,T){super(),this.lhs=s,this.rhs=d,this.sideEffects=T}render({_n:s}){return`${this.lhs} = ${this.rhs};`+s}optimizeNames(s,d){if(!(this.lhs instanceof t.Name&&!s[this.lhs.str]&&!this.sideEffects))return this.rhs=Z(this.rhs,s,d),this}get names(){const s=this.lhs instanceof t.Name?{}:{...this.lhs.names};return re(s,this.rhs)}}class v extends m{constructor(s,d,T,V){super(s,T,V),this.op=d}render({_n:s}){return`${this.lhs} ${this.op}= ${this.rhs};`+s}}class p extends o{constructor(s){super(),this.label=s,this.names={}}render({_n:s}){return`${this.label}:`+s}}class h extends o{constructor(s){super(),this.label=s,this.names={}}render({_n:s}){return`break${this.label?` ${this.label}`:""};`+s}}class y extends o{constructor(s){super(),this.error=s}render({_n:s}){return`throw ${this.error};`+s}get names(){return this.error.names}}class D extends o{constructor(s){super(),this.code=s}render({_n:s}){return`${this.code};`+s}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(s,d){return this.code=Z(this.code,s,d),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class I extends o{constructor(s=[]){super(),this.nodes=s}render(s){return this.nodes.reduce((d,T)=>d+T.render(s),"")}optimizeNodes(){const{nodes:s}=this;let d=s.length;for(;d--;){const T=s[d].optimizeNodes();Array.isArray(T)?s.splice(d,1,...T):T?s[d]=T:s.splice(d,1)}return s.length>0?this:void 0}optimizeNames(s,d){const{nodes:T}=this;let V=T.length;for(;V--;){const U=T[V];U.optimizeNames(s,d)||(le(s,U.names),T.splice(V,1))}return T.length>0?this:void 0}get names(){return this.nodes.reduce((s,d)=>X(s,d.names),{})}}class O extends I{render(s){return"{"+s._n+super.render(s)+"}"+s._n}}class A extends I{}class b extends O{}b.kind="else";class u extends O{constructor(s,d){super(d),this.condition=s}render(s){let d=`if(${this.condition})`+super.render(s);return this.else&&(d+="else "+this.else.render(s)),d}optimizeNodes(){super.optimizeNodes();const s=this.condition;if(s===!0)return this.nodes;let d=this.else;if(d){const T=d.optimizeNodes();d=this.else=Array.isArray(T)?new b(T):T}if(d)return s===!1?d instanceof u?d:d.nodes:this.nodes.length?this:new u(fe(s),d instanceof u?[d]:d.nodes);if(!(s===!1||!this.nodes.length))return this}optimizeNames(s,d){var T;if(this.else=(T=this.else)===null||T===void 0?void 0:T.optimizeNames(s,d),!!(super.optimizeNames(s,d)||this.else))return this.condition=Z(this.condition,s,d),this}get names(){const s=super.names;return re(s,this.condition),this.else&&X(s,this.else.names),s}}u.kind="if";class _ extends O{}_.kind="for";class P extends _{constructor(s){super(),this.iteration=s}render(s){return`for(${this.iteration})`+super.render(s)}optimizeNames(s,d){if(!!super.optimizeNames(s,d))return this.iteration=Z(this.iteration,s,d),this}get names(){return X(super.names,this.iteration.names)}}class R extends _{constructor(s,d,T,V){super(),this.varKind=s,this.name=d,this.from=T,this.to=V}render(s){const d=s.es5?r.varKinds.var:this.varKind,{name:T,from:V,to:U}=this;return`for(${d} ${T}=${V}; ${T}<${U}; ${T}++)`+super.render(s)}get names(){const s=re(super.names,this.from);return re(s,this.to)}}class J extends _{constructor(s,d,T,V){super(),this.loop=s,this.varKind=d,this.name=T,this.iterable=V}render(s){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(s)}optimizeNames(s,d){if(!!super.optimizeNames(s,d))return this.iterable=Z(this.iterable,s,d),this}get names(){return X(super.names,this.iterable.names)}}class N extends O{constructor(s,d,T){super(),this.name=s,this.args=d,this.async=T}render(s){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(s)}}N.kind="func";class w extends I{render(s){return"return "+super.render(s)}}w.kind="return";class F extends O{render(s){let d="try"+super.render(s);return this.catch&&(d+=this.catch.render(s)),this.finally&&(d+=this.finally.render(s)),d}optimizeNodes(){var s,d;return super.optimizeNodes(),(s=this.catch)===null||s===void 0||s.optimizeNodes(),(d=this.finally)===null||d===void 0||d.optimizeNodes(),this}optimizeNames(s,d){var T,V;return super.optimizeNames(s,d),(T=this.catch)===null||T===void 0||T.optimizeNames(s,d),(V=this.finally)===null||V===void 0||V.optimizeNames(s,d),this}get names(){const s=super.names;return this.catch&&X(s,this.catch.names),this.finally&&X(s,this.finally.names),s}}class H extends O{constructor(s){super(),this.error=s}render(s){return`catch(${this.error})`+super.render(s)}}H.kind="catch";class B extends O{render(s){return"finally"+super.render(s)}}B.kind="finally";class oe{constructor(s,d={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...d,_n:d.lines?`
`:""},this._extScope=s,this._scope=new r.Scope({parent:s}),this._nodes=[new A]}toString(){return this._root.render(this.opts)}name(s){return this._scope.name(s)}scopeName(s){return this._extScope.name(s)}scopeValue(s,d){const T=this._extScope.value(s,d);return(this._values[T.prefix]||(this._values[T.prefix]=new Set)).add(T),T}getScopeValue(s,d){return this._extScope.getValue(s,d)}scopeRefs(s){return this._extScope.scopeRefs(s,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(s,d,T,V){const U=this._scope.toName(d);return T!==void 0&&V&&(this._constants[U.str]=T),this._leafNode(new c(s,U,T)),U}const(s,d,T){return this._def(r.varKinds.const,s,d,T)}let(s,d,T){return this._def(r.varKinds.let,s,d,T)}var(s,d,T){return this._def(r.varKinds.var,s,d,T)}assign(s,d,T){return this._leafNode(new m(s,d,T))}add(s,d){return this._leafNode(new v(s,e.operators.ADD,d))}code(s){return typeof s=="function"?s():s!==t.nil&&this._leafNode(new D(s)),this}object(...s){const d=["{"];for(const[T,V]of s)d.length>1&&d.push(","),d.push(T),(T!==V||this.opts.es5)&&(d.push(":"),(0,t.addCodeArg)(d,V));return d.push("}"),new t._Code(d)}if(s,d,T){if(this._blockNode(new u(s)),d&&T)this.code(d).else().code(T).endIf();else if(d)this.code(d).endIf();else if(T)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(s){return this._elseNode(new u(s))}else(){return this._elseNode(new b)}endIf(){return this._endBlockNode(u,b)}_for(s,d){return this._blockNode(s),d&&this.code(d).endFor(),this}for(s,d){return this._for(new P(s),d)}forRange(s,d,T,V,U=this.opts.es5?r.varKinds.var:r.varKinds.let){const W=this._scope.toName(s);return this._for(new R(U,W,d,T),()=>V(W))}forOf(s,d,T,V=r.varKinds.const){const U=this._scope.toName(s);if(this.opts.es5){const W=d instanceof t.Name?d:this.var("_arr",d);return this.forRange("_i",0,(0,t._)`${W}.length`,x=>{this.var(U,(0,t._)`${W}[${x}]`),T(U)})}return this._for(new J("of",V,U,d),()=>T(U))}forIn(s,d,T,V=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(s,(0,t._)`Object.keys(${d})`,T);const U=this._scope.toName(s);return this._for(new J("in",V,U,d),()=>T(U))}endFor(){return this._endBlockNode(_)}label(s){return this._leafNode(new p(s))}break(s){return this._leafNode(new h(s))}return(s){const d=new w;if(this._blockNode(d),this.code(s),d.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(w)}try(s,d,T){if(!d&&!T)throw new Error('CodeGen: "try" without "catch" and "finally"');const V=new F;if(this._blockNode(V),this.code(s),d){const U=this.name("e");this._currNode=V.catch=new H(U),d(U)}return T&&(this._currNode=V.finally=new B,this.code(T)),this._endBlockNode(H,B)}throw(s){return this._leafNode(new y(s))}block(s,d){return this._blockStarts.push(this._nodes.length),s&&this.code(s).endBlock(d),this}endBlock(s){const d=this._blockStarts.pop();if(d===void 0)throw new Error("CodeGen: not in self-balancing block");const T=this._nodes.length-d;if(T<0||s!==void 0&&T!==s)throw new Error(`CodeGen: wrong number of nodes: ${T} vs ${s} expected`);return this._nodes.length=d,this}func(s,d=t.nil,T,V){return this._blockNode(new N(s,d,T)),V&&this.code(V).endFunc(),this}endFunc(){return this._endBlockNode(N)}optimize(s=1){for(;s-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(s){return this._currNode.nodes.push(s),this}_blockNode(s){this._currNode.nodes.push(s),this._nodes.push(s)}_endBlockNode(s,d){const T=this._currNode;if(T instanceof s||d&&T instanceof d)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${d?`${s.kind}/${d.kind}`:s.kind}"`)}_elseNode(s){const d=this._currNode;if(!(d instanceof u))throw new Error('CodeGen: "else" without "if"');return this._currNode=d.else=s,this}get _root(){return this._nodes[0]}get _currNode(){const s=this._nodes;return s[s.length-1]}set _currNode(s){const d=this._nodes;d[d.length-1]=s}}e.CodeGen=oe;function X($,s){for(const d in s)$[d]=($[d]||0)+(s[d]||0);return $}function re($,s){return s instanceof t._CodeOrName?X($,s.names):$}function Z($,s,d){if($ instanceof t.Name)return T($);if(!V($))return $;return new t._Code($._items.reduce((U,W)=>(W instanceof t.Name&&(W=T(W)),W instanceof t._Code?U.push(...W._items):U.push(W),U),[]));function T(U){const W=d[U.str];return W===void 0||s[U.str]!==1?U:(delete s[U.str],W)}function V(U){return U instanceof t._Code&&U._items.some(W=>W instanceof t.Name&&s[W.str]===1&&d[W.str]!==void 0)}}function le($,s){for(const d in s)$[d]=($[d]||0)-(s[d]||0)}function fe($){return typeof $=="boolean"||typeof $=="number"||$===null?!$:(0,t._)`!${C($)}`}e.not=fe;const ve=g(e.operators.AND);function Se(...$){return $.reduce(ve)}e.and=Se;const et=g(e.operators.OR);function L(...$){return $.reduce(et)}e.or=L;function g($){return(s,d)=>s===t.nil?d:d===t.nil?s:(0,t._)`${C(s)} ${$} ${C(d)}`}function C($){return $ instanceof t.Name?$:(0,t._)`(${$})`}})(ne);var ge={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=ne,r=Wt;function n(N){const w={};for(const F of N)w[F]=!0;return w}e.toHash=n;function a(N,w){return typeof w=="boolean"?w:Object.keys(w).length===0?!0:(o(N,w),!c(w,N.self.RULES.all))}e.alwaysValidSchema=a;function o(N,w=N.schema){const{opts:F,self:H}=N;if(!F.strictSchema||typeof w=="boolean")return;const B=H.RULES.keywords;for(const oe in w)B[oe]||J(N,`unknown keyword: "${oe}"`)}e.checkUnknownRules=o;function c(N,w){if(typeof N=="boolean")return!N;for(const F in N)if(w[F])return!0;return!1}e.schemaHasRules=c;function m(N,w){if(typeof N=="boolean")return!N;for(const F in N)if(F!=="$ref"&&w.all[F])return!0;return!1}e.schemaHasRulesButRef=m;function v({topSchemaRef:N,schemaPath:w},F,H,B){if(!B){if(typeof F=="number"||typeof F=="boolean")return F;if(typeof F=="string")return(0,t._)`${F}`}return(0,t._)`${N}${w}${(0,t.getProperty)(H)}`}e.schemaRefOrVal=v;function p(N){return D(decodeURIComponent(N))}e.unescapeFragment=p;function h(N){return encodeURIComponent(y(N))}e.escapeFragment=h;function y(N){return typeof N=="number"?`${N}`:N.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=y;function D(N){return N.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=D;function I(N,w){if(Array.isArray(N))for(const F of N)w(F);else w(N)}e.eachItem=I;function O({mergeNames:N,mergeToName:w,mergeValues:F,resultToName:H}){return(B,oe,X,re)=>{const Z=X===void 0?oe:X instanceof t.Name?(oe instanceof t.Name?N(B,oe,X):w(B,oe,X),X):oe instanceof t.Name?(w(B,X,oe),oe):F(oe,X);return re===t.Name&&!(Z instanceof t.Name)?H(B,Z):Z}}e.mergeEvaluated={props:O({mergeNames:(N,w,F)=>N.if((0,t._)`${F} !== true && ${w} !== undefined`,()=>{N.if((0,t._)`${w} === true`,()=>N.assign(F,!0),()=>N.assign(F,(0,t._)`${F} || {}`).code((0,t._)`Object.assign(${F}, ${w})`))}),mergeToName:(N,w,F)=>N.if((0,t._)`${F} !== true`,()=>{w===!0?N.assign(F,!0):(N.assign(F,(0,t._)`${F} || {}`),b(N,F,w))}),mergeValues:(N,w)=>N===!0?!0:{...N,...w},resultToName:A}),items:O({mergeNames:(N,w,F)=>N.if((0,t._)`${F} !== true && ${w} !== undefined`,()=>N.assign(F,(0,t._)`${w} === true ? true : ${F} > ${w} ? ${F} : ${w}`)),mergeToName:(N,w,F)=>N.if((0,t._)`${F} !== true`,()=>N.assign(F,w===!0?!0:(0,t._)`${F} > ${w} ? ${F} : ${w}`)),mergeValues:(N,w)=>N===!0?!0:Math.max(N,w),resultToName:(N,w)=>N.var("items",w)})};function A(N,w){if(w===!0)return N.var("props",!0);const F=N.var("props",(0,t._)`{}`);return w!==void 0&&b(N,F,w),F}e.evaluatedPropsToName=A;function b(N,w,F){Object.keys(F).forEach(H=>N.assign((0,t._)`${w}${(0,t.getProperty)(H)}`,!0))}e.setEvaluated=b;const u={};function _(N,w){return N.scopeValue("func",{ref:w,code:u[w.code]||(u[w.code]=new r._Code(w.code))})}e.useFunc=_;var P;(function(N){N[N.Num=0]="Num",N[N.Str=1]="Str"})(P=e.Type||(e.Type={}));function R(N,w,F){if(N instanceof t.Name){const H=w===P.Num;return F?H?(0,t._)`"[" + ${N} + "]"`:(0,t._)`"['" + ${N} + "']"`:H?(0,t._)`"/" + ${N}`:(0,t._)`"/" + ${N}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return F?(0,t.getProperty)(N).toString():"/"+y(N)}e.getErrorPath=R;function J(N,w,F=N.opts.strictSchema){if(!!F){if(w=`strict mode: ${w}`,F===!0)throw new Error(w);N.self.logger.warn(w)}}e.checkStrictMode=J})(ge);var Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});const Pe=ne,ys={data:new Pe.Name("data"),valCxt:new Pe.Name("valCxt"),instancePath:new Pe.Name("instancePath"),parentData:new Pe.Name("parentData"),parentDataProperty:new Pe.Name("parentDataProperty"),rootData:new Pe.Name("rootData"),dynamicAnchors:new Pe.Name("dynamicAnchors"),vErrors:new Pe.Name("vErrors"),errors:new Pe.Name("errors"),this:new Pe.Name("this"),self:new Pe.Name("self"),scope:new Pe.Name("scope"),json:new Pe.Name("json"),jsonPos:new Pe.Name("jsonPos"),jsonLen:new Pe.Name("jsonLen"),jsonPart:new Pe.Name("jsonPart")};Ie.default=ys;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=ne,r=ge,n=Ie;e.keywordError={message:({keyword:b})=>(0,t.str)`must pass "${b}" keyword validation`},e.keyword$DataError={message:({keyword:b,schemaType:u})=>u?(0,t.str)`"${b}" keyword must be ${u} ($data)`:(0,t.str)`"${b}" keyword is invalid ($data)`};function a(b,u=e.keywordError,_,P){const{it:R}=b,{gen:J,compositeRule:N,allErrors:w}=R,F=y(b,u,_);(P!=null?P:N||w)?v(J,F):p(R,(0,t._)`[${F}]`)}e.reportError=a;function o(b,u=e.keywordError,_){const{it:P}=b,{gen:R,compositeRule:J,allErrors:N}=P,w=y(b,u,_);v(R,w),J||N||p(P,n.default.vErrors)}e.reportExtraError=o;function c(b,u){b.assign(n.default.errors,u),b.if((0,t._)`${n.default.vErrors} !== null`,()=>b.if(u,()=>b.assign((0,t._)`${n.default.vErrors}.length`,u),()=>b.assign(n.default.vErrors,null)))}e.resetErrorsCount=c;function m({gen:b,keyword:u,schemaValue:_,data:P,errsCount:R,it:J}){if(R===void 0)throw new Error("ajv implementation error");const N=b.name("err");b.forRange("i",R,n.default.errors,w=>{b.const(N,(0,t._)`${n.default.vErrors}[${w}]`),b.if((0,t._)`${N}.instancePath === undefined`,()=>b.assign((0,t._)`${N}.instancePath`,(0,t.strConcat)(n.default.instancePath,J.errorPath))),b.assign((0,t._)`${N}.schemaPath`,(0,t.str)`${J.errSchemaPath}/${u}`),J.opts.verbose&&(b.assign((0,t._)`${N}.schema`,_),b.assign((0,t._)`${N}.data`,P))})}e.extendErrors=m;function v(b,u){const _=b.const("err",u);b.if((0,t._)`${n.default.vErrors} === null`,()=>b.assign(n.default.vErrors,(0,t._)`[${_}]`),(0,t._)`${n.default.vErrors}.push(${_})`),b.code((0,t._)`${n.default.errors}++`)}function p(b,u){const{gen:_,validateName:P,schemaEnv:R}=b;R.$async?_.throw((0,t._)`new ${b.ValidationError}(${u})`):(_.assign((0,t._)`${P}.errors`,u),_.return(!1))}const h={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function y(b,u,_){const{createErrors:P}=b.it;return P===!1?(0,t._)`{}`:D(b,u,_)}function D(b,u,_={}){const{gen:P,it:R}=b,J=[I(R,_),O(b,_)];return A(b,u,J),P.object(...J)}function I({errorPath:b},{instancePath:u}){const _=u?(0,t.str)`${b}${(0,r.getErrorPath)(u,r.Type.Str)}`:b;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,_)]}function O({keyword:b,it:{errSchemaPath:u}},{schemaPath:_,parentSchema:P}){let R=P?u:(0,t.str)`${u}/${b}`;return _&&(R=(0,t.str)`${R}${(0,r.getErrorPath)(_,r.Type.Str)}`),[h.schemaPath,R]}function A(b,{params:u,message:_},P){const{keyword:R,data:J,schemaValue:N,it:w}=b,{opts:F,propertyName:H,topSchemaRef:B,schemaPath:oe}=w;P.push([h.keyword,R],[h.params,typeof u=="function"?u(b):u||(0,t._)`{}`]),F.messages&&P.push([h.message,typeof _=="function"?_(b):_]),F.verbose&&P.push([h.schema,N],[h.parentSchema,(0,t._)`${B}${oe}`],[n.default.data,J]),H&&P.push([h.propertyName,H])}})(xt);Object.defineProperty(At,"__esModule",{value:!0});At.boolOrEmptySchema=At.topBoolOrEmptySchema=void 0;const vs=xt,gs=ne,_s=Ie,$s={message:"boolean schema is false"};function Ss(e){const{gen:t,schema:r,validateName:n}=e;r===!1?ta(e,!1):typeof r=="object"&&r.$async===!0?t.return(_s.default.data):(t.assign((0,gs._)`${n}.errors`,null),t.return(!0))}At.topBoolOrEmptySchema=Ss;function Ps(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),ta(e)):r.var(t,!0)}At.boolOrEmptySchema=Ps;function ta(e,t){const{gen:r,data:n}=e,a={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,vs.reportError)(a,$s,void 0,t)}var $r={},yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.getRules=yt.isJSONType=void 0;const Es=["string","number","integer","boolean","null","object","array"],Ns=new Set(Es);function bs(e){return typeof e=="string"&&Ns.has(e)}yt.isJSONType=bs;function ws(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}yt.getRules=ws;var We={};Object.defineProperty(We,"__esModule",{value:!0});We.shouldUseRule=We.shouldUseGroup=We.schemaHasRulesForType=void 0;function Ds({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&ra(e,n)}We.schemaHasRulesForType=Ds;function ra(e,t){return t.rules.some(r=>na(e,r))}We.shouldUseGroup=ra;function na(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}We.shouldUseRule=na;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=yt,r=We,n=xt,a=ne,o=ge;var c;(function(P){P[P.Correct=0]="Correct",P[P.Wrong=1]="Wrong"})(c=e.DataType||(e.DataType={}));function m(P){const R=v(P.type);if(R.includes("null")){if(P.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!R.length&&P.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');P.nullable===!0&&R.push("null")}return R}e.getSchemaTypes=m;function v(P){const R=Array.isArray(P)?P:P?[P]:[];if(R.every(t.isJSONType))return R;throw new Error("type must be JSONType or JSONType[]: "+R.join(","))}e.getJSONTypes=v;function p(P,R){const{gen:J,data:N,opts:w}=P,F=y(R,w.coerceTypes),H=R.length>0&&!(F.length===0&&R.length===1&&(0,r.schemaHasRulesForType)(P,R[0]));if(H){const B=A(R,N,w.strictNumbers,c.Wrong);J.if(B,()=>{F.length?D(P,R,F):u(P)})}return H}e.coerceAndCheckDataType=p;const h=new Set(["string","number","integer","boolean","null"]);function y(P,R){return R?P.filter(J=>h.has(J)||R==="array"&&J==="array"):[]}function D(P,R,J){const{gen:N,data:w,opts:F}=P,H=N.let("dataType",(0,a._)`typeof ${w}`),B=N.let("coerced",(0,a._)`undefined`);F.coerceTypes==="array"&&N.if((0,a._)`${H} == 'object' && Array.isArray(${w}) && ${w}.length == 1`,()=>N.assign(w,(0,a._)`${w}[0]`).assign(H,(0,a._)`typeof ${w}`).if(A(R,w,F.strictNumbers),()=>N.assign(B,w))),N.if((0,a._)`${B} !== undefined`);for(const X of J)(h.has(X)||X==="array"&&F.coerceTypes==="array")&&oe(X);N.else(),u(P),N.endIf(),N.if((0,a._)`${B} !== undefined`,()=>{N.assign(w,B),I(P,B)});function oe(X){switch(X){case"string":N.elseIf((0,a._)`${H} == "number" || ${H} == "boolean"`).assign(B,(0,a._)`"" + ${w}`).elseIf((0,a._)`${w} === null`).assign(B,(0,a._)`""`);return;case"number":N.elseIf((0,a._)`${H} == "boolean" || ${w} === null
              || (${H} == "string" && ${w} && ${w} == +${w})`).assign(B,(0,a._)`+${w}`);return;case"integer":N.elseIf((0,a._)`${H} === "boolean" || ${w} === null
              || (${H} === "string" && ${w} && ${w} == +${w} && !(${w} % 1))`).assign(B,(0,a._)`+${w}`);return;case"boolean":N.elseIf((0,a._)`${w} === "false" || ${w} === 0 || ${w} === null`).assign(B,!1).elseIf((0,a._)`${w} === "true" || ${w} === 1`).assign(B,!0);return;case"null":N.elseIf((0,a._)`${w} === "" || ${w} === 0 || ${w} === false`),N.assign(B,null);return;case"array":N.elseIf((0,a._)`${H} === "string" || ${H} === "number"
              || ${H} === "boolean" || ${w} === null`).assign(B,(0,a._)`[${w}]`)}}}function I({gen:P,parentData:R,parentDataProperty:J},N){P.if((0,a._)`${R} !== undefined`,()=>P.assign((0,a._)`${R}[${J}]`,N))}function O(P,R,J,N=c.Correct){const w=N===c.Correct?a.operators.EQ:a.operators.NEQ;let F;switch(P){case"null":return(0,a._)`${R} ${w} null`;case"array":F=(0,a._)`Array.isArray(${R})`;break;case"object":F=(0,a._)`${R} && typeof ${R} == "object" && !Array.isArray(${R})`;break;case"integer":F=H((0,a._)`!(${R} % 1) && !isNaN(${R})`);break;case"number":F=H();break;default:return(0,a._)`typeof ${R} ${w} ${P}`}return N===c.Correct?F:(0,a.not)(F);function H(B=a.nil){return(0,a.and)((0,a._)`typeof ${R} == "number"`,B,J?(0,a._)`isFinite(${R})`:a.nil)}}e.checkDataType=O;function A(P,R,J,N){if(P.length===1)return O(P[0],R,J,N);let w;const F=(0,o.toHash)(P);if(F.array&&F.object){const H=(0,a._)`typeof ${R} != "object"`;w=F.null?H:(0,a._)`!${R} || ${H}`,delete F.null,delete F.array,delete F.object}else w=a.nil;F.number&&delete F.integer;for(const H in F)w=(0,a.and)(w,O(H,R,J,N));return w}e.checkDataTypes=A;const b={message:({schema:P})=>`must be ${P}`,params:({schema:P,schemaValue:R})=>typeof P=="string"?(0,a._)`{type: ${P}}`:(0,a._)`{type: ${R}}`};function u(P){const R=_(P);(0,n.reportError)(R,b)}e.reportTypeError=u;function _(P){const{gen:R,data:J,schema:N}=P,w=(0,o.schemaRefOrVal)(P,N,"type");return{gen:R,keyword:"type",data:J,schema:N.type,schemaCode:w,schemaValue:w,parentSchema:N,params:{},it:P}}})($r);var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.assignDefaults=void 0;const Rt=ne,Ts=ge;function Os(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const a in r)Tn(e,a,r[a].default);else t==="array"&&Array.isArray(n)&&n.forEach((a,o)=>Tn(e,o,a.default))}Sr.assignDefaults=Os;function Tn(e,t,r){const{gen:n,compositeRule:a,data:o,opts:c}=e;if(r===void 0)return;const m=(0,Rt._)`${o}${(0,Rt.getProperty)(t)}`;if(a){(0,Ts.checkStrictMode)(e,`default is ignored for: ${m}`);return}let v=(0,Rt._)`${m} === undefined`;c.useDefaults==="empty"&&(v=(0,Rt._)`${v} || ${m} === null || ${m} === ""`),n.if(v,(0,Rt._)`${m} = ${(0,Rt.stringify)(r)}`)}var He={},te={};Object.defineProperty(te,"__esModule",{value:!0});te.validateUnion=te.validateArray=te.usePattern=te.callValidateCode=te.schemaProperties=te.allSchemaProperties=te.noPropertyInData=te.propertyInData=te.isOwnProperty=te.hasPropFunc=te.reportMissingProp=te.checkMissingProp=te.checkReportMissingProp=void 0;const ce=ne,jr=ge,rt=Ie,Rs=ge;function Cs(e,t){const{gen:r,data:n,it:a}=e;r.if(Jr(r,n,t,a.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ce._)`${t}`},!0),e.error()})}te.checkReportMissingProp=Cs;function Is({gen:e,data:t,it:{opts:r}},n,a){return(0,ce.or)(...n.map(o=>(0,ce.and)(Jr(e,t,o,r.ownProperties),(0,ce._)`${a} = ${o}`)))}te.checkMissingProp=Is;function As(e,t){e.setParams({missingProperty:t},!0),e.error()}te.reportMissingProp=As;function aa(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ce._)`Object.prototype.hasOwnProperty`})}te.hasPropFunc=aa;function kr(e,t,r){return(0,ce._)`${aa(e)}.call(${t}, ${r})`}te.isOwnProperty=kr;function Fs(e,t,r,n){const a=(0,ce._)`${t}${(0,ce.getProperty)(r)} !== undefined`;return n?(0,ce._)`${a} && ${kr(e,t,r)}`:a}te.propertyInData=Fs;function Jr(e,t,r,n){const a=(0,ce._)`${t}${(0,ce.getProperty)(r)} === undefined`;return n?(0,ce.or)(a,(0,ce.not)(kr(e,t,r))):a}te.noPropertyInData=Jr;function sa(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}te.allSchemaProperties=sa;function Ls(e,t){return sa(t).filter(r=>!(0,jr.alwaysValidSchema)(e,t[r]))}te.schemaProperties=Ls;function Vs({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:a,errorPath:o},it:c},m,v,p){const h=p?(0,ce._)`${e}, ${t}, ${n}${a}`:t,y=[[rt.default.instancePath,(0,ce.strConcat)(rt.default.instancePath,o)],[rt.default.parentData,c.parentData],[rt.default.parentDataProperty,c.parentDataProperty],[rt.default.rootData,rt.default.rootData]];c.opts.dynamicRef&&y.push([rt.default.dynamicAnchors,rt.default.dynamicAnchors]);const D=(0,ce._)`${h}, ${r.object(...y)}`;return v!==ce.nil?(0,ce._)`${m}.call(${v}, ${D})`:(0,ce._)`${m}(${D})`}te.callValidateCode=Vs;const Us=(0,ce._)`new RegExp`;function Ms({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:a}=t.code,o=a(r,n);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,ce._)`${a.code==="new RegExp"?Us:(0,Rs.useFunc)(e,a)}(${r}, ${n})`})}te.usePattern=Ms;function Ks(e){const{gen:t,data:r,keyword:n,it:a}=e,o=t.name("valid");if(a.allErrors){const m=t.let("valid",!0);return c(()=>t.assign(m,!1)),m}return t.var(o,!0),c(()=>t.break()),o;function c(m){const v=t.const("len",(0,ce._)`${r}.length`);t.forRange("i",0,v,p=>{e.subschema({keyword:n,dataProp:p,dataPropType:jr.Type.Num},o),t.if((0,ce.not)(o),m)})}}te.validateArray=Ks;function js(e){const{gen:t,schema:r,keyword:n,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(v=>(0,jr.alwaysValidSchema)(a,v))&&!a.opts.unevaluated)return;const c=t.let("valid",!1),m=t.name("_valid");t.block(()=>r.forEach((v,p)=>{const h=e.subschema({keyword:n,schemaProp:p,compositeRule:!0},m);t.assign(c,(0,ce._)`${c} || ${m}`),e.mergeValidEvaluated(h,m)||t.if((0,ce.not)(c))})),e.result(c,()=>e.reset(),()=>e.error(!0))}te.validateUnion=js;Object.defineProperty(He,"__esModule",{value:!0});He.validateKeywordUsage=He.validSchemaType=He.funcKeywordCode=He.macroKeywordCode=void 0;const be=ne,mt=Ie,ks=te,Js=xt;function Hs(e,t){const{gen:r,keyword:n,schema:a,parentSchema:o,it:c}=e,m=t.macro.call(c.self,a,o,c),v=oa(r,n,m);c.opts.validateSchema!==!1&&c.self.validateSchema(m,!0);const p=r.name("valid");e.subschema({schema:m,schemaPath:be.nil,errSchemaPath:`${c.errSchemaPath}/${n}`,topSchemaRef:v,compositeRule:!0},p),e.pass(p,()=>e.error(!0))}He.macroKeywordCode=Hs;function Ys(e,t){var r;const{gen:n,keyword:a,schema:o,parentSchema:c,$data:m,it:v}=e;Zs(v,t);const p=!m&&t.compile?t.compile.call(v.self,o,c,v):t.validate,h=oa(n,a,p),y=n.let("valid");e.block$data(y,D),e.ok((r=t.valid)!==null&&r!==void 0?r:y);function D(){if(t.errors===!1)A(),t.modifying&&On(e),b(()=>e.error());else{const u=t.async?I():O();t.modifying&&On(e),b(()=>Gs(e,u))}}function I(){const u=n.let("ruleErrs",null);return n.try(()=>A((0,be._)`await `),_=>n.assign(y,!1).if((0,be._)`${_} instanceof ${v.ValidationError}`,()=>n.assign(u,(0,be._)`${_}.errors`),()=>n.throw(_))),u}function O(){const u=(0,be._)`${h}.errors`;return n.assign(u,null),A(be.nil),u}function A(u=t.async?(0,be._)`await `:be.nil){const _=v.opts.passContext?mt.default.this:mt.default.self,P=!("compile"in t&&!m||t.schema===!1);n.assign(y,(0,be._)`${u}${(0,ks.callValidateCode)(e,h,_,P)}`,t.modifying)}function b(u){var _;n.if((0,be.not)((_=t.valid)!==null&&_!==void 0?_:y),u)}}He.funcKeywordCode=Ys;function On(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,be._)`${n.parentData}[${n.parentDataProperty}]`))}function Gs(e,t){const{gen:r}=e;r.if((0,be._)`Array.isArray(${t})`,()=>{r.assign(mt.default.vErrors,(0,be._)`${mt.default.vErrors} === null ? ${t} : ${mt.default.vErrors}.concat(${t})`).assign(mt.default.errors,(0,be._)`${mt.default.vErrors}.length`),(0,Js.extendErrors)(e)},()=>e.error())}function Zs({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function oa(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,be.stringify)(r)})}function Bs(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e=="undefined")}He.validSchemaType=Bs;function Xs({schema:e,opts:t,self:r,errSchemaPath:n},a,o){if(Array.isArray(a.keyword)?!a.keyword.includes(o):a.keyword!==o)throw new Error("ajv implementation error");const c=a.dependencies;if(c!=null&&c.some(m=>!Object.prototype.hasOwnProperty.call(e,m)))throw new Error(`parent schema must have dependencies of ${o}: ${c.join(",")}`);if(a.validateSchema&&!a.validateSchema(e[o])){const v=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(a.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(v);else throw new Error(v)}}He.validateKeywordUsage=Xs;var ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.extendSubschemaMode=ot.extendSubschemaData=ot.getSubschema=void 0;const Je=ne,ia=ge;function Qs(e,{keyword:t,schemaProp:r,schema:n,schemaPath:a,errSchemaPath:o,topSchemaRef:c}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const m=e.schema[t];return r===void 0?{schema:m,schemaPath:(0,Je._)`${e.schemaPath}${(0,Je.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:m[r],schemaPath:(0,Je._)`${e.schemaPath}${(0,Je.getProperty)(t)}${(0,Je.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,ia.escapeFragment)(r)}`}}if(n!==void 0){if(a===void 0||o===void 0||c===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:a,topSchemaRef:c,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}ot.getSubschema=Qs;function Ws(e,t,{dataProp:r,dataPropType:n,data:a,dataTypes:o,propertyName:c}){if(a!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:m}=t;if(r!==void 0){const{errorPath:p,dataPathArr:h,opts:y}=t,D=m.let("data",(0,Je._)`${t.data}${(0,Je.getProperty)(r)}`,!0);v(D),e.errorPath=(0,Je.str)`${p}${(0,ia.getErrorPath)(r,n,y.jsPropertySyntax)}`,e.parentDataProperty=(0,Je._)`${r}`,e.dataPathArr=[...h,e.parentDataProperty]}if(a!==void 0){const p=a instanceof Je.Name?a:m.let("data",a,!0);v(p),c!==void 0&&(e.propertyName=c)}o&&(e.dataTypes=o);function v(p){e.data=p,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,p]}}ot.extendSubschemaData=Ws;function zs(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:a,allErrors:o}){n!==void 0&&(e.compositeRule=n),a!==void 0&&(e.createErrors=a),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}ot.extendSubschemaMode=zs;var $e={},qs=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[a]))return!1;for(a=n;a--!==0;){var c=o[a];if(!e(t[c],r[c]))return!1}return!0}return t!==t&&r!==r},ca={exports:{}},at=ca.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},a=r.post||function(){};hr(t,n,a,e,"",e)};at.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};at.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};at.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};at.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function hr(e,t,r,n,a,o,c,m,v,p){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,a,o,c,m,v,p);for(var h in n){var y=n[h];if(Array.isArray(y)){if(h in at.arrayKeywords)for(var D=0;D<y.length;D++)hr(e,t,r,y[D],a+"/"+h+"/"+D,o,a,h,n,D)}else if(h in at.propsKeywords){if(y&&typeof y=="object")for(var I in y)hr(e,t,r,y[I],a+"/"+h+"/"+xs(I),o,a,h,n,I)}else(h in at.keywords||e.allKeys&&!(h in at.skipKeywords))&&hr(e,t,r,y,a+"/"+h,o,a,h,n)}r(n,a,o,c,m,v,p)}}function xs(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty($e,"__esModule",{value:!0});$e.getSchemaRefs=$e.resolveUrl=$e.normalizeId=$e._getFullPath=$e.getFullPath=$e.inlineRef=void 0;const eo=ge,to=qs,ro=ca.exports,no=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ao(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Vr(e):t?la(e)<=t:!1}$e.inlineRef=ao;const so=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Vr(e){for(const t in e){if(so.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(Vr)||typeof r=="object"&&Vr(r))return!0}return!1}function la(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!no.has(r)&&(typeof e[r]=="object"&&(0,eo.eachItem)(e[r],n=>t+=la(n)),t===1/0))return 1/0}return t}function ua(e,t="",r){r!==!1&&(t=It(t));const n=e.parse(t);return da(e,n)}$e.getFullPath=ua;function da(e,t){return e.serialize(t).split("#")[0]+"#"}$e._getFullPath=da;const oo=/#\/?$/;function It(e){return e?e.replace(oo,""):""}$e.normalizeId=It;function io(e,t,r){return r=It(r),e.resolve(t,r)}$e.resolveUrl=io;const co=/^[a-z_][-a-z0-9._]*$/i;function lo(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,a=It(e[r]||t),o={"":a},c=ua(n,a,!1),m={},v=new Set;return ro(e,{allKeys:!0},(y,D,I,O)=>{if(O===void 0)return;const A=c+D;let b=o[O];typeof y[r]=="string"&&(b=u.call(this,y[r])),_.call(this,y.$anchor),_.call(this,y.$dynamicAnchor),o[D]=b;function u(P){const R=this.opts.uriResolver.resolve;if(P=It(b?R(b,P):P),v.has(P))throw h(P);v.add(P);let J=this.refs[P];return typeof J=="string"&&(J=this.refs[J]),typeof J=="object"?p(y,J.schema,P):P!==It(A)&&(P[0]==="#"?(p(y,m[P],P),m[P]=y):this.refs[P]=A),P}function _(P){if(typeof P=="string"){if(!co.test(P))throw new Error(`invalid anchor "${P}"`);u.call(this,`#${P}`)}}}),m;function p(y,D,I){if(D!==void 0&&!to(y,D))throw h(I)}function h(y){return new Error(`reference "${y}" resolves to more than one schema`)}}$e.getSchemaRefs=lo;Object.defineProperty(Ye,"__esModule",{value:!0});Ye.getData=Ye.KeywordCxt=Ye.validateFunctionCode=void 0;const fa=At,Rn=$r,Hr=We,_r=$r,uo=Sr,Xt=He,Or=ot,M=ne,Y=Ie,fo=$e,ze=ge,Zt=xt;function ho(e){if(ma(e)&&(ya(e),pa(e))){yo(e);return}ha(e,()=>(0,fa.topBoolOrEmptySchema)(e))}Ye.validateFunctionCode=ho;function ha({gen:e,validateName:t,schema:r,schemaEnv:n,opts:a},o){a.code.es5?e.func(t,(0,M._)`${Y.default.data}, ${Y.default.valCxt}`,n.$async,()=>{e.code((0,M._)`"use strict"; ${Cn(r,a)}`),mo(e,a),e.code(o)}):e.func(t,(0,M._)`${Y.default.data}, ${po(a)}`,n.$async,()=>e.code(Cn(r,a)).code(o))}function po(e){return(0,M._)`{${Y.default.instancePath}="", ${Y.default.parentData}, ${Y.default.parentDataProperty}, ${Y.default.rootData}=${Y.default.data}${e.dynamicRef?(0,M._)`, ${Y.default.dynamicAnchors}={}`:M.nil}}={}`}function mo(e,t){e.if(Y.default.valCxt,()=>{e.var(Y.default.instancePath,(0,M._)`${Y.default.valCxt}.${Y.default.instancePath}`),e.var(Y.default.parentData,(0,M._)`${Y.default.valCxt}.${Y.default.parentData}`),e.var(Y.default.parentDataProperty,(0,M._)`${Y.default.valCxt}.${Y.default.parentDataProperty}`),e.var(Y.default.rootData,(0,M._)`${Y.default.valCxt}.${Y.default.rootData}`),t.dynamicRef&&e.var(Y.default.dynamicAnchors,(0,M._)`${Y.default.valCxt}.${Y.default.dynamicAnchors}`)},()=>{e.var(Y.default.instancePath,(0,M._)`""`),e.var(Y.default.parentData,(0,M._)`undefined`),e.var(Y.default.parentDataProperty,(0,M._)`undefined`),e.var(Y.default.rootData,Y.default.data),t.dynamicRef&&e.var(Y.default.dynamicAnchors,(0,M._)`{}`)})}function yo(e){const{schema:t,opts:r,gen:n}=e;ha(e,()=>{r.$comment&&t.$comment&&ga(e),So(e),n.let(Y.default.vErrors,null),n.let(Y.default.errors,0),r.unevaluated&&vo(e),va(e),No(e)})}function vo(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,M._)`${r}.evaluated`),t.if((0,M._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,M._)`${e.evaluated}.props`,(0,M._)`undefined`)),t.if((0,M._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,M._)`${e.evaluated}.items`,(0,M._)`undefined`))}function Cn(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,M._)`/*# sourceURL=${r} */`:M.nil}function go(e,t){if(ma(e)&&(ya(e),pa(e))){_o(e,t);return}(0,fa.boolOrEmptySchema)(e,t)}function pa({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function ma(e){return typeof e.schema!="boolean"}function _o(e,t){const{schema:r,gen:n,opts:a}=e;a.$comment&&r.$comment&&ga(e),Po(e),Eo(e);const o=n.const("_errs",Y.default.errors);va(e,o),n.var(t,(0,M._)`${o} === ${Y.default.errors}`)}function ya(e){(0,ze.checkUnknownRules)(e),$o(e)}function va(e,t){if(e.opts.jtd)return In(e,[],!1,t);const r=(0,Rn.getSchemaTypes)(e.schema),n=(0,Rn.coerceAndCheckDataType)(e,r);In(e,r,!n,t)}function $o(e){const{schema:t,errSchemaPath:r,opts:n,self:a}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,ze.schemaHasRulesButRef)(t,a.RULES)&&a.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function So(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ze.checkStrictMode)(e,"default is ignored in the schema root")}function Po(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,fo.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Eo(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function ga({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:a}){const o=r.$comment;if(a.$comment===!0)e.code((0,M._)`${Y.default.self}.logger.log(${o})`);else if(typeof a.$comment=="function"){const c=(0,M.str)`${n}/$comment`,m=e.scopeValue("root",{ref:t.root});e.code((0,M._)`${Y.default.self}.opts.$comment(${o}, ${c}, ${m}.schema)`)}}function No(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:a,opts:o}=e;r.$async?t.if((0,M._)`${Y.default.errors} === 0`,()=>t.return(Y.default.data),()=>t.throw((0,M._)`new ${a}(${Y.default.vErrors})`)):(t.assign((0,M._)`${n}.errors`,Y.default.vErrors),o.unevaluated&&bo(e),t.return((0,M._)`${Y.default.errors} === 0`))}function bo({gen:e,evaluated:t,props:r,items:n}){r instanceof M.Name&&e.assign((0,M._)`${t}.props`,r),n instanceof M.Name&&e.assign((0,M._)`${t}.items`,n)}function In(e,t,r,n){const{gen:a,schema:o,data:c,allErrors:m,opts:v,self:p}=e,{RULES:h}=p;if(o.$ref&&(v.ignoreKeywordsWithRef||!(0,ze.schemaHasRulesButRef)(o,h))){a.block(()=>Sa(e,"$ref",h.all.$ref.definition));return}v.jtd||wo(e,t),a.block(()=>{for(const D of h.rules)y(D);y(h.post)});function y(D){!(0,Hr.shouldUseGroup)(o,D)||(D.type?(a.if((0,_r.checkDataType)(D.type,c,v.strictNumbers)),An(e,D),t.length===1&&t[0]===D.type&&r&&(a.else(),(0,_r.reportTypeError)(e)),a.endIf()):An(e,D),m||a.if((0,M._)`${Y.default.errors} === ${n||0}`))}}function An(e,t){const{gen:r,schema:n,opts:{useDefaults:a}}=e;a&&(0,uo.assignDefaults)(e,t.type),r.block(()=>{for(const o of t.rules)(0,Hr.shouldUseRule)(n,o)&&Sa(e,o.keyword,o.definition,t.type)})}function wo(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Do(e,t),e.opts.allowUnionTypes||To(e,t),Oo(e,e.dataTypes))}function Do(e,t){if(!!t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{_a(e.dataTypes,r)||Yr(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),Co(e,t)}}function To(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Yr(e,"use allowUnionTypes to allow union type keyword")}function Oo(e,t){const r=e.self.RULES.all;for(const n in r){const a=r[n];if(typeof a=="object"&&(0,Hr.shouldUseRule)(e.schema,a)){const{type:o}=a.definition;o.length&&!o.some(c=>Ro(t,c))&&Yr(e,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function Ro(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function _a(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Co(e,t){const r=[];for(const n of e.dataTypes)_a(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function Yr(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,ze.checkStrictMode)(e,t,e.opts.strictTypes)}class $a{constructor(t,r,n){if((0,Xt.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ze.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",Pa(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Xt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Y.default.errors))}result(t,r,n){this.failResult((0,M.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,M.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,M._)`${r} !== undefined && (${(0,M.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?Zt.reportExtraError:Zt.reportError)(this,this.def.error,r)}$dataError(){(0,Zt.reportError)(this,this.def.$dataError||Zt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Zt.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=M.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=M.nil,r=M.nil){if(!this.$data)return;const{gen:n,schemaCode:a,schemaType:o,def:c}=this;n.if((0,M.or)((0,M._)`${a} === undefined`,r)),t!==M.nil&&n.assign(t,!0),(o.length||c.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==M.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:a,it:o}=this;return(0,M.or)(c(),m());function c(){if(n.length){if(!(r instanceof M.Name))throw new Error("ajv implementation error");const v=Array.isArray(n)?n:[n];return(0,M._)`${(0,_r.checkDataTypes)(v,r,o.opts.strictNumbers,_r.DataType.Wrong)}`}return M.nil}function m(){if(a.validateSchema){const v=t.scopeValue("validate$data",{ref:a.validateSchema});return(0,M._)`!${v}(${r})`}return M.nil}}subschema(t,r){const n=(0,Or.getSubschema)(this.it,t);(0,Or.extendSubschemaData)(n,this.it,t),(0,Or.extendSubschemaMode)(n,t);const a={...this.it,...n,items:void 0,props:void 0};return go(a,r),a}mergeEvaluated(t,r){const{it:n,gen:a}=this;!n.opts.unevaluated||(n.props!==!0&&t.props!==void 0&&(n.props=ze.mergeEvaluated.props(a,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=ze.mergeEvaluated.items(a,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:a}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return a.if(r,()=>this.mergeEvaluated(t,M.Name)),!0}}Ye.KeywordCxt=$a;function Sa(e,t,r,n){const a=new $a(e,r,t);"code"in r?r.code(a,n):a.$data&&r.validate?(0,Xt.funcKeywordCode)(a,r):"macro"in r?(0,Xt.macroKeywordCode)(a,r):(r.compile||r.validate)&&(0,Xt.funcKeywordCode)(a,r)}const Io=/^\/(?:[^~]|~0|~1)*$/,Ao=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Pa(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let a,o;if(e==="")return Y.default.rootData;if(e[0]==="/"){if(!Io.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);a=e,o=Y.default.rootData}else{const p=Ao.exec(e);if(!p)throw new Error(`Invalid JSON-pointer: ${e}`);const h=+p[1];if(a=p[2],a==="#"){if(h>=t)throw new Error(v("property/index",h));return n[t-h]}if(h>t)throw new Error(v("data",h));if(o=r[t-h],!a)return o}let c=o;const m=a.split("/");for(const p of m)p&&(o=(0,M._)`${o}${(0,M.getProperty)((0,ze.unescapeJsonPointer)(p))}`,c=(0,M._)`${c} && ${o}`);return c;function v(p,h){return`Cannot access ${p} ${h} levels up, current level is ${t}`}}Ye.getData=Pa;var er={};Object.defineProperty(er,"__esModule",{value:!0});class Fo extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}er.default=Fo;var ct={};Object.defineProperty(ct,"__esModule",{value:!0});const Rr=$e;class Lo extends Error{constructor(t,r,n,a){super(a||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Rr.resolveUrl)(t,r,n),this.missingSchema=(0,Rr.normalizeId)((0,Rr.getFullPath)(t,this.missingRef))}}ct.default=Lo;var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.resolveSchema=Ee.getCompilingSchema=Ee.resolveRef=Ee.compileSchema=Ee.SchemaEnv=void 0;const Fe=ne,Vo=er,ht=Ie,Le=$e,Fn=ge,Uo=Ye;class Pr{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,Le.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}Ee.SchemaEnv=Pr;function Gr(e){const t=Ea.call(this,e);if(t)return t;const r=(0,Le.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:a}=this.opts.code,{ownProperties:o}=this.opts,c=new Fe.CodeGen(this.scope,{es5:n,lines:a,ownProperties:o});let m;e.$async&&(m=c.scopeValue("Error",{ref:Vo.default,code:(0,Fe._)`require("ajv/dist/runtime/validation_error").default`}));const v=c.scopeName("validate");e.validateName=v;const p={gen:c,allErrors:this.opts.allErrors,data:ht.default.data,parentData:ht.default.parentData,parentDataProperty:ht.default.parentDataProperty,dataNames:[ht.default.data],dataPathArr:[Fe.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:c.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Fe.stringify)(e.schema)}:{ref:e.schema}),validateName:v,ValidationError:m,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Fe.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Fe._)`""`,opts:this.opts,self:this};let h;try{this._compilations.add(e),(0,Uo.validateFunctionCode)(p),c.optimize(this.opts.code.optimize);const y=c.toString();h=`${c.scopeRefs(ht.default.scope)}return ${y}`,this.opts.code.process&&(h=this.opts.code.process(h,e));const I=new Function(`${ht.default.self}`,`${ht.default.scope}`,h)(this,this.scope.get());if(this.scope.value(v,{ref:I}),I.errors=null,I.schema=e.schema,I.schemaEnv=e,e.$async&&(I.$async=!0),this.opts.code.source===!0&&(I.source={validateName:v,validateCode:y,scopeValues:c._values}),this.opts.unevaluated){const{props:O,items:A}=p;I.evaluated={props:O instanceof Fe.Name?void 0:O,items:A instanceof Fe.Name?void 0:A,dynamicProps:O instanceof Fe.Name,dynamicItems:A instanceof Fe.Name},I.source&&(I.source.evaluated=(0,Fe.stringify)(I.evaluated))}return e.validate=I,e}catch(y){throw delete e.validate,delete e.validateName,h&&this.logger.error("Error compiling schema, function code:",h),y}finally{this._compilations.delete(e)}}Ee.compileSchema=Gr;function Mo(e,t,r){var n;r=(0,Le.resolveUrl)(this.opts.uriResolver,t,r);const a=e.refs[r];if(a)return a;let o=ko.call(this,e,r);if(o===void 0){const c=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:m}=this.opts;c&&(o=new Pr({schema:c,schemaId:m,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=Ko.call(this,o)}Ee.resolveRef=Mo;function Ko(e){return(0,Le.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Gr.call(this,e)}function Ea(e){for(const t of this._compilations)if(jo(t,e))return t}Ee.getCompilingSchema=Ea;function jo(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function ko(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||Er.call(this,e,t)}function Er(e,t){const r=this.opts.uriResolver.parse(t),n=(0,Le._getFullPath)(this.opts.uriResolver,r);let a=(0,Le.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===a)return Cr.call(this,r,e);const o=(0,Le.normalizeId)(n),c=this.refs[o]||this.schemas[o];if(typeof c=="string"){const m=Er.call(this,e,c);return typeof(m==null?void 0:m.schema)!="object"?void 0:Cr.call(this,r,m)}if(typeof(c==null?void 0:c.schema)=="object"){if(c.validate||Gr.call(this,c),o===(0,Le.normalizeId)(t)){const{schema:m}=c,{schemaId:v}=this.opts,p=m[v];return p&&(a=(0,Le.resolveUrl)(this.opts.uriResolver,a,p)),new Pr({schema:m,schemaId:v,root:e,baseId:a})}return Cr.call(this,r,c)}}Ee.resolveSchema=Er;const Jo=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Cr(e,{baseId:t,schema:r,root:n}){var a;if(((a=e.fragment)===null||a===void 0?void 0:a[0])!=="/")return;for(const m of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const v=r[(0,Fn.unescapeFragment)(m)];if(v===void 0)return;r=v;const p=typeof r=="object"&&r[this.opts.schemaId];!Jo.has(m)&&p&&(t=(0,Le.resolveUrl)(this.opts.uriResolver,t,p))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Fn.schemaHasRulesButRef)(r,this.RULES)){const m=(0,Le.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=Er.call(this,n,m)}const{schemaId:c}=this.opts;if(o=o||new Pr({schema:r,schemaId:c,root:n,baseId:t}),o.schema!==o.root.schema)return o}const Ho="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Yo="Meta-schema for $data reference (JSON AnySchema extension proposal)",Go="object",Zo=["$data"],Bo={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Xo=!1;var Qo={$id:Ho,description:Yo,type:Go,required:Zo,properties:Bo,additionalProperties:Xo},Zr={},Ur={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(r,n){n(t)})(ps,function(r){function n(){for(var l=arguments.length,i=Array(l),f=0;f<l;f++)i[f]=arguments[f];if(i.length>1){i[0]=i[0].slice(0,-1);for(var E=i.length-1,S=1;S<E;++S)i[S]=i[S].slice(1,-1);return i[E]=i[E].slice(1),i.join("")}else return i[0]}function a(l){return"(?:"+l+")"}function o(l){return l===void 0?"undefined":l===null?"null":Object.prototype.toString.call(l).split(" ").pop().split("]").shift().toLowerCase()}function c(l){return l.toUpperCase()}function m(l){return l!=null?l instanceof Array?l:typeof l.length!="number"||l.split||l.setInterval||l.call?[l]:Array.prototype.slice.call(l):[]}function v(l,i){var f=l;if(i)for(var E in i)f[E]=i[E];return f}function p(l){var i="[A-Za-z]",f="[0-9]",E=n(f,"[A-Fa-f]"),S=a(a("%[EFef]"+E+"%"+E+E+"%"+E+E)+"|"+a("%[89A-Fa-f]"+E+"%"+E+E)+"|"+a("%"+E+E)),j="[\\:\\/\\?\\#\\[\\]\\@]",k="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",ee=n(j,k),ie=l?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",pe=l?"[\\uE000-\\uF8FF]":"[]",z=n(i,f,"[\\-\\.\\_\\~]",ie);a(i+n(i,f,"[\\+\\-\\.]")+"*"),a(a(S+"|"+n(z,k,"[\\:]"))+"*");var ae=a(a("25[0-5]")+"|"+a("2[0-4]"+f)+"|"+a("1"+f+f)+"|"+a("0?[1-9]"+f)+"|0?0?"+f),me=a(ae+"\\."+ae+"\\."+ae+"\\."+ae),G=a(E+"{1,4}"),ue=a(a(G+"\\:"+G)+"|"+me),ye=a(a(G+"\\:")+"{6}"+ue),de=a("\\:\\:"+a(G+"\\:")+"{5}"+ue),tt=a(a(G)+"?\\:\\:"+a(G+"\\:")+"{4}"+ue),Ke=a(a(a(G+"\\:")+"{0,1}"+G)+"?\\:\\:"+a(G+"\\:")+"{3}"+ue),je=a(a(a(G+"\\:")+"{0,2}"+G)+"?\\:\\:"+a(G+"\\:")+"{2}"+ue),wt=a(a(a(G+"\\:")+"{0,3}"+G)+"?\\:\\:"+G+"\\:"+ue),dt=a(a(a(G+"\\:")+"{0,4}"+G)+"?\\:\\:"+ue),Re=a(a(a(G+"\\:")+"{0,5}"+G)+"?\\:\\:"+G),ke=a(a(a(G+"\\:")+"{0,6}"+G)+"?\\:\\:"),ft=a([ye,de,tt,Ke,je,wt,dt,Re,ke].join("|")),Be=a(a(z+"|"+S)+"+");a("[vV]"+E+"+\\."+n(z,k,"[\\:]")+"+"),a(a(S+"|"+n(z,k))+"*");var Ht=a(S+"|"+n(z,k,"[\\:\\@]"));return a(a(S+"|"+n(z,k,"[\\@]"))+"+"),a(a(Ht+"|"+n("[\\/\\?]",pe))+"*"),{NOT_SCHEME:new RegExp(n("[^]",i,f,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",z,k),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",z,k),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",z,k),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",z,k),"g"),NOT_QUERY:new RegExp(n("[^\\%]",z,k,"[\\:\\@\\/\\?]",pe),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",z,k,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",z,k),"g"),UNRESERVED:new RegExp(z,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",z,ee),"g"),PCT_ENCODED:new RegExp(S,"g"),IPV4ADDRESS:new RegExp("^("+me+")$"),IPV6ADDRESS:new RegExp("^\\[?("+ft+")"+a(a("\\%25|\\%(?!"+E+"{2})")+"("+Be+")")+"?\\]?$")}}var h=p(!1),y=p(!0),D=function(){function l(i,f){var E=[],S=!0,j=!1,k=void 0;try{for(var ee=i[Symbol.iterator](),ie;!(S=(ie=ee.next()).done)&&(E.push(ie.value),!(f&&E.length===f));S=!0);}catch(pe){j=!0,k=pe}finally{try{!S&&ee.return&&ee.return()}finally{if(j)throw k}}return E}return function(i,f){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return l(i,f);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),I=function(l){if(Array.isArray(l)){for(var i=0,f=Array(l.length);i<l.length;i++)f[i]=l[i];return f}else return Array.from(l)},O=2147483647,A=36,b=1,u=26,_=38,P=700,R=72,J=128,N="-",w=/^xn--/,F=/[^\0-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},oe=A-b,X=Math.floor,re=String.fromCharCode;function Z(l){throw new RangeError(B[l])}function le(l,i){for(var f=[],E=l.length;E--;)f[E]=i(l[E]);return f}function fe(l,i){var f=l.split("@"),E="";f.length>1&&(E=f[0]+"@",l=f[1]),l=l.replace(H,".");var S=l.split("."),j=le(S,i).join(".");return E+j}function ve(l){for(var i=[],f=0,E=l.length;f<E;){var S=l.charCodeAt(f++);if(S>=55296&&S<=56319&&f<E){var j=l.charCodeAt(f++);(j&64512)==56320?i.push(((S&1023)<<10)+(j&1023)+65536):(i.push(S),f--)}else i.push(S)}return i}var Se=function(i){return String.fromCodePoint.apply(String,I(i))},et=function(i){return i-48<10?i-22:i-65<26?i-65:i-97<26?i-97:A},L=function(i,f){return i+22+75*(i<26)-((f!=0)<<5)},g=function(i,f,E){var S=0;for(i=E?X(i/P):i>>1,i+=X(i/f);i>oe*u>>1;S+=A)i=X(i/oe);return X(S+(oe+1)*i/(i+_))},C=function(i){var f=[],E=i.length,S=0,j=J,k=R,ee=i.lastIndexOf(N);ee<0&&(ee=0);for(var ie=0;ie<ee;++ie)i.charCodeAt(ie)>=128&&Z("not-basic"),f.push(i.charCodeAt(ie));for(var pe=ee>0?ee+1:0;pe<E;){for(var z=S,ae=1,me=A;;me+=A){pe>=E&&Z("invalid-input");var G=et(i.charCodeAt(pe++));(G>=A||G>X((O-S)/ae))&&Z("overflow"),S+=G*ae;var ue=me<=k?b:me>=k+u?u:me-k;if(G<ue)break;var ye=A-ue;ae>X(O/ye)&&Z("overflow"),ae*=ye}var de=f.length+1;k=g(S-z,de,z==0),X(S/de)>O-j&&Z("overflow"),j+=X(S/de),S%=de,f.splice(S++,0,j)}return String.fromCodePoint.apply(String,f)},$=function(i){var f=[];i=ve(i);var E=i.length,S=J,j=0,k=R,ee=!0,ie=!1,pe=void 0;try{for(var z=i[Symbol.iterator](),ae;!(ee=(ae=z.next()).done);ee=!0){var me=ae.value;me<128&&f.push(re(me))}}catch(Yt){ie=!0,pe=Yt}finally{try{!ee&&z.return&&z.return()}finally{if(ie)throw pe}}var G=f.length,ue=G;for(G&&f.push(N);ue<E;){var ye=O,de=!0,tt=!1,Ke=void 0;try{for(var je=i[Symbol.iterator](),wt;!(de=(wt=je.next()).done);de=!0){var dt=wt.value;dt>=S&&dt<ye&&(ye=dt)}}catch(Yt){tt=!0,Ke=Yt}finally{try{!de&&je.return&&je.return()}finally{if(tt)throw Ke}}var Re=ue+1;ye-S>X((O-j)/Re)&&Z("overflow"),j+=(ye-S)*Re,S=ye;var ke=!0,ft=!1,Be=void 0;try{for(var Ht=i[Symbol.iterator](),Nn;!(ke=(Nn=Ht.next()).done);ke=!0){var bn=Nn.value;if(bn<S&&++j>O&&Z("overflow"),bn==S){for(var ar=j,sr=A;;sr+=A){var or=sr<=k?b:sr>=k+u?u:sr-k;if(ar<or)break;var wn=ar-or,Dn=A-or;f.push(re(L(or+wn%Dn,0))),ar=X(wn/Dn)}f.push(re(L(ar,0))),k=g(j,Re,ue==G),j=0,++ue}}}catch(Yt){ft=!0,Be=Yt}finally{try{!ke&&Ht.return&&Ht.return()}finally{if(ft)throw Be}}++j,++S}return f.join("")},s=function(i){return fe(i,function(f){return w.test(f)?C(f.slice(4).toLowerCase()):f})},d=function(i){return fe(i,function(f){return F.test(f)?"xn--"+$(f):f})},T={version:"2.1.0",ucs2:{decode:ve,encode:Se},decode:C,encode:$,toASCII:d,toUnicode:s},V={};function U(l){var i=l.charCodeAt(0),f=void 0;return i<16?f="%0"+i.toString(16).toUpperCase():i<128?f="%"+i.toString(16).toUpperCase():i<2048?f="%"+(i>>6|192).toString(16).toUpperCase()+"%"+(i&63|128).toString(16).toUpperCase():f="%"+(i>>12|224).toString(16).toUpperCase()+"%"+(i>>6&63|128).toString(16).toUpperCase()+"%"+(i&63|128).toString(16).toUpperCase(),f}function W(l){for(var i="",f=0,E=l.length;f<E;){var S=parseInt(l.substr(f+1,2),16);if(S<128)i+=String.fromCharCode(S),f+=3;else if(S>=194&&S<224){if(E-f>=6){var j=parseInt(l.substr(f+4,2),16);i+=String.fromCharCode((S&31)<<6|j&63)}else i+=l.substr(f,6);f+=6}else if(S>=224){if(E-f>=9){var k=parseInt(l.substr(f+4,2),16),ee=parseInt(l.substr(f+7,2),16);i+=String.fromCharCode((S&15)<<12|(k&63)<<6|ee&63)}else i+=l.substr(f,9);f+=9}else i+=l.substr(f,3),f+=3}return i}function x(l,i){function f(E){var S=W(E);return S.match(i.UNRESERVED)?S:E}return l.scheme&&(l.scheme=String(l.scheme).replace(i.PCT_ENCODED,f).toLowerCase().replace(i.NOT_SCHEME,"")),l.userinfo!==void 0&&(l.userinfo=String(l.userinfo).replace(i.PCT_ENCODED,f).replace(i.NOT_USERINFO,U).replace(i.PCT_ENCODED,c)),l.host!==void 0&&(l.host=String(l.host).replace(i.PCT_ENCODED,f).toLowerCase().replace(i.NOT_HOST,U).replace(i.PCT_ENCODED,c)),l.path!==void 0&&(l.path=String(l.path).replace(i.PCT_ENCODED,f).replace(l.scheme?i.NOT_PATH:i.NOT_PATH_NOSCHEME,U).replace(i.PCT_ENCODED,c)),l.query!==void 0&&(l.query=String(l.query).replace(i.PCT_ENCODED,f).replace(i.NOT_QUERY,U).replace(i.PCT_ENCODED,c)),l.fragment!==void 0&&(l.fragment=String(l.fragment).replace(i.PCT_ENCODED,f).replace(i.NOT_FRAGMENT,U).replace(i.PCT_ENCODED,c)),l}function he(l){return l.replace(/^0*(.*)/,"$1")||"0"}function Ve(l,i){var f=l.match(i.IPV4ADDRESS)||[],E=D(f,2),S=E[1];return S?S.split(".").map(he).join("."):l}function $t(l,i){var f=l.match(i.IPV6ADDRESS)||[],E=D(f,3),S=E[1],j=E[2];if(S){for(var k=S.toLowerCase().split("::").reverse(),ee=D(k,2),ie=ee[0],pe=ee[1],z=pe?pe.split(":").map(he):[],ae=ie.split(":").map(he),me=i.IPV4ADDRESS.test(ae[ae.length-1]),G=me?7:8,ue=ae.length-G,ye=Array(G),de=0;de<G;++de)ye[de]=z[de]||ae[ue+de]||"";me&&(ye[G-1]=Ve(ye[G-1],i));var tt=ye.reduce(function(Re,ke,ft){if(!ke||ke==="0"){var Be=Re[Re.length-1];Be&&Be.index+Be.length===ft?Be.length++:Re.push({index:ft,length:1})}return Re},[]),Ke=tt.sort(function(Re,ke){return ke.length-Re.length})[0],je=void 0;if(Ke&&Ke.length>1){var wt=ye.slice(0,Ke.index),dt=ye.slice(Ke.index+Ke.length);je=wt.join(":")+"::"+dt.join(":")}else je=ye.join(":");return j&&(je+="%"+j),je}else return l}var Vt=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ut="".match(/(){0}/)[1]===void 0;function Te(l){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f={},E=i.iri!==!1?y:h;i.reference==="suffix"&&(l=(i.scheme?i.scheme+":":"")+"//"+l);var S=l.match(Vt);if(S){Ut?(f.scheme=S[1],f.userinfo=S[3],f.host=S[4],f.port=parseInt(S[5],10),f.path=S[6]||"",f.query=S[7],f.fragment=S[8],isNaN(f.port)&&(f.port=S[5])):(f.scheme=S[1]||void 0,f.userinfo=l.indexOf("@")!==-1?S[3]:void 0,f.host=l.indexOf("//")!==-1?S[4]:void 0,f.port=parseInt(S[5],10),f.path=S[6]||"",f.query=l.indexOf("?")!==-1?S[7]:void 0,f.fragment=l.indexOf("#")!==-1?S[8]:void 0,isNaN(f.port)&&(f.port=l.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?S[4]:void 0)),f.host&&(f.host=$t(Ve(f.host,E),E)),f.scheme===void 0&&f.userinfo===void 0&&f.host===void 0&&f.port===void 0&&!f.path&&f.query===void 0?f.reference="same-document":f.scheme===void 0?f.reference="relative":f.fragment===void 0?f.reference="absolute":f.reference="uri",i.reference&&i.reference!=="suffix"&&i.reference!==f.reference&&(f.error=f.error||"URI is not a "+i.reference+" reference.");var j=V[(i.scheme||f.scheme||"").toLowerCase()];if(!i.unicodeSupport&&(!j||!j.unicodeSupport)){if(f.host&&(i.domainHost||j&&j.domainHost))try{f.host=T.toASCII(f.host.replace(E.PCT_ENCODED,W).toLowerCase())}catch(k){f.error=f.error||"Host's domain name can not be converted to ASCII via punycode: "+k}x(f,h)}else x(f,E);j&&j.parse&&j.parse(f,i)}else f.error=f.error||"URI can not be parsed.";return f}function Mt(l,i){var f=i.iri!==!1?y:h,E=[];return l.userinfo!==void 0&&(E.push(l.userinfo),E.push("@")),l.host!==void 0&&E.push($t(Ve(String(l.host),f),f).replace(f.IPV6ADDRESS,function(S,j,k){return"["+j+(k?"%25"+k:"")+"]"})),(typeof l.port=="number"||typeof l.port=="string")&&(E.push(":"),E.push(String(l.port))),E.length?E.join(""):void 0}var St=/^\.\.?\//,Pt=/^\/\.(\/|$)/,Et=/^\/\.\.(\/|$)/,Kt=/^\/?(?:.|\n)*?(?=\/|$)/;function Ue(l){for(var i=[];l.length;)if(l.match(St))l=l.replace(St,"");else if(l.match(Pt))l=l.replace(Pt,"/");else if(l.match(Et))l=l.replace(Et,"/"),i.pop();else if(l==="."||l==="..")l="";else{var f=l.match(Kt);if(f){var E=f[0];l=l.slice(E.length),i.push(E)}else throw new Error("Unexpected dot segment condition")}return i.join("")}function we(l){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=i.iri?y:h,E=[],S=V[(i.scheme||l.scheme||"").toLowerCase()];if(S&&S.serialize&&S.serialize(l,i),l.host&&!f.IPV6ADDRESS.test(l.host)){if(i.domainHost||S&&S.domainHost)try{l.host=i.iri?T.toUnicode(l.host):T.toASCII(l.host.replace(f.PCT_ENCODED,W).toLowerCase())}catch(ee){l.error=l.error||"Host's domain name can not be converted to "+(i.iri?"Unicode":"ASCII")+" via punycode: "+ee}}x(l,f),i.reference!=="suffix"&&l.scheme&&(E.push(l.scheme),E.push(":"));var j=Mt(l,i);if(j!==void 0&&(i.reference!=="suffix"&&E.push("//"),E.push(j),l.path&&l.path.charAt(0)!=="/"&&E.push("/")),l.path!==void 0){var k=l.path;!i.absolutePath&&(!S||!S.absolutePath)&&(k=Ue(k)),j===void 0&&(k=k.replace(/^\/\//,"/%2F")),E.push(k)}return l.query!==void 0&&(E.push("?"),E.push(l.query)),l.fragment!==void 0&&(E.push("#"),E.push(l.fragment)),E.join("")}function Nt(l,i){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=arguments[3],S={};return E||(l=Te(we(l,f),f),i=Te(we(i,f),f)),f=f||{},!f.tolerant&&i.scheme?(S.scheme=i.scheme,S.userinfo=i.userinfo,S.host=i.host,S.port=i.port,S.path=Ue(i.path||""),S.query=i.query):(i.userinfo!==void 0||i.host!==void 0||i.port!==void 0?(S.userinfo=i.userinfo,S.host=i.host,S.port=i.port,S.path=Ue(i.path||""),S.query=i.query):(i.path?(i.path.charAt(0)==="/"?S.path=Ue(i.path):((l.userinfo!==void 0||l.host!==void 0||l.port!==void 0)&&!l.path?S.path="/"+i.path:l.path?S.path=l.path.slice(0,l.path.lastIndexOf("/")+1)+i.path:S.path=i.path,S.path=Ue(S.path)),S.query=i.query):(S.path=l.path,i.query!==void 0?S.query=i.query:S.query=l.query),S.userinfo=l.userinfo,S.host=l.host,S.port=l.port),S.scheme=l.scheme),S.fragment=i.fragment,S}function jt(l,i,f){var E=v({scheme:"null"},f);return we(Nt(Te(l,E),Te(i,E),E,!0),E)}function lt(l,i){return typeof l=="string"?l=we(Te(l,i),i):o(l)==="object"&&(l=Te(we(l,i),i)),l}function kt(l,i,f){return typeof l=="string"?l=we(Te(l,f),f):o(l)==="object"&&(l=we(l,f)),typeof i=="string"?i=we(Te(i,f),f):o(i)==="object"&&(i=we(i,f)),l===i}function nr(l,i){return l&&l.toString().replace(!i||!i.iri?h.ESCAPE:y.ESCAPE,U)}function Oe(l,i){return l&&l.toString().replace(!i||!i.iri?h.PCT_ENCODED:y.PCT_ENCODED,W)}var ut={scheme:"http",domainHost:!0,parse:function(i,f){return i.host||(i.error=i.error||"HTTP URIs must have a host."),i},serialize:function(i,f){var E=String(i.scheme).toLowerCase()==="https";return(i.port===(E?443:80)||i.port==="")&&(i.port=void 0),i.path||(i.path="/"),i}},yn={scheme:"https",domainHost:ut.domainHost,parse:ut.parse,serialize:ut.serialize};function vn(l){return typeof l.secure=="boolean"?l.secure:String(l.scheme).toLowerCase()==="wss"}var Jt={scheme:"ws",domainHost:!0,parse:function(i,f){var E=i;return E.secure=vn(E),E.resourceName=(E.path||"/")+(E.query?"?"+E.query:""),E.path=void 0,E.query=void 0,E},serialize:function(i,f){if((i.port===(vn(i)?443:80)||i.port==="")&&(i.port=void 0),typeof i.secure=="boolean"&&(i.scheme=i.secure?"wss":"ws",i.secure=void 0),i.resourceName){var E=i.resourceName.split("?"),S=D(E,2),j=S[0],k=S[1];i.path=j&&j!=="/"?j:void 0,i.query=k,i.resourceName=void 0}return i.fragment=void 0,i}},gn={scheme:"wss",domainHost:Jt.domainHost,parse:Jt.parse,serialize:Jt.serialize},Wa={},_n="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Me="[0-9A-Fa-f]",za=a(a("%[EFef]"+Me+"%"+Me+Me+"%"+Me+Me)+"|"+a("%[89A-Fa-f]"+Me+"%"+Me+Me)+"|"+a("%"+Me+Me)),qa="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",xa="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",es=n(xa,'[\\"\\\\]'),ts="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",rs=new RegExp(_n,"g"),bt=new RegExp(za,"g"),ns=new RegExp(n("[^]",qa,"[\\.]",'[\\"]',es),"g"),$n=new RegExp(n("[^]",_n,ts),"g"),as=$n;function Dr(l){var i=W(l);return i.match(rs)?i:l}var Sn={scheme:"mailto",parse:function(i,f){var E=i,S=E.to=E.path?E.path.split(","):[];if(E.path=void 0,E.query){for(var j=!1,k={},ee=E.query.split("&"),ie=0,pe=ee.length;ie<pe;++ie){var z=ee[ie].split("=");switch(z[0]){case"to":for(var ae=z[1].split(","),me=0,G=ae.length;me<G;++me)S.push(ae[me]);break;case"subject":E.subject=Oe(z[1],f);break;case"body":E.body=Oe(z[1],f);break;default:j=!0,k[Oe(z[0],f)]=Oe(z[1],f);break}}j&&(E.headers=k)}E.query=void 0;for(var ue=0,ye=S.length;ue<ye;++ue){var de=S[ue].split("@");if(de[0]=Oe(de[0]),f.unicodeSupport)de[1]=Oe(de[1],f).toLowerCase();else try{de[1]=T.toASCII(Oe(de[1],f).toLowerCase())}catch(tt){E.error=E.error||"Email address's domain name can not be converted to ASCII via punycode: "+tt}S[ue]=de.join("@")}return E},serialize:function(i,f){var E=i,S=m(i.to);if(S){for(var j=0,k=S.length;j<k;++j){var ee=String(S[j]),ie=ee.lastIndexOf("@"),pe=ee.slice(0,ie).replace(bt,Dr).replace(bt,c).replace(ns,U),z=ee.slice(ie+1);try{z=f.iri?T.toUnicode(z):T.toASCII(Oe(z,f).toLowerCase())}catch(ue){E.error=E.error||"Email address's domain name can not be converted to "+(f.iri?"Unicode":"ASCII")+" via punycode: "+ue}S[j]=pe+"@"+z}E.path=S.join(",")}var ae=i.headers=i.headers||{};i.subject&&(ae.subject=i.subject),i.body&&(ae.body=i.body);var me=[];for(var G in ae)ae[G]!==Wa[G]&&me.push(G.replace(bt,Dr).replace(bt,c).replace($n,U)+"="+ae[G].replace(bt,Dr).replace(bt,c).replace(as,U));return me.length&&(E.query=me.join("&")),E}},ss=/^([^\:]+)\:(.*)/,Pn={scheme:"urn",parse:function(i,f){var E=i.path&&i.path.match(ss),S=i;if(E){var j=f.scheme||S.scheme||"urn",k=E[1].toLowerCase(),ee=E[2],ie=j+":"+(f.nid||k),pe=V[ie];S.nid=k,S.nss=ee,S.path=void 0,pe&&(S=pe.parse(S,f))}else S.error=S.error||"URN can not be parsed.";return S},serialize:function(i,f){var E=f.scheme||i.scheme||"urn",S=i.nid,j=E+":"+(f.nid||S),k=V[j];k&&(i=k.serialize(i,f));var ee=i,ie=i.nss;return ee.path=(S||f.nid)+":"+ie,ee}},os=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,En={scheme:"urn:uuid",parse:function(i,f){var E=i;return E.uuid=E.nss,E.nss=void 0,!f.tolerant&&(!E.uuid||!E.uuid.match(os))&&(E.error=E.error||"UUID is not valid."),E},serialize:function(i,f){var E=i;return E.nss=(i.uuid||"").toLowerCase(),E}};V[ut.scheme]=ut,V[yn.scheme]=yn,V[Jt.scheme]=Jt,V[gn.scheme]=gn,V[Sn.scheme]=Sn,V[Pn.scheme]=Pn,V[En.scheme]=En,r.SCHEMES=V,r.pctEncChar=U,r.pctDecChars=W,r.parse=Te,r.removeDotSegments=Ue,r.serialize=we,r.resolveComponents=Nt,r.resolve=jt,r.normalize=lt,r.equal=kt,r.escapeComponent=nr,r.unescapeComponent=Oe,Object.defineProperty(r,"__esModule",{value:!0})})})(Ur,Ur.exports);Object.defineProperty(Zr,"__esModule",{value:!0});const Na=Ur.exports;Na.code='require("ajv/dist/runtime/uri").default';Zr.default=Na;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Ye;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=ne;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=er,a=ct,o=yt,c=Ee,m=ne,v=$e,p=$r,h=ge,y=Qo,D=Zr,I=(L,g)=>new RegExp(L,g);I.code="new RegExp";const O=["removeAdditional","useDefaults","coerceTypes"],A=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),b={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},u={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},_=200;function P(L){var g,C,$,s,d,T,V,U,W,x,he,Ve,$t,Vt,Ut,Te,Mt,St,Pt,Et,Kt,Ue,we,Nt,jt;const lt=L.strict,kt=(g=L.code)===null||g===void 0?void 0:g.optimize,nr=kt===!0||kt===void 0?1:kt||0,Oe=($=(C=L.code)===null||C===void 0?void 0:C.regExp)!==null&&$!==void 0?$:I,ut=(s=L.uriResolver)!==null&&s!==void 0?s:D.default;return{strictSchema:(T=(d=L.strictSchema)!==null&&d!==void 0?d:lt)!==null&&T!==void 0?T:!0,strictNumbers:(U=(V=L.strictNumbers)!==null&&V!==void 0?V:lt)!==null&&U!==void 0?U:!0,strictTypes:(x=(W=L.strictTypes)!==null&&W!==void 0?W:lt)!==null&&x!==void 0?x:"log",strictTuples:(Ve=(he=L.strictTuples)!==null&&he!==void 0?he:lt)!==null&&Ve!==void 0?Ve:"log",strictRequired:(Vt=($t=L.strictRequired)!==null&&$t!==void 0?$t:lt)!==null&&Vt!==void 0?Vt:!1,code:L.code?{...L.code,optimize:nr,regExp:Oe}:{optimize:nr,regExp:Oe},loopRequired:(Ut=L.loopRequired)!==null&&Ut!==void 0?Ut:_,loopEnum:(Te=L.loopEnum)!==null&&Te!==void 0?Te:_,meta:(Mt=L.meta)!==null&&Mt!==void 0?Mt:!0,messages:(St=L.messages)!==null&&St!==void 0?St:!0,inlineRefs:(Pt=L.inlineRefs)!==null&&Pt!==void 0?Pt:!0,schemaId:(Et=L.schemaId)!==null&&Et!==void 0?Et:"$id",addUsedSchema:(Kt=L.addUsedSchema)!==null&&Kt!==void 0?Kt:!0,validateSchema:(Ue=L.validateSchema)!==null&&Ue!==void 0?Ue:!0,validateFormats:(we=L.validateFormats)!==null&&we!==void 0?we:!0,unicodeRegExp:(Nt=L.unicodeRegExp)!==null&&Nt!==void 0?Nt:!0,int32range:(jt=L.int32range)!==null&&jt!==void 0?jt:!0,uriResolver:ut}}class R{constructor(g={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,g=this.opts={...g,...P(g)};const{es5:C,lines:$}=this.opts.code;this.scope=new m.ValueScope({scope:{},prefixes:A,es5:C,lines:$}),this.logger=X(g.logger);const s=g.validateFormats;g.validateFormats=!1,this.RULES=(0,o.getRules)(),J.call(this,b,g,"NOT SUPPORTED"),J.call(this,u,g,"DEPRECATED","warn"),this._metaOpts=B.call(this),g.formats&&F.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),g.keywords&&H.call(this,g.keywords),typeof g.meta=="object"&&this.addMetaSchema(g.meta),w.call(this),g.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:g,meta:C,schemaId:$}=this.opts;let s=y;$==="id"&&(s={...y},s.id=s.$id,delete s.$id),C&&g&&this.addMetaSchema(s,s[$],!1)}defaultMeta(){const{meta:g,schemaId:C}=this.opts;return this.opts.defaultMeta=typeof g=="object"?g[C]||g:void 0}validate(g,C){let $;if(typeof g=="string"){if($=this.getSchema(g),!$)throw new Error(`no schema with key or ref "${g}"`)}else $=this.compile(g);const s=$(C);return"$async"in $||(this.errors=$.errors),s}compile(g,C){const $=this._addSchema(g,C);return $.validate||this._compileSchemaEnv($)}compileAsync(g,C){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:$}=this.opts;return s.call(this,g,C);async function s(x,he){await d.call(this,x.$schema);const Ve=this._addSchema(x,he);return Ve.validate||T.call(this,Ve)}async function d(x){x&&!this.getSchema(x)&&await s.call(this,{$ref:x},!0)}async function T(x){try{return this._compileSchemaEnv(x)}catch(he){if(!(he instanceof a.default))throw he;return V.call(this,he),await U.call(this,he.missingSchema),T.call(this,x)}}function V({missingSchema:x,missingRef:he}){if(this.refs[x])throw new Error(`AnySchema ${x} is loaded but ${he} cannot be resolved`)}async function U(x){const he=await W.call(this,x);this.refs[x]||await d.call(this,he.$schema),this.refs[x]||this.addSchema(he,x,C)}async function W(x){const he=this._loading[x];if(he)return he;try{return await(this._loading[x]=$(x))}finally{delete this._loading[x]}}}addSchema(g,C,$,s=this.opts.validateSchema){if(Array.isArray(g)){for(const T of g)this.addSchema(T,void 0,$,s);return this}let d;if(typeof g=="object"){const{schemaId:T}=this.opts;if(d=g[T],d!==void 0&&typeof d!="string")throw new Error(`schema ${T} must be string`)}return C=(0,v.normalizeId)(C||d),this._checkUnique(C),this.schemas[C]=this._addSchema(g,$,C,s,!0),this}addMetaSchema(g,C,$=this.opts.validateSchema){return this.addSchema(g,C,!0,$),this}validateSchema(g,C){if(typeof g=="boolean")return!0;let $;if($=g.$schema,$!==void 0&&typeof $!="string")throw new Error("$schema must be a string");if($=$||this.opts.defaultMeta||this.defaultMeta(),!$)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const s=this.validate($,g);if(!s&&C){const d="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(d);else throw new Error(d)}return s}getSchema(g){let C;for(;typeof(C=N.call(this,g))=="string";)g=C;if(C===void 0){const{schemaId:$}=this.opts,s=new c.SchemaEnv({schema:{},schemaId:$});if(C=c.resolveSchema.call(this,s,g),!C)return;this.refs[g]=C}return C.validate||this._compileSchemaEnv(C)}removeSchema(g){if(g instanceof RegExp)return this._removeAllSchemas(this.schemas,g),this._removeAllSchemas(this.refs,g),this;switch(typeof g){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const C=N.call(this,g);return typeof C=="object"&&this._cache.delete(C.schema),delete this.schemas[g],delete this.refs[g],this}case"object":{const C=g;this._cache.delete(C);let $=g[this.opts.schemaId];return $&&($=(0,v.normalizeId)($),delete this.schemas[$],delete this.refs[$]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(g){for(const C of g)this.addKeyword(C);return this}addKeyword(g,C){let $;if(typeof g=="string")$=g,typeof C=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),C.keyword=$);else if(typeof g=="object"&&C===void 0){if(C=g,$=C.keyword,Array.isArray($)&&!$.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Z.call(this,$,C),!C)return(0,h.eachItem)($,d=>le.call(this,d)),this;ve.call(this,C);const s={...C,type:(0,p.getJSONTypes)(C.type),schemaType:(0,p.getJSONTypes)(C.schemaType)};return(0,h.eachItem)($,s.type.length===0?d=>le.call(this,d,s):d=>s.type.forEach(T=>le.call(this,d,s,T))),this}getKeyword(g){const C=this.RULES.all[g];return typeof C=="object"?C.definition:!!C}removeKeyword(g){const{RULES:C}=this;delete C.keywords[g],delete C.all[g];for(const $ of C.rules){const s=$.rules.findIndex(d=>d.keyword===g);s>=0&&$.rules.splice(s,1)}return this}addFormat(g,C){return typeof C=="string"&&(C=new RegExp(C)),this.formats[g]=C,this}errorsText(g=this.errors,{separator:C=", ",dataVar:$="data"}={}){return!g||g.length===0?"No errors":g.map(s=>`${$}${s.instancePath} ${s.message}`).reduce((s,d)=>s+C+d)}$dataMetaSchema(g,C){const $=this.RULES.all;g=JSON.parse(JSON.stringify(g));for(const s of C){const d=s.split("/").slice(1);let T=g;for(const V of d)T=T[V];for(const V in $){const U=$[V];if(typeof U!="object")continue;const{$data:W}=U.definition,x=T[V];W&&x&&(T[V]=et(x))}}return g}_removeAllSchemas(g,C){for(const $ in g){const s=g[$];(!C||C.test($))&&(typeof s=="string"?delete g[$]:s&&!s.meta&&(this._cache.delete(s.schema),delete g[$]))}}_addSchema(g,C,$,s=this.opts.validateSchema,d=this.opts.addUsedSchema){let T;const{schemaId:V}=this.opts;if(typeof g=="object")T=g[V];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof g!="boolean")throw new Error("schema must be object or boolean")}let U=this._cache.get(g);if(U!==void 0)return U;$=(0,v.normalizeId)(T||$);const W=v.getSchemaRefs.call(this,g,$);return U=new c.SchemaEnv({schema:g,schemaId:V,meta:C,baseId:$,localRefs:W}),this._cache.set(U.schema,U),d&&!$.startsWith("#")&&($&&this._checkUnique($),this.refs[$]=U),s&&this.validateSchema(g,!0),U}_checkUnique(g){if(this.schemas[g]||this.refs[g])throw new Error(`schema with key or id "${g}" already exists`)}_compileSchemaEnv(g){if(g.meta?this._compileMetaSchema(g):c.compileSchema.call(this,g),!g.validate)throw new Error("ajv implementation error");return g.validate}_compileMetaSchema(g){const C=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,g)}finally{this.opts=C}}}e.default=R,R.ValidationError=n.default,R.MissingRefError=a.default;function J(L,g,C,$="error"){for(const s in L){const d=s;d in g&&this.logger[$](`${C}: option ${s}. ${L[d]}`)}}function N(L){return L=(0,v.normalizeId)(L),this.schemas[L]||this.refs[L]}function w(){const L=this.opts.schemas;if(!!L)if(Array.isArray(L))this.addSchema(L);else for(const g in L)this.addSchema(L[g],g)}function F(){for(const L in this.opts.formats){const g=this.opts.formats[L];g&&this.addFormat(L,g)}}function H(L){if(Array.isArray(L)){this.addVocabulary(L);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const g in L){const C=L[g];C.keyword||(C.keyword=g),this.addKeyword(C)}}function B(){const L={...this.opts};for(const g of O)delete L[g];return L}const oe={log(){},warn(){},error(){}};function X(L){if(L===!1)return oe;if(L===void 0)return console;if(L.log&&L.warn&&L.error)return L;throw new Error("logger must implement log, warn and error methods")}const re=/^[a-z_$][a-z0-9_$:-]*$/i;function Z(L,g){const{RULES:C}=this;if((0,h.eachItem)(L,$=>{if(C.keywords[$])throw new Error(`Keyword ${$} is already defined`);if(!re.test($))throw new Error(`Keyword ${$} has invalid name`)}),!!g&&g.$data&&!("code"in g||"validate"in g))throw new Error('$data keyword must have "code" or "validate" function')}function le(L,g,C){var $;const s=g==null?void 0:g.post;if(C&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:d}=this;let T=s?d.post:d.rules.find(({type:U})=>U===C);if(T||(T={type:C,rules:[]},d.rules.push(T)),d.keywords[L]=!0,!g)return;const V={keyword:L,definition:{...g,type:(0,p.getJSONTypes)(g.type),schemaType:(0,p.getJSONTypes)(g.schemaType)}};g.before?fe.call(this,T,V,g.before):T.rules.push(V),d.all[L]=V,($=g.implements)===null||$===void 0||$.forEach(U=>this.addKeyword(U))}function fe(L,g,C){const $=L.rules.findIndex(s=>s.keyword===C);$>=0?L.rules.splice($,0,g):(L.rules.push(g),this.logger.warn(`rule ${C} is not defined`))}function ve(L){let{metaSchema:g}=L;g!==void 0&&(L.$data&&this.opts.$data&&(g=et(g)),L.validateSchema=this.compile(g,!0))}const Se={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function et(L){return{anyOf:[L,Se]}}})(ea);var Br={},_t={},vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.callRef=vt.getValidate=void 0;const Wo=ct,Ln=te,De=ne,Ct=Ie,Vn=Ee,dr=ge,zo={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:a,schemaEnv:o,validateName:c,opts:m,self:v}=n,{root:p}=o;if((r==="#"||r==="#/")&&a===p.baseId)return y();const h=Vn.resolveRef.call(v,p,a,r);if(h===void 0)throw new Wo.default(n.opts.uriResolver,a,r);if(h instanceof Vn.SchemaEnv)return D(h);return I(h);function y(){if(o===p)return pr(e,c,o,o.$async);const O=t.scopeValue("root",{ref:p});return pr(e,(0,De._)`${O}.validate`,p,p.$async)}function D(O){const A=ba(e,O);pr(e,A,O,O.$async)}function I(O){const A=t.scopeValue("schema",m.code.source===!0?{ref:O,code:(0,De.stringify)(O)}:{ref:O}),b=t.name("valid"),u=e.subschema({schema:O,dataTypes:[],schemaPath:De.nil,topSchemaRef:A,errSchemaPath:r},b);e.mergeEvaluated(u),e.ok(b)}}};function ba(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,De._)`${r.scopeValue("wrapper",{ref:t})}.validate`}vt.getValidate=ba;function pr(e,t,r,n){const{gen:a,it:o}=e,{allErrors:c,schemaEnv:m,opts:v}=o,p=v.passContext?Ct.default.this:De.nil;n?h():y();function h(){if(!m.$async)throw new Error("async schema referenced by sync schema");const O=a.let("valid");a.try(()=>{a.code((0,De._)`await ${(0,Ln.callValidateCode)(e,t,p)}`),I(t),c||a.assign(O,!0)},A=>{a.if((0,De._)`!(${A} instanceof ${o.ValidationError})`,()=>a.throw(A)),D(A),c||a.assign(O,!1)}),e.ok(O)}function y(){e.result((0,Ln.callValidateCode)(e,t,p),()=>I(t),()=>D(t))}function D(O){const A=(0,De._)`${O}.errors`;a.assign(Ct.default.vErrors,(0,De._)`${Ct.default.vErrors} === null ? ${A} : ${Ct.default.vErrors}.concat(${A})`),a.assign(Ct.default.errors,(0,De._)`${Ct.default.vErrors}.length`)}function I(O){var A;if(!o.opts.unevaluated)return;const b=(A=r==null?void 0:r.validate)===null||A===void 0?void 0:A.evaluated;if(o.props!==!0)if(b&&!b.dynamicProps)b.props!==void 0&&(o.props=dr.mergeEvaluated.props(a,b.props,o.props));else{const u=a.var("props",(0,De._)`${O}.evaluated.props`);o.props=dr.mergeEvaluated.props(a,u,o.props,De.Name)}if(o.items!==!0)if(b&&!b.dynamicItems)b.items!==void 0&&(o.items=dr.mergeEvaluated.items(a,b.items,o.items));else{const u=a.var("items",(0,De._)`${O}.evaluated.items`);o.items=dr.mergeEvaluated.items(a,u,o.items,De.Name)}}}vt.callRef=pr;vt.default=zo;var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.checkMetadata=void 0;const qo=ge,xo={keyword:"metadata",schemaType:"object",code(e){wa(e);const{gen:t,schema:r,it:n}=e;if((0,qo.alwaysValidSchema)(n,r))return;const a=t.name("valid");e.subschema({keyword:"metadata",jtdMetadata:!0},a),e.ok(a)}};function wa({it:e,keyword:t},r){if(e.jtdMetadata!==r)throw new Error(`JTD: "${t}" cannot be used in this schema location`)}Ae.checkMetadata=wa;Ae.default=xo;Object.defineProperty(_t,"__esModule",{value:!0});_t.hasRef=void 0;const Un=Ee,Bt=ne,ei=ct,Mn=Ie,Kn=vt,ti=Ae,ri={keyword:"ref",schemaType:"string",code(e){(0,ti.checkMetadata)(e);const{gen:t,data:r,schema:n,parentSchema:a,it:o}=e,{schemaEnv:{root:c}}=o,m=t.name("valid");a.nullable?(t.var(m,(0,Bt._)`${r} === null`),t.if((0,Bt.not)(m),v)):(t.var(m,!1),v()),e.ok(m);function v(){var y;const D=(y=c.schema.definitions)===null||y===void 0?void 0:y[n];if(!D)throw new ei.default(o.opts.uriResolver,"",n,`No definition ${n}`);Xr(D)||!o.opts.inlineRefs?p(D):h(D)}function p(y){const D=Un.compileSchema.call(o.self,new Un.SchemaEnv({schema:y,root:c,schemaPath:`/definitions/${n}`})),I=(0,Kn.getValidate)(e,D),O=t.const("_errs",Mn.default.errors);(0,Kn.callRef)(e,I,D,D.$async),t.assign(m,(0,Bt._)`${O} === ${Mn.default.errors}`)}function h(y){const D=t.scopeValue("schema",o.opts.code.source===!0?{ref:y,code:(0,Bt.stringify)(y)}:{ref:y});e.subschema({schema:y,dataTypes:[],schemaPath:Bt.nil,topSchemaRef:D,errSchemaPath:`/definitions/${n}`},m)}}};function Xr(e){for(const t in e){let r;if(t==="ref"||typeof(r=e[t])=="object"&&Xr(r))return!0}return!1}_t.hasRef=Xr;_t.default=ri;var Qr={},Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});const ni=/t|\s/i,ai=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,si=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,oi=[0,31,28,31,30,31,30,31,31,30,31,30,31];function Da(e,t){const r=e.split(ni);return r.length===2&&jn(r[0])&&ii(r[1])||t&&r.length===1&&jn(r[0])}Nr.default=Da;function jn(e){const t=ai.exec(e);if(!t)return!1;const r=+t[1],n=+t[2],a=+t[3];return n>=1&&n<=12&&a>=1&&(a<=oi[n]||n===2&&a===29&&(r%100===0?r%400===0:r%4===0))}function ii(e){const t=si.exec(e);if(!t)return!1;const r=+t[1],n=+t[2],a=+t[3],o=+(t[4]||0),c=+(t[5]||0);return r<=23&&n<=59&&a<=59||r-o===23&&n-c===59&&a===60}Da.code='require("ajv/dist/runtime/timestamp").default';var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.typeErrorParams=Ce.typeErrorMessage=Ce.typeError=void 0;const ci=ne;function li(e){return{message:t=>Ta(t,e),params:t=>Oa(t,e)}}Ce.typeError=li;function Ta({parentSchema:e},t){return e!=null&&e.nullable?`must be ${t} or null`:`must be ${t}`}Ce.typeErrorMessage=Ta;function Oa({parentSchema:e},t){return(0,ci._)`{type: ${t}, nullable: ${!!(e!=null&&e.nullable)}}`}Ce.typeErrorParams=Oa;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.intRange=void 0;const t=ne,r=Nr,n=ge,a=Ae,o=Ce;e.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};const c={message:p=>(0,o.typeErrorMessage)(p,p.schema),params:p=>(0,o.typeErrorParams)(p,p.schema)};function m(p){const{gen:h,data:y,it:D}=p,{timestamp:I,allowDate:O}=D.opts;if(I==="date")return(0,t._)`${y} instanceof Date `;const A=(0,n.useFunc)(h,r.default),b=O?(0,t._)`, true`:t.nil,u=(0,t._)`typeof ${y} == "string" && ${A}(${y}${b})`;return I==="string"?u:(0,t.or)((0,t._)`${y} instanceof Date`,u)}const v={keyword:"type",schemaType:"string",error:c,code(p){(0,a.checkMetadata)(p);const{data:h,schema:y,parentSchema:D,it:I}=p;let O;switch(y){case"boolean":case"string":O=(0,t._)`typeof ${h} == ${y}`;break;case"timestamp":{O=m(p);break}case"float32":case"float64":O=(0,t._)`typeof ${h} == "number"`;break;default:{const A=y;if(O=(0,t._)`typeof ${h} == "number" && isFinite(${h}) && !(${h} % 1)`,!I.opts.int32range&&(A==="int32"||A==="uint32"))A==="uint32"&&(O=(0,t._)`${O} && ${h} >= 0`);else{const[b,u]=e.intRange[A];O=(0,t._)`${O} && ${h} >= ${b} && ${h} <= ${u}`}}}p.pass(D.nullable?(0,t.or)((0,t._)`${h} === null`,O):O)}};e.default=v})(Qr);var Wr={},Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.checkNullableObject=Ge.checkNullable=void 0;const mr=ne;function Ra({gen:e,data:t,parentSchema:r},n=mr.nil){const a=e.name("valid");return r.nullable?(e.let(a,(0,mr._)`${t} === null`),n=(0,mr.not)(a)):e.let(a,!1),[a,n]}Ge.checkNullable=Ra;function ui(e,t){const[r,n]=Ra(e,t);return[r,(0,mr._)`${n} && typeof ${e.data} == "object" && !Array.isArray(${e.data})`]}Ge.checkNullableObject=ui;Object.defineProperty(Wr,"__esModule",{value:!0});const nt=ne,di=Ae,fi=Ge,hi={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,nt._)`{allowedValues: ${e}}`},pi={keyword:"enum",schemaType:"array",error:hi,code(e){(0,di.checkMetadata)(e);const{gen:t,data:r,schema:n,schemaValue:a,parentSchema:o,it:c}=e;if(n.length===0)throw new Error("enum must have non-empty array");if(n.length!==new Set(n).size)throw new Error("enum items must be unique");let m;const v=(0,nt._)`typeof ${r} == "string"`;if(n.length>=c.opts.loopEnum){let h;[m,h]=(0,fi.checkNullable)(e,v),t.if(h,p)}else{if(!Array.isArray(n))throw new Error("ajv implementation error");m=(0,nt.and)(v,(0,nt.or)(...n.map(h=>(0,nt._)`${r} === ${h}`))),o.nullable&&(m=(0,nt.or)((0,nt._)`${r} === null`,m))}e.pass(m);function p(){t.forOf("v",a,h=>t.if((0,nt._)`${m} = ${r} === ${h}`,()=>t.break()))}}};Wr.default=pi;var zr={};Object.defineProperty(zr,"__esModule",{value:!0});const mi=ge,yi=te,kn=ne,vi=Ae,gi=Ge,_i=Ce,$i={keyword:"elements",schemaType:"object",error:(0,_i.typeError)("array"),code(e){(0,vi.checkMetadata)(e);const{gen:t,data:r,schema:n,it:a}=e;if((0,mi.alwaysValidSchema)(a,n))return;const[o]=(0,gi.checkNullable)(e);t.if((0,kn.not)(o),()=>t.if((0,kn._)`Array.isArray(${r})`,()=>t.assign(o,(0,yi.validateArray)(e)),()=>e.error())),e.ok(o)}};zr.default=$i;var qr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateProperties=e.error=void 0;const t=te,r=ge,n=ne,a=Ae,o=Ge,c=Ce;var m;(function(h){h.Additional="additional",h.Missing="missing"})(m||(m={})),e.error={message:h=>{const{params:y}=h;return y.propError?y.propError===m.Additional?"must NOT have additional properties":`must have property '${y.missingProperty}'`:(0,c.typeErrorMessage)(h,"object")},params:h=>{const{params:y}=h;return y.propError?y.propError===m.Additional?(0,n._)`{error: ${y.propError}, additionalProperty: ${y.additionalProperty}}`:(0,n._)`{error: ${y.propError}, missingProperty: ${y.missingProperty}}`:(0,c.typeErrorParams)(h,"object")}};const v={keyword:"properties",schemaType:"object",error:e.error,code:p};function p(h){(0,a.checkMetadata)(h);const{gen:y,data:D,parentSchema:I,it:O}=h,{additionalProperties:A,nullable:b}=I;if(O.jtdDiscriminator&&b)throw new Error("JTD: nullable inside discriminator mapping");if(w())throw new Error("JTD: properties and optionalProperties have common members");const[u,_]=F("properties"),[P,R]=F("optionalProperties");if(_.length===0&&R.length===0&&A)return;const[J,N]=O.jtdDiscriminator===void 0?(0,o.checkNullableObject)(h,D):[y.let("valid",!1),!0];y.if(N,()=>y.assign(J,!0).block(()=>{H(_,"properties",!0),H(R,"optionalProperties"),A||oe()})),h.pass(J);function w(){const re=I.properties,Z=I.optionalProperties;if(!(re&&Z))return!1;for(const le in re)if(Object.prototype.hasOwnProperty.call(Z,le))return!0;return!1}function F(re){const Z=I[re],le=Z?(0,t.allSchemaProperties)(Z):[];if(O.jtdDiscriminator&&le.some(ve=>ve===O.jtdDiscriminator))throw new Error(`JTD: discriminator tag used in ${re}`);const fe=le.filter(ve=>!(0,r.alwaysValidSchema)(O,Z[ve]));return[le,fe]}function H(re,Z,le){const fe=y.var("valid");for(const Se of re)y.if((0,t.propertyInData)(y,D,Se,O.opts.ownProperties),()=>B(Se,Z,fe),()=>ve(Se)),h.ok(fe);function ve(Se){le?(y.assign(fe,!1),h.error(!1,{propError:m.Missing,missingProperty:Se},{schemaPath:Se})):y.assign(fe,!0)}}function B(re,Z,le){h.subschema({keyword:Z,schemaProp:re,dataProp:re},le)}function oe(){y.forIn("key",D,re=>{const Z=X(re,u,"properties",O.jtdDiscriminator),le=X(re,P,"optionalProperties"),fe=Z===!0?le:le===!0?Z:(0,n.and)(Z,le);y.if(fe,()=>{O.opts.removeAdditional?y.code((0,n._)`delete ${D}[${re}]`):(h.error(!1,{propError:m.Additional,additionalProperty:re},{instancePath:re,parentSchema:!0}),O.opts.allErrors||y.break())})})}function X(re,Z,le,fe){let ve;if(Z.length>8){const Se=(0,r.schemaRefOrVal)(O,I[le],le);ve=(0,n.not)((0,t.isOwnProperty)(y,Se,re)),fe!==void 0&&(ve=(0,n.and)(ve,(0,n._)`${re} !== ${fe}`))}else if(Z.length||fe!==void 0){const Se=fe===void 0?Z:[fe].concat(Z);ve=(0,n.and)(...Se.map(et=>(0,n._)`${re} !== ${et}`))}else ve=!0;return ve}}e.validateProperties=p,e.default=v})(qr);var xr={};Object.defineProperty(xr,"__esModule",{value:!0});const Jn=qr,Si={keyword:"optionalProperties",schemaType:"object",error:Jn.error,code(e){e.parentSchema.properties||(0,Jn.validateProperties)(e)}};xr.default=Si;var en={},Ca={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(Ca);Object.defineProperty(en,"__esModule",{value:!0});const pt=ne,Pi=Ae,Ei=Ge,Hn=Ce,yr=Ca,Ni={message:e=>{const{schema:t,params:r}=e;return r.discrError?r.discrError===yr.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in mapping`:(0,Hn.typeErrorMessage)(e,"object")},params:e=>{const{schema:t,params:r}=e;return r.discrError?(0,pt._)`{error: ${r.discrError}, tag: ${t}, tagValue: ${r.tag}}`:(0,Hn.typeErrorParams)(e,"object")}},bi={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:Ni,code(e){(0,Pi.checkMetadata)(e);const{gen:t,data:r,schema:n,parentSchema:a}=e,[o,c]=(0,Ei.checkNullableObject)(e,r);t.if(c),m(),t.elseIf((0,pt.not)(o)),e.error(),t.endIf(),e.ok(o);function m(){const h=t.const("tag",(0,pt._)`${r}${(0,pt.getProperty)(n)}`);t.if((0,pt._)`${h} === undefined`),e.error(!1,{discrError:yr.DiscrError.Tag,tag:h}),t.elseIf((0,pt._)`typeof ${h} == "string"`),v(h),t.else(),e.error(!1,{discrError:yr.DiscrError.Tag,tag:h},{instancePath:n}),t.endIf()}function v(h){t.if(!1);for(const y in a.mapping)t.elseIf((0,pt._)`${h} === ${y}`),t.assign(o,p(y));t.else(),e.error(!1,{discrError:yr.DiscrError.Mapping,tag:h},{instancePath:n,schemaPath:"mapping",parentSchema:!0}),t.endIf()}function p(h){const y=t.name("valid");return e.subschema({keyword:"mapping",schemaProp:h,jtdDiscriminator:n},y),y}}};en.default=bi;var tn={};Object.defineProperty(tn,"__esModule",{value:!0});const Yn=ge,fr=ne,wi=Ae,Di=Ge,Ti=Ce,Oi={keyword:"values",schemaType:"object",error:(0,Ti.typeError)("object"),code(e){(0,wi.checkMetadata)(e);const{gen:t,data:r,schema:n,it:a}=e,[o,c]=(0,Di.checkNullableObject)(e,r);(0,Yn.alwaysValidSchema)(a,n)?t.if((0,fr.not)((0,fr.or)(c,o)),()=>e.error()):(t.if(c),t.assign(o,m()),t.elseIf((0,fr.not)(o)),e.error(),t.endIf()),e.ok(o);function m(){const v=t.name("valid");if(a.allErrors){const h=t.let("valid",!0);return p(()=>t.assign(h,!1)),h}return t.var(v,!0),p(()=>t.break()),v;function p(h){t.forIn("key",r,y=>{e.subschema({keyword:"values",dataProp:y,dataPropType:Yn.Type.Str},v),t.if((0,fr.not)(v),h)})}}}};tn.default=Oi;var rn={};Object.defineProperty(rn,"__esModule",{value:!0});const Ri=te,Ci={keyword:"union",schemaType:"array",trackErrors:!0,code:Ri.validateUnion,error:{message:"must match a schema in union"}};rn.default=Ci;Object.defineProperty(Br,"__esModule",{value:!0});const Ii=_t,Ai=Qr,Fi=Wr,Li=zr,Vi=qr,Ui=xr,Mi=en,Ki=tn,ji=rn,ki=Ae,Ji=["definitions",Ii.default,Ai.default,Fi.default,Li.default,Vi.default,Ui.default,Mi.default,Ki.default,ji.default,ki.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];Br.default=Ji;var nn={};Object.defineProperty(nn,"__esModule",{value:!0});const xe=e=>{const t={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return e&&(t.definitions={values:{ref:"schema"}}),t},Hi=e=>({optionalProperties:xe(e)}),Yi=e=>({properties:{ref:{type:"string"}},optionalProperties:xe(e)}),Gi=e=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:xe(e)}),Zi=e=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:xe(e)}),Bi=e=>({properties:{elements:{ref:"schema"}},optionalProperties:xe(e)}),Ia=e=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...xe(e)}}),Aa=e=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...xe(e)}}),Xi=e=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[Ia(!1),Aa(!1)]}}}},optionalProperties:xe(e)}),Qi=e=>({properties:{values:{ref:"schema"}},optionalProperties:xe(e)}),Gn=e=>({metadata:{union:[Hi,Yi,Gi,Zi,Bi,Ia,Aa,Xi,Qi].map(t=>t(e))}}),Wi={definitions:{schema:Gn(!1)},...Gn(!0)};nn.default=Wi;var an={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.jtdForms=void 0;tr.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"];var sn={};Object.defineProperty(sn,"__esModule",{value:!0});const Ir=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,zi={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function Fa(e){return Ir.lastIndex=0,'"'+(Ir.test(e)?e.replace(Ir,t=>{const r=zi[t];return typeof r=="string"?r:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}):e)+'"'}sn.default=Fa;Fa.code='require("ajv/dist/runtime/quote").default';Object.defineProperty(an,"__esModule",{value:!0});const qi=tr,La=Ee,q=ne,xi=ct,se=Ie,ec=te,tc=_t,rc=ge,nc=sn,ac={elements:oc,values:ic,discriminator:cc,properties:Zn,optionalProperties:Zn,enum:zt,type:lc,ref:dc};function Va(e,t){const r=La.getCompilingSchema.call(this,e);if(r)return r;const{es5:n,lines:a}=this.opts.code,{ownProperties:o}=this.opts,c=new q.CodeGen(this.scope,{es5:n,lines:a,ownProperties:o}),m=c.scopeName("serialize"),v={self:this,gen:c,schema:e.schema,schemaEnv:e,definitions:t,data:se.default.data};let p;try{this._compilations.add(e),e.serializeName=m,c.func(m,se.default.data,!1,()=>{c.let(se.default.json,(0,q.str)``),rr(v),c.return(se.default.json)}),c.optimize(this.opts.code.optimize);const h=c.toString();p=`${c.scopeRefs(se.default.scope)}return ${h}`;const D=new Function(`${se.default.scope}`,p)(this.scope.get());this.scope.value(m,{ref:D}),e.serialize=D}catch(h){throw p&&this.logger.error("Error compiling serializer, function code:",p),delete e.serialize,delete e.serializeName,h}finally{this._compilations.delete(e)}return e}an.default=Va;function rr(e){let t;for(const r of qi.jtdForms)if(r in e.schema){t=r;break}sc(e,t?ac[t]:hc)}function sc(e,t){const{gen:r,schema:n,data:a}=e;if(!n.nullable)return t(e);r.if((0,q._)`${a} === undefined || ${a} === null`,()=>r.add(se.default.json,(0,q._)`"null"`),()=>t(e))}function oc(e){const{gen:t,schema:r,data:n}=e;t.add(se.default.json,(0,q.str)`[`);const a=t.let("first",!0);t.forOf("el",n,o=>{on(e,a),rr({...e,schema:r.elements,data:o})}),t.add(se.default.json,(0,q.str)`]`)}function ic(e){const{gen:t,schema:r,data:n}=e;t.add(se.default.json,(0,q.str)`{`);const a=t.let("first",!0);t.forIn("key",n,o=>Ua(e,o,r.values,a)),t.add(se.default.json,(0,q.str)`}`)}function Ua(e,t,r,n){const{gen:a,data:o}=e;on(e,n),zt({...e,data:t}),a.add(se.default.json,(0,q.str)`:`);const c=a.const("value",(0,q._)`${o}${(0,q.getProperty)(t)}`);rr({...e,schema:r,data:c})}function cc(e){const{gen:t,schema:r,data:n}=e,{discriminator:a}=r;t.add(se.default.json,(0,q.str)`{${JSON.stringify(a)}:`);const o=t.const("tag",(0,q._)`${n}${(0,q.getProperty)(a)}`);zt({...e,data:o}),t.if(!1);for(const c in r.mapping){t.elseIf((0,q._)`${o} === ${c}`);const m=r.mapping[c];Ma({...e,schema:m},a)}t.endIf(),t.add(se.default.json,(0,q.str)`}`)}function Zn(e){const{gen:t}=e;t.add(se.default.json,(0,q.str)`{`),Ma(e),t.add(se.default.json,(0,q.str)`}`)}function Ma(e,t){const{gen:r,schema:n,data:a}=e,{properties:o,optionalProperties:c}=n,m=D(o),v=D(c),p=I(m.concat(v));let h=!t,y;for(const u of m)h?h=!1:r.add(se.default.json,(0,q.str)`,`),A(u,o[u],O(u));h&&(y=r.let("first",!0));for(const u of v){const _=O(u);r.if((0,q.and)((0,q._)`${_} !== undefined`,(0,ec.isOwnProperty)(r,a,u)),()=>{on(e,y),A(u,c[u],_)})}n.additionalProperties&&r.forIn("key",a,u=>r.if(b(u,p),()=>Ua(e,u,{},y)));function D(u){return u?Object.keys(u):[]}function I(u){if(t&&u.push(t),new Set(u).size!==u.length)throw new Error("JTD: properties/optionalProperties/disciminator overlap");return u}function O(u){return r.const("value",(0,q._)`${a}${(0,q.getProperty)(u)}`)}function A(u,_,P){r.add(se.default.json,(0,q.str)`${JSON.stringify(u)}:`),rr({...e,schema:_,data:P})}function b(u,_){return _.length?(0,q.and)(..._.map(P=>(0,q._)`${u} !== ${P}`)):!0}}function lc(e){const{gen:t,schema:r,data:n}=e;switch(r.type){case"boolean":t.add(se.default.json,(0,q._)`${n} ? "true" : "false"`);break;case"string":zt(e);break;case"timestamp":t.if((0,q._)`${n} instanceof Date`,()=>t.add(se.default.json,(0,q._)`'"' + ${n}.toISOString() + '"'`),()=>zt(e));break;default:uc(e)}}function zt({gen:e,data:t}){e.add(se.default.json,(0,q._)`${(0,rc.useFunc)(e,nc.default)}(${t})`)}function uc({gen:e,data:t}){e.add(se.default.json,(0,q._)`"" + ${t}`)}function dc(e){const{gen:t,self:r,data:n,definitions:a,schema:o,schemaEnv:c}=e,{ref:m}=o,v=a[m];if(!v)throw new xi.default(r.opts.uriResolver,"",m,`No definition ${m}`);if(!(0,tc.hasRef)(v))return rr({...e,schema:v});const{root:p}=c,h=Va.call(r,new La.SchemaEnv({schema:v,root:p}),a);t.add(se.default.json,(0,q._)`${fc(t,h)}(${n})`)}function fc(e,t){return t.serialize?e.scopeValue("serialize",{ref:t.serialize}):(0,q._)`${e.scopeValue("wrapper",{ref:t})}.serialize`}function hc({gen:e,data:t}){e.add(se.default.json,(0,q._)`JSON.stringify(${t})`)}function on({gen:e},t){t?e.if(t,()=>e.assign(t,!1),()=>e.add(se.default.json,(0,q.str)`,`)):e.add(se.default.json,(0,q.str)`,`)}var cn={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.parseJsonString=it.parseJsonNumber=it.parseJson=void 0;const pc=/position\s(\d+)$/;function Xe(e,t){let r;Xe.message=void 0;let n;t&&(e=e.slice(t));try{return Xe.position=t+e.length,JSON.parse(e)}catch(a){if(n=pc.exec(a.message),!n){Xe.message="unexpected end";return}r=+n[1];const o=e[r];e=e.slice(0,r),Xe.position=t+r;try{return JSON.parse(e)}catch{Xe.message=`unexpected token ${o}`;return}}}it.parseJson=Xe;Xe.message=void 0;Xe.position=0;Xe.code='require("ajv/dist/runtime/parseJson").parseJson';function Qe(e,t,r){let n="",a;if(Qe.message=void 0,e[t]==="-"&&(n+="-",t++),e[t]==="0")n+="0",t++;else if(!o(r)){c();return}if(r)return Qe.position=t,+n;if(e[t]==="."&&(n+=".",t++,!o())){c();return}if(a=e[t],(a==="e"||a==="E")&&(n+="e",t++,a=e[t],(a==="+"||a==="-")&&(n+=a,t++),!o())){c();return}return Qe.position=t,+n;function o(m){let v=!1;for(;a=e[t],a>="0"&&a<="9"&&(m===void 0||m-- >0);)v=!0,n+=a,t++;return v}function c(){Qe.position=t,Qe.message=t<e.length?`unexpected token ${e[t]}`:"unexpected end"}}it.parseJsonNumber=Qe;Qe.message=void 0;Qe.position=0;Qe.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';const Bn={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},mc="a".charCodeAt(0),yc="0".charCodeAt(0);function st(e,t){let r="",n;for(st.message=void 0;n=e[t++],n!=='"';)if(n==="\\")if(n=e[t],n in Bn)r+=Bn[n],t++;else if(n==="u"){t++;let o=4,c=0;for(;o--;){if(c<<=4,n=e[t],n===void 0){a("unexpected end");return}if(n=n.toLowerCase(),n>="a"&&n<="f")c+=n.charCodeAt(0)-mc+10;else if(n>="0"&&n<="9")c+=n.charCodeAt(0)-yc;else{a(`unexpected token ${n}`);return}t++}r+=String.fromCharCode(c)}else{a(`unexpected token ${n}`);return}else if(n===void 0){a("unexpected end");return}else if(n.charCodeAt(0)>=32)r+=n;else{a(`unexpected token ${n}`);return}return st.position=t,r;function a(o){st.position=t,st.message=o}}it.parseJsonString=st;st.message=void 0;st.position=0;st.code='require("ajv/dist/runtime/parseJson").parseJsonString';Object.defineProperty(cn,"__esModule",{value:!0});const vc=tr,Ka=Ee,K=ne,gc=ct,Q=Ie,_c=te,$c=_t,Sc=Qr,ln=it,ja=ge,Pc=Nr,Ec={elements:Dc,values:Tc,discriminator:Rc,properties:Xn,optionalProperties:Xn,enum:Ic,type:Cc,ref:Ac};function ka(e,t){const r=Ka.getCompilingSchema.call(this,e);if(r)return r;const{es5:n,lines:a}=this.opts.code,{ownProperties:o}=this.opts,c=new K.CodeGen(this.scope,{es5:n,lines:a,ownProperties:o}),m=c.scopeName("parse"),v={self:this,gen:c,schema:e.schema,schemaEnv:e,definitions:t,data:Q.default.data,parseName:m,char:c.name("c")};let p;try{this._compilations.add(e),e.parseName=m,Nc(v),c.optimize(this.opts.code.optimize);const h=c.toString();p=`${c.scopeRefs(Q.default.scope)}return ${h}`;const D=new Function(`${Q.default.scope}`,p)(this.scope.get());this.scope.value(m,{ref:D}),e.parse=D}catch(h){throw p&&this.logger.error("Error compiling parser, function code:",p),delete e.parse,delete e.parseName,h}finally{this._compilations.delete(e)}return e}cn.default=ka;const Mr=(0,K._)`undefined`;function Nc(e){const{gen:t,parseName:r,char:n}=e;t.func(r,(0,K._)`${Q.default.json}, ${Q.default.jsonPos}, ${Q.default.jsonPart}`,!1,()=>{t.let(Q.default.data),t.let(n),t.assign((0,K._)`${r}.message`,Mr),t.assign((0,K._)`${r}.position`,Mr),t.assign(Q.default.jsonPos,(0,K._)`${Q.default.jsonPos} || 0`),t.const(Q.default.jsonLen,(0,K._)`${Q.default.json}.length`),br(e),hn(e),t.if(Q.default.jsonPart,()=>{t.assign((0,K._)`${r}.position`,Q.default.jsonPos),t.return(Q.default.data)}),t.if((0,K._)`${Q.default.jsonPos} === ${Q.default.jsonLen}`,()=>t.return(Q.default.data)),Ft(e)})}function br(e){let t;for(const r of vc.jtdForms)if(r in e.schema){t=r;break}t?wc(e,Ec[t]):dn(e)}const bc=Wn(!0,Wn(!1,Ft));function wc(e,t){const{gen:r,schema:n,data:a}=e;if(!n.nullable)return t(e);qt(e,"null",t,()=>r.assign(a,null))}function Dc(e){const{gen:t,schema:r,data:n}=e;Ze(e,"[");const a=t.let("i",0);t.assign(n,(0,K._)`[]`),un(e,"]",()=>{const o=t.let("el");br({...e,schema:r.elements,data:o}),t.assign((0,K._)`${n}[${a}++]`,o)})}function Tc(e){const{gen:t,schema:r,data:n}=e;Ze(e,"{"),t.assign(n,(0,K._)`{}`),un(e,"}",()=>Oc(e,r.values))}function un(e,t,r){Ja(e,t,r),Ze(e,t)}function Ja(e,t,r){const{gen:n}=e;n.for((0,K._)`;${Q.default.jsonPos}<${Q.default.jsonLen} && ${wr(1)}!==${t};`,()=>{r(),qt(e,",",()=>n.break(),a)});function a(){qt(e,t,()=>{},Ft)}}function Oc(e,t){const{gen:r}=e,n=r.let("key");gt({...e,data:n}),Ze(e,":"),Ya(e,n,t)}function Rc(e){const{gen:t,data:r,schema:n}=e,{discriminator:a,mapping:o}=n;Ze(e,"{"),t.assign(r,(0,K._)`{}`);const c=t.const("pos",Q.default.jsonPos),m=t.let("value"),v=t.let("tag");Ja(e,"}",()=>{const p=t.let("key");gt({...e,data:p}),Ze(e,":"),t.if((0,K._)`${p} === ${a}`,()=>{gt({...e,data:v}),t.assign((0,K._)`${r}[${p}]`,v),t.break()},()=>dn({...e,data:m}))}),t.assign(Q.default.jsonPos,c),t.if((0,K._)`${v} === undefined`),qe(e,(0,K.str)`discriminator tag not found`);for(const p in o)t.elseIf((0,K._)`${v} === ${p}`),Ha({...e,schema:o[p]},a);t.else(),qe(e,(0,K.str)`discriminator value not in schema`),t.endIf()}function Xn(e){const{gen:t,data:r}=e;Ze(e,"{"),t.assign(r,(0,K._)`{}`),Ha(e)}function Ha(e,t){const{gen:r,schema:n,data:a}=e,{properties:o,optionalProperties:c,additionalProperties:m}=n;if(un(e,"}",()=>{const v=r.let("key");if(gt({...e,data:v}),Ze(e,":"),r.if(!1),Qn(e,v,o),Qn(e,v,c),t){r.elseIf((0,K._)`${v} === ${t}`);const p=r.let("tag");gt({...e,data:p})}r.else(),m?dn({...e,data:(0,K._)`${a}[${v}]`}):qe(e,(0,K.str)`property ${v} not allowed`),r.endIf()}),o){const v=(0,_c.hasPropFunc)(r),p=(0,K.and)(...Object.keys(o).map(h=>(0,K._)`${v}.call(${a}, ${h})`));r.if((0,K.not)(p),()=>qe(e,(0,K.str)`missing required properties`))}}function Qn(e,t,r={}){const{gen:n}=e;for(const a in r)n.elseIf((0,K._)`${t} === ${a}`),Ya(e,t,r[a])}function Ya(e,t,r){br({...e,schema:r,data:(0,K._)`${e.data}[${t}]`})}function Cc(e){const{gen:t,schema:r,data:n,self:a}=e;switch(r.type){case"boolean":bc(e);break;case"string":gt(e);break;case"timestamp":{gt(e);const o=(0,ja.useFunc)(t,Pc.default),{allowDate:c,parseDate:m}=a.opts,v=c?(0,K._)`!${o}(${n}, true)`:(0,K._)`!${o}(${n})`,p=m?(0,K.or)(v,(0,K._)`(${n} = new Date(${n}), false)`,(0,K._)`isNaN(${n}.valueOf())`):v;t.if(p,()=>qe(e,(0,K.str)`invalid timestamp`));break}case"float32":case"float64":Ar(e);break;default:{const o=r.type;if(!a.opts.int32range&&(o==="int32"||o==="uint32"))Ar(e,16),o==="uint32"&&t.if((0,K._)`${n} < 0`,()=>qe(e,(0,K.str)`integer out of range`));else{const[c,m,v]=Sc.intRange[o];Ar(e,v),t.if((0,K._)`${n} < ${c} || ${n} > ${m}`,()=>qe(e,(0,K.str)`integer out of range`))}}}}function gt(e){Ze(e,'"'),fn(e,ln.parseJsonString)}function Ic(e){const{gen:t,data:r,schema:n}=e,a=n.enum;Ze(e,'"'),t.if(!1);for(const o of a){const c=JSON.stringify(o).slice(1);t.elseIf((0,K._)`${wr(c.length)} === ${c}`),t.assign(r,(0,K.str)`${o}`),t.add(Q.default.jsonPos,c.length)}t.else(),Ft(e),t.endIf()}function Ar(e,t){const{gen:r}=e;hn(e),r.if((0,K._)`"-0123456789".indexOf(${wr(1)}) < 0`,()=>Ft(e),()=>fn(e,ln.parseJsonNumber,t))}function Wn(e,t){return r=>{const{gen:n,data:a}=r;qt(r,`${e}`,()=>t(r),()=>n.assign(a,e))}}function Ac(e){const{gen:t,self:r,definitions:n,schema:a,schemaEnv:o}=e,{ref:c}=a,m=n[c];if(!m)throw new gc.default(r.opts.uriResolver,"",c,`No definition ${c}`);if(!(0,$c.hasRef)(m))return br({...e,schema:m});const{root:v}=o,p=ka.call(r,new Ka.SchemaEnv({schema:m,root:v}),n);Ga(e,Fc(t,p),!0)}function Fc(e,t){return t.parse?e.scopeValue("parse",{ref:t.parse}):(0,K._)`${e.scopeValue("wrapper",{ref:t})}.parse`}function dn(e){fn(e,ln.parseJson)}function fn(e,t,r){Ga(e,(0,ja.useFunc)(e.gen,t),r)}function Ga(e,t,r){const{gen:n,data:a}=e;n.assign(a,(0,K._)`${t}(${Q.default.json}, ${Q.default.jsonPos}${r?(0,K._)`, ${r}`:K.nil})`),n.assign(Q.default.jsonPos,(0,K._)`${t}.position`),n.if((0,K._)`${a} === undefined`,()=>qe(e,(0,K._)`${t}.message`))}function Ze(e,t){qt(e,t,Ft)}function qt(e,t,r,n){const{gen:a}=e,o=t.length;hn(e),a.if((0,K._)`${wr(o)} === ${t}`,()=>{a.add(Q.default.jsonPos,o),n==null||n(e)},()=>r(e))}function hn({gen:e,char:t}){e.code((0,K._)`while((${t}=${Q.default.json}[${Q.default.jsonPos}],${t}===" "||${t}==="\\n"||${t}==="\\r"||${t}==="\\t"))${Q.default.jsonPos}++;`)}function wr(e){return e===1?(0,K._)`${Q.default.json}[${Q.default.jsonPos}]`:(0,K._)`${Q.default.json}.slice(${Q.default.jsonPos}, ${Q.default.jsonPos}+${e})`}function Ft(e){qe(e,(0,K._)`"unexpected token " + ${Q.default.json}[${Q.default.jsonPos}]`)}function qe({gen:e,parseName:t},r){e.assign((0,K._)`${t}.message`,r),e.assign((0,K._)`${t}.position`,Q.default.jsonPos),e.return(Mr)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const r=ea,n=Br,a=nn,o=an,c=cn,m="JTD-meta-schema";class v extends r.default{constructor(O={}){super({...O,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(n.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(a.default,m,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(m)?m:void 0)}compileSerializer(O){const A=this._addSchema(O);return A.serialize||this._compileSerializer(A)}compileParser(O){const A=this._addSchema(O);return A.parse||this._compileParser(A)}_compileSerializer(O){if(o.default.call(this,O,O.schema.definitions||{}),!O.serialize)throw new Error("ajv implementation error");return O.serialize}_compileParser(O){if(c.default.call(this,O,O.schema.definitions||{}),!O.parse)throw new Error("ajv implementation error");return O.parse}}e.exports=t=v,Object.defineProperty(t,"__esModule",{value:!0}),t.default=v;var p=Ye;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return p.KeywordCxt}});var h=ne;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return h._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return h.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return h.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return h.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return h.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return h.CodeGen}});var y=er;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return y.default}});var D=ct;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return D.default}})})(Fr,Fr.exports);var Lc=ms(Fr.exports);const Lt=new Lc,Ne={type:"string"},pn={type:"string",nullable:!0},Za={type:"int32"},Vc={type:"string"},Kr={properties:{limb:Ne,date:Za}},Uc={properties:{id:Ne,desc:pn}},Mc={properties:{id:Ne,values:{elements:Uc}}},Kc={properties:{id:Ne,desc:pn,articulation:{enum:["Consonant","Vowel"]},features:{elements:Mc}}},jc={properties:{categoryID:Ne,stopId:Ne}},vr={properties:{phoneTypeId:Ne,featureStops:{elements:jc}}},kc={properties:{onset:{elements:vr},rhyme:{properties:{nucleus:{elements:vr},coda:{elements:vr}}}}},Jc={discriminator:"kind",mapping:{syllables:{properties:{syllables:{elements:kc}}},phones:{properties:{phones:{elements:vr}}}}},Hc={properties:{lexemeId:Ne,entryForm:Jc}},Yc={properties:{id:Ne,typeID:Ne,desc:pn,syllabic:{enum:["Syllabic","Nonsyllabic"]},IPA:Vc,featureStops:{elements:{properties:{categoryId:Ne,stopId:Ne}}}}},Gc={properties:{id:Ne,phonemes:{elements:Yc}}},Zc={properties:{id:Ne,startLimb:Kr,treeLimbs:{elements:Kr}}},Bc={properties:{id:Ne,branch:{properties:{diversionDate:Za,children:{elements:Ne}}}}},mn={properties:{phoneTypes:{elements:Kc},languages:{elements:Gc},lexemes:{elements:Hc},rules:{elements:Zc},treeTrunks:{elements:Kr},treeLimbs:{elements:Bc}}},Qt=Lt.compile(mn);Lt.compileSerializer(mn);const Ba={enum:["SaveFileData_v0_1_beta_1","SaveFileData_v0_1_beta_2"]};Lt.compile(Ba);const Xa={properties:{version:Ba,projectName:{type:"string"}},additionalProperties:!0},Xc={properties:{metadata:Xa,data:{properties:{},additionalProperties:!0}}},zn=Lt.compile(Xc),Qa={properties:{metadata:Xa,data:mn}};Lt.compile(Qa);const Qc=Lt.compileSerializer(Qa);function Wc(e){const t={};for(const r of e.languages)for(const n of r.phonemes)t[n.id]=n;return t}function zc(e){var r;const t={};for(const n of e.phoneTypes){const a=[];for(const o of n.features){const c=[];for(const m of o.values)c.push(m);a.push({id:o.id,types:c,desc:""})}t[n.id]={id:n.id,desc:(r=n.desc)!=null?r:"",articulation:n.articulation,features:a}}return t}function qc(e){const t={};for(const r of e.languages){const n={},a=[];for(const o of r.phonemes){n[o.typeID]||(n[o.typeID]=[]);const c=[];for(const v of o.featureStops)c.push({categoryId:v.categoryId,stopId:v.stopId});const m={id:o.id,typeID:o.typeID,desc:o.desc,syllabic:o.syllabic,IPA:o.IPA,featureStops:c};n[o.typeID].push(m),a.push(m)}t[r.id]={id:r.id,desc:"",phonemesByCategory:n,phonemesAll:a}}return t}function xc(e){var n,a;const t=o=>{var m;const c=[];for(const v of o){const p={};for(const h of v.featureStops)p[h.categoryID]=(m=v.featureStops.filter(y=>y.categoryID===h.categoryID)[0])==null?void 0:m.stopId;c.push({id:crypto.randomUUID(),type:v.phoneTypeId,features:p})}return c},r=[];for(const o of e.lexemes){let c;if(o.entryForm.kind==="syllables"){const m=[];for(const v of o.entryForm.syllables)m.push({id:crypto.randomUUID(),onset:t(v.onset),rhyme:{nucleus:t(v.rhyme.nucleus),coda:t(v.rhyme.coda)}});c={id:crypto.randomUUID(),kind:"syllables",syllables:m}}else c={id:crypto.randomUUID(),kind:"phones",phones:t(o.entryForm.phones)};r.push({id:o.lexemeId,entryForm:c,entryDate:0,entryTreeLimb:(a=(n=e.treeLimbs[0])==null?void 0:n.id)!=null?a:""})}return r}function el(e){return[]}function tl(e){return[]}function rl(e){return[]}function nl(e){var o,c,m,v;const r={projectName:(c=(o=e.metadata)==null?void 0:o.projectName)!=null?c:"[Failed to read name]"};let n=e.data;switch((m=e.metadata)==null?void 0:m.version){case"SaveFileData_v0_1_beta_1":n=il(n);case"SaveFileData_v0_1_beta_2":if(!Qt(n))throw new Error(JSON.stringify(Qt.errors));break;default:throw new Error(`Unrecognized file version: ${(v=e==null?void 0:e.metadata)==null?void 0:v.version}
${JSON.stringify(e)}`)}const a=ol(n);return{metadata:r,data:a}}function gr(e){const t=[];for(const r in e.features)t.push({categoryID:r,stopId:e.features[r]});return{phoneTypeId:e.type,featureStops:t}}function al(e){return{onset:e.onset.map(gr),rhyme:{nucleus:e.rhyme.nucleus.map(gr),coda:e.rhyme.coda.map(gr)}}}function sl(e){var y;const t="SaveFileData_v0_1_beta_2",r=e.metadata.projectName,n=[];for(const D of Object.values(e.data.phoneTypes)){const I=[];for(const O of D.features){const A=[];for(const b of O.types)A.push({id:b.id,desc:b.desc});I.push({id:O.id,values:A})}n.push({id:D.id,desc:(y=D.desc)!=null?y:"",articulation:D.articulation,features:I})}const a=[];for(const D of Object.values(e.data.languages))a.push({id:D.id,phonemes:D.phonemesAll});const o=[];for(const D of e.data.words)switch(D.entryForm.kind){case"syllables":o.push({lexemeId:D.id,entryForm:{kind:D.entryForm.kind,syllables:D.entryForm.syllables.map(al)}});break;case"phones":o.push({lexemeId:D.id,entryForm:{kind:D.entryForm.kind,phones:D.entryForm.phones.map(gr)}});break}return Qc({metadata:{version:t,projectName:r},data:{phoneTypes:n,languages:a,lexemes:o,rules:[],treeTrunks:[],treeLimbs:[]}})}function ol(e){return{phoneTypes:zc(e),languages:qc(e),phonemes:Wc(e),words:xc(e),rules:el(),treeTrunks:tl(),treeLimbs:rl()}}function il(e){var v,p,h;const t=[];for(const y of e.phoneTypes){const D=[];for(const I of y.features){const O=[];for(const A of I.type.values)O.push({id:A.id,desc:(v=A.desc)!=null?v:""});D.push({id:I.id,values:O})}t.push({id:y.id,desc:(p=y.desc)!=null?p:"",articulation:y.type==="Vowel"?"Vowel":"Consonant",features:D})}const r=[];for(const y of e.languages){const D=[];for(const I of y.grid){const O=[];for(const A of I.featureStops)O.push({categoryId:A.categoryID,stopId:A.id});D.push({id:I.id,typeID:I.typeID,desc:(h=I.desc)!=null?h:"",syllabic:I.syllabic==="Syllabic"?"Syllabic":"Nonsyllabic",IPA:I.IPA,featureStops:O})}r.push({id:y.id,phonemes:D})}const n=[];for(const y of e.lexicon.words){const D=b=>{const u=[];for(const _ of b){const P=[];for(const R in _.features)P.push({categoryID:R,stopId:_.features[R]});u.push({phoneTypeId:_.type,featureStops:P})}return u},I=b=>({onset:D(b.onset),rhyme:{nucleus:D(b.rhyme.nucleus),coda:D(b.rhyme.coda)}}),O=[];for(const b of y.entryForm.value.sounds)O.push(I(b));const A={kind:"syllables",syllables:O};n.push({lexemeId:y.id,entryForm:A})}const a=[],o=[];for(const y of e.lexicon.treeTrunks)o.push({limb:y,date:0});const c=[];for(const y of e.lexicon.treeLimbs){const D=y.branch.children;c.push({id:y.id,branch:{diversionDate:y.branch.deathDate,children:D}})}const m={phoneTypes:t,languages:r,lexemes:n,rules:a,treeTrunks:o,treeLimbs:c};if(!Qt(m))throw console.log(m),console.log(Qt.errors),JSON.stringify(Qt.errors);return m}var qn="/sca-jgantts/assets/file-solid.ec1fc0a3.svg",cl="/sca-jgantts/assets/file-circle-question-solid.7e883efd.svg",ll="/sca-jgantts/assets/file-circle-check-solid.a14fc8af.svg",xn="/sca-jgantts/assets/file-circle-exclamation-solid.9ba69b5a.svg";const ul={style:{position:"relative",display:"grid"}},dl={class:"container",style:{display:"flex","flex-direction":"column",gap:"0.5rem"}},fl=_e("div",{class:"text-h3 text-weight-thin"},"Load",-1),hl=_e("h4",null,"Templates",-1),pl={style:{display:"flex"}},ml={key:0},yl=_e("hr",null,null,-1),vl=["src"],gl={key:0},_l={key:0,class:"unsaved-changes-warning"},$l={key:1},Sl=_e("br",null,null,-1),Pl={key:2},El=_e("br",null,null,-1),Nl={class:"container"},bl=_e("div",{class:"text-h3 text-weight-thin"},"Save",-1),wl=_e("br",null,null,-1),Dl=_e("div",null,[_e("div",null," TODO: load from/save to csv ")],-1),Cl=cs({__name:"SaveLoadPage",props:{changeTab:{type:Function},loadFromFiles:{}},setup(e){const t=e,r=is(),n=cr(null),a=cr(qn);let o=null;const c=cr("noFile"),m=cr(null);function v(b){switch(b){case"ipa":y(JSON.stringify(hs));break;case"blank":y("{}");break}}function p(b){var _;if(!b)return;const u=(_=b==null?void 0:b.target)==null?void 0:_.files;!u||h(u)}function h(b){const u=b[0];if(!u)return;const _=new FileReader;_.onload=P=>{var J;const R=(J=P.target)==null?void 0:J.result;!R||R instanceof ArrayBuffer||y(R)},_.readAsText(u)}function y(b){I(),a.value=qn,c.value="parsingForMetadata";const u=JSON.parse(b);if(!zn(u)){c.value="metadataParseError",m.value="Error parsing file. Check console for messages.",console.log(b.substring(0,100)),console.log(u),console.log(zn.errors),a.value=xn;return}const _=u;n.value=_.metadata,c.value="parsingForData",a.value=cl;try{o=nl(_)}catch(P){c.value="dataParseError",m.value="Error parsing file. Check console for messages.",console.log(P),console.log(b.substring(0,100)),console.log(u),a.value=xn;return}c.value="validForLoad",a.value=ll}function D(){if(!r.languages)return;const b=sl(r.languages);A("mylang.scajgantts",b)}function I(){const b=document.getElementById("fileToLoad");!b||(b.value="",o=null,n.value=null,c.value="noFile")}function O(){!o||(r.loadSaveFile(o),t.changeTab("#overview"),I())}function A(b,u){const _=document.createElement("a");_.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(u)),_.setAttribute("download",b),_.style.display="none",document.body.appendChild(_),_.click(),document.body.removeChild(_)}return(b,u)=>{var _;return Dt(),Tt(us,null,[_e("div",ul,[_e("div",dl,[fl,_e("div",null,[hl,_e("div",pl,[lr(ir,{rounded:"",color:"secondary",onClick:u[0]||(u[0]=P=>v("ipa"))},{default:Tr(()=>[Ot(" IPA ")]),_:1}),Ot(" \xA0 "),lr(ir,{rounded:"",color:"secondary",click:'loadTemplate("blank")'},{default:Tr(()=>[Ot(" blank ")]),_:1})])]),_e("div",null,[_e("input",{type:"file",id:"fileToLoad",accept:".scajgantts",onChange:p},null,32)]),c.value!="noFile"?(Dt(),Tt("div",ml,[yl,lr(ir,{rounded:"",color:"primary",style:{background:"none",border:"none",margin:"0.3rem",display:"flex","flex-direction":"column","font-size":"small",color:"var(--jg-c-text-highlight)"},onClick:u[1]||(u[1]=P=>O()),disabled:c.value!="validForLoad"},{default:Tr(()=>{var P;return[_e("img",{src:a.value,style:{width:"2.5rem"},class:"jsonIcon"},null,8,vl),Ot(" \xA0 "),c.value=="validForLoad"?(Dt(),Tt("div",gl," Load "+ur((P=n.value)==null?void 0:P.projectName),1)):Gt("",!0)]}),_:1},8,["disabled"]),ls(r).languages!==null&&c.value=="validForLoad"?(Dt(),Tt("div",_l," Unsaved changes will be lost! ")):Gt("",!0),c.value=="dataParseError"?(Dt(),Tt("div",$l,[Ot(" Unable to parse "+ur((_=n.value)==null?void 0:_.projectName)+" ",1),Sl,Ot(" Error: '"+ur(m.value)+"' ",1)])):Gt("",!0),c.value=="metadataParseError"?(Dt(),Tt("div",Pl,ur(m.value),1)):Gt("",!0)])):Gt("",!0)])]),El,_e("div",Nl,[bl,_e("div",null,[lr(ir,{color:"primary",rounded:"",label:"Download to disk",onClick:u[2]||(u[2]=P=>D())})])]),wl,Dl],64)}}});export{Cl as default};
